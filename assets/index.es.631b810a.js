var bb=Object.defineProperty;var Kl=Object.getOwnPropertySymbols;var mb=Object.prototype.hasOwnProperty,wb=Object.prototype.propertyIsEnumerable;var Vl=(n,e,r)=>e in n?bb(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,it=(n,e)=>{for(var r in e||(e={}))mb.call(e,r)&&Vl(n,r,e[r]);if(Kl)for(var r of Kl(e))wb.call(e,r)&&Vl(n,r,e[r]);return n};import{r as Eb,e as Ur,N as Tc}from"./___vite-browser-external_commonjs-proxy.487a0c5a.js";import{X as Db,Y as mt,Z as Sb,_ as Ib}from"./vendor.6e00bc36.js";var Nc={},xo={},Ue={},kl={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(_,w){var x=_>>>16&65535,A=_&65535,M=w>>>16&65535,W=w&65535;return A*W+(x*W+A*M<<16>>>0)|0}n.mul=Math.imul||e;function r(_,w){return _+w|0}n.add=r;function s(_,w){return _-w|0}n.sub=s;function o(_,w){return _<<w|_>>>32-w}n.rotl=o;function l(_,w){return _<<32-w|_>>>w}n.rotr=l;function b(_){return typeof _=="number"&&isFinite(_)&&Math.floor(_)===_}n.isInteger=Number.isInteger||b,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(_){return n.isInteger(_)&&_>=-n.MAX_SAFE_INTEGER&&_<=n.MAX_SAFE_INTEGER}})(kl);Object.defineProperty(Ue,"__esModule",{value:!0});var Gl=kl;function Ob(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}Ue.readInt16BE=Ob;function xb(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}Ue.readUint16BE=xb;function Pb(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}Ue.readInt16LE=Pb;function Ab(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}Ue.readUint16LE=Ab;function Wl(n,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=n>>>8,e[r+1]=n>>>0,e}Ue.writeUint16BE=Wl;Ue.writeInt16BE=Wl;function Yl(n,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=n>>>0,e[r+1]=n>>>8,e}Ue.writeUint16LE=Yl;Ue.writeInt16LE=Yl;function Rc(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}Ue.readInt32BE=Rc;function Fc(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}Ue.readUint32BE=Fc;function jc(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}Ue.readInt32LE=jc;function Uc(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}Ue.readUint32LE=Uc;function Po(n,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=n>>>24,e[r+1]=n>>>16,e[r+2]=n>>>8,e[r+3]=n>>>0,e}Ue.writeUint32BE=Po;Ue.writeInt32BE=Po;function Ao(n,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=n>>>0,e[r+1]=n>>>8,e[r+2]=n>>>16,e[r+3]=n>>>24,e}Ue.writeUint32LE=Ao;Ue.writeInt32LE=Ao;function Cb(n,e){e===void 0&&(e=0);var r=Rc(n,e),s=Rc(n,e+4);return r*4294967296+s-(s>>31)*4294967296}Ue.readInt64BE=Cb;function Tb(n,e){e===void 0&&(e=0);var r=Fc(n,e),s=Fc(n,e+4);return r*4294967296+s}Ue.readUint64BE=Tb;function Nb(n,e){e===void 0&&(e=0);var r=jc(n,e),s=jc(n,e+4);return s*4294967296+r-(r>>31)*4294967296}Ue.readInt64LE=Nb;function Rb(n,e){e===void 0&&(e=0);var r=Uc(n,e),s=Uc(n,e+4);return s*4294967296+r}Ue.readUint64LE=Rb;function Jl(n,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Po(n/4294967296>>>0,e,r),Po(n>>>0,e,r+4),e}Ue.writeUint64BE=Jl;Ue.writeInt64BE=Jl;function Xl(n,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Ao(n>>>0,e,r),Ao(n/4294967296>>>0,e,r+4),e}Ue.writeUint64LE=Xl;Ue.writeInt64LE=Xl;function Fb(n,e,r){if(r===void 0&&(r=0),n%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,l=n/8+r-1;l>=r;l--)s+=e[l]*o,o*=256;return s}Ue.readUintBE=Fb;function jb(n,e,r){if(r===void 0&&(r=0),n%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,l=r;l<r+n/8;l++)s+=e[l]*o,o*=256;return s}Ue.readUintLE=jb;function Ub(n,e,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Gl.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,l=n/8+s-1;l>=s;l--)r[l]=e/o&255,o*=256;return r}Ue.writeUintBE=Ub;function Mb(n,e,r,s){if(r===void 0&&(r=new Uint8Array(n/8)),s===void 0&&(s=0),n%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Gl.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,l=s;l<s+n/8;l++)r[l]=e/o&255,o*=256;return r}Ue.writeUintLE=Mb;function Lb(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(e)}Ue.readFloat32BE=Lb;function $b(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat32(e,!0)}Ue.readFloat32LE=$b;function Bb(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(e)}Ue.readFloat64BE=Bb;function zb(n,e){e===void 0&&(e=0);var r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.getFloat64(e,!0)}Ue.readFloat64LE=zb;function Hb(n,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(r,n),e}Ue.writeFloat32BE=Hb;function qb(n,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(r,n,!0),e}Ue.writeFloat32LE=qb;function Kb(n,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(r,n),e}Ue.writeFloat64BE=Kb;function Vb(n,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(r,n,!0),e}Ue.writeFloat64LE=Vb;var Or={};Object.defineProperty(Or,"__esModule",{value:!0});function kb(n){for(var e=0;e<n.length;e++)n[e]=0;return n}Or.wipe=kb;Object.defineProperty(xo,"__esModule",{value:!0});var tr=Ue,Mc=Or,Gb=20;function Wb(n,e,r){for(var s=1634760805,o=857760878,l=2036477234,b=1797285236,_=r[3]<<24|r[2]<<16|r[1]<<8|r[0],w=r[7]<<24|r[6]<<16|r[5]<<8|r[4],x=r[11]<<24|r[10]<<16|r[9]<<8|r[8],A=r[15]<<24|r[14]<<16|r[13]<<8|r[12],M=r[19]<<24|r[18]<<16|r[17]<<8|r[16],W=r[23]<<24|r[22]<<16|r[21]<<8|r[20],B=r[27]<<24|r[26]<<16|r[25]<<8|r[24],N=r[31]<<24|r[30]<<16|r[29]<<8|r[28],te=e[3]<<24|e[2]<<16|e[1]<<8|e[0],X=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ae=e[11]<<24|e[10]<<16|e[9]<<8|e[8],L=e[15]<<24|e[14]<<16|e[13]<<8|e[12],z=s,C=o,R=l,F=b,h=_,m=w,re=x,u=A,g=M,y=W,E=B,d=N,f=te,O=X,j=ae,q=L,I=0;I<Gb;I+=2)z=z+h|0,f^=z,f=f>>>32-16|f<<16,g=g+f|0,h^=g,h=h>>>32-12|h<<12,C=C+m|0,O^=C,O=O>>>32-16|O<<16,y=y+O|0,m^=y,m=m>>>32-12|m<<12,R=R+re|0,j^=R,j=j>>>32-16|j<<16,E=E+j|0,re^=E,re=re>>>32-12|re<<12,F=F+u|0,q^=F,q=q>>>32-16|q<<16,d=d+q|0,u^=d,u=u>>>32-12|u<<12,R=R+re|0,j^=R,j=j>>>32-8|j<<8,E=E+j|0,re^=E,re=re>>>32-7|re<<7,F=F+u|0,q^=F,q=q>>>32-8|q<<8,d=d+q|0,u^=d,u=u>>>32-7|u<<7,C=C+m|0,O^=C,O=O>>>32-8|O<<8,y=y+O|0,m^=y,m=m>>>32-7|m<<7,z=z+h|0,f^=z,f=f>>>32-8|f<<8,g=g+f|0,h^=g,h=h>>>32-7|h<<7,z=z+m|0,q^=z,q=q>>>32-16|q<<16,E=E+q|0,m^=E,m=m>>>32-12|m<<12,C=C+re|0,f^=C,f=f>>>32-16|f<<16,d=d+f|0,re^=d,re=re>>>32-12|re<<12,R=R+u|0,O^=R,O=O>>>32-16|O<<16,g=g+O|0,u^=g,u=u>>>32-12|u<<12,F=F+h|0,j^=F,j=j>>>32-16|j<<16,y=y+j|0,h^=y,h=h>>>32-12|h<<12,R=R+u|0,O^=R,O=O>>>32-8|O<<8,g=g+O|0,u^=g,u=u>>>32-7|u<<7,F=F+h|0,j^=F,j=j>>>32-8|j<<8,y=y+j|0,h^=y,h=h>>>32-7|h<<7,C=C+re|0,f^=C,f=f>>>32-8|f<<8,d=d+f|0,re^=d,re=re>>>32-7|re<<7,z=z+m|0,q^=z,q=q>>>32-8|q<<8,E=E+q|0,m^=E,m=m>>>32-7|m<<7;tr.writeUint32LE(z+s|0,n,0),tr.writeUint32LE(C+o|0,n,4),tr.writeUint32LE(R+l|0,n,8),tr.writeUint32LE(F+b|0,n,12),tr.writeUint32LE(h+_|0,n,16),tr.writeUint32LE(m+w|0,n,20),tr.writeUint32LE(re+x|0,n,24),tr.writeUint32LE(u+A|0,n,28),tr.writeUint32LE(g+M|0,n,32),tr.writeUint32LE(y+W|0,n,36),tr.writeUint32LE(E+B|0,n,40),tr.writeUint32LE(d+N|0,n,44),tr.writeUint32LE(f+te|0,n,48),tr.writeUint32LE(O+X|0,n,52),tr.writeUint32LE(j+ae|0,n,56),tr.writeUint32LE(q+L|0,n,60)}function Zl(n,e,r,s,o){if(o===void 0&&(o=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<r.length)throw new Error("ChaCha: destination is shorter than source");var l,b;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=new Uint8Array(16),b=l.length-e.length,l.set(e,b)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");l=e,b=o}for(var _=new Uint8Array(64),w=0;w<r.length;w+=64){Wb(_,l,n);for(var x=w;x<w+64&&x<r.length;x++)s[x]=r[x]^_[x-w];Jb(l,0,b)}return Mc.wipe(_),o===0&&Mc.wipe(l),s}xo.streamXOR=Zl;function Yb(n,e,r,s){return s===void 0&&(s=0),Mc.wipe(r),Zl(n,e,r,r,s)}xo.stream=Yb;function Jb(n,e,r){for(var s=1;r--;)s=s+(n[e]&255)|0,n[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var Ql={},Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});function Xb(n,e,r){return~(n-1)&e|n-1&r}Ai.select=Xb;function Zb(n,e){return(n|0)-(e|0)-1>>>31&1}Ai.lessOrEqual=Zb;function ef(n,e){if(n.length!==e.length)return 0;for(var r=0,s=0;s<n.length;s++)r|=n[s]^e[s];return 1&r-1>>>8}Ai.compare=ef;function Qb(n,e){return n.length===0||e.length===0?!1:ef(n,e)!==0}Ai.equal=Qb;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ai,r=Or;n.DIGEST_LENGTH=16;var s=function(){function b(_){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var w=_[0]|_[1]<<8;this._r[0]=w&8191;var x=_[2]|_[3]<<8;this._r[1]=(w>>>13|x<<3)&8191;var A=_[4]|_[5]<<8;this._r[2]=(x>>>10|A<<6)&7939;var M=_[6]|_[7]<<8;this._r[3]=(A>>>7|M<<9)&8191;var W=_[8]|_[9]<<8;this._r[4]=(M>>>4|W<<12)&255,this._r[5]=W>>>1&8190;var B=_[10]|_[11]<<8;this._r[6]=(W>>>14|B<<2)&8191;var N=_[12]|_[13]<<8;this._r[7]=(B>>>11|N<<5)&8065;var te=_[14]|_[15]<<8;this._r[8]=(N>>>8|te<<8)&8191,this._r[9]=te>>>5&127,this._pad[0]=_[16]|_[17]<<8,this._pad[1]=_[18]|_[19]<<8,this._pad[2]=_[20]|_[21]<<8,this._pad[3]=_[22]|_[23]<<8,this._pad[4]=_[24]|_[25]<<8,this._pad[5]=_[26]|_[27]<<8,this._pad[6]=_[28]|_[29]<<8,this._pad[7]=_[30]|_[31]<<8}return b.prototype._blocks=function(_,w,x){for(var A=this._fin?0:1<<11,M=this._h[0],W=this._h[1],B=this._h[2],N=this._h[3],te=this._h[4],X=this._h[5],ae=this._h[6],L=this._h[7],z=this._h[8],C=this._h[9],R=this._r[0],F=this._r[1],h=this._r[2],m=this._r[3],re=this._r[4],u=this._r[5],g=this._r[6],y=this._r[7],E=this._r[8],d=this._r[9];x>=16;){var f=_[w+0]|_[w+1]<<8;M+=f&8191;var O=_[w+2]|_[w+3]<<8;W+=(f>>>13|O<<3)&8191;var j=_[w+4]|_[w+5]<<8;B+=(O>>>10|j<<6)&8191;var q=_[w+6]|_[w+7]<<8;N+=(j>>>7|q<<9)&8191;var I=_[w+8]|_[w+9]<<8;te+=(q>>>4|I<<12)&8191,X+=I>>>1&8191;var G=_[w+10]|_[w+11]<<8;ae+=(I>>>14|G<<2)&8191;var Q=_[w+12]|_[w+13]<<8;L+=(G>>>11|Q<<5)&8191;var ee=_[w+14]|_[w+15]<<8;z+=(Q>>>8|ee<<8)&8191,C+=ee>>>5|A;var ne=0,ye=ne;ye+=M*R,ye+=W*(5*d),ye+=B*(5*E),ye+=N*(5*y),ye+=te*(5*g),ne=ye>>>13,ye&=8191,ye+=X*(5*u),ye+=ae*(5*re),ye+=L*(5*m),ye+=z*(5*h),ye+=C*(5*F),ne+=ye>>>13,ye&=8191;var le=ne;le+=M*F,le+=W*R,le+=B*(5*d),le+=N*(5*E),le+=te*(5*y),ne=le>>>13,le&=8191,le+=X*(5*g),le+=ae*(5*u),le+=L*(5*re),le+=z*(5*m),le+=C*(5*h),ne+=le>>>13,le&=8191;var Ce=ne;Ce+=M*h,Ce+=W*F,Ce+=B*R,Ce+=N*(5*d),Ce+=te*(5*E),ne=Ce>>>13,Ce&=8191,Ce+=X*(5*y),Ce+=ae*(5*g),Ce+=L*(5*u),Ce+=z*(5*re),Ce+=C*(5*m),ne+=Ce>>>13,Ce&=8191;var J=ne;J+=M*m,J+=W*h,J+=B*F,J+=N*R,J+=te*(5*d),ne=J>>>13,J&=8191,J+=X*(5*E),J+=ae*(5*y),J+=L*(5*g),J+=z*(5*u),J+=C*(5*re),ne+=J>>>13,J&=8191;var Y=ne;Y+=M*re,Y+=W*m,Y+=B*h,Y+=N*F,Y+=te*R,ne=Y>>>13,Y&=8191,Y+=X*(5*d),Y+=ae*(5*E),Y+=L*(5*y),Y+=z*(5*g),Y+=C*(5*u),ne+=Y>>>13,Y&=8191;var H=ne;H+=M*u,H+=W*re,H+=B*m,H+=N*h,H+=te*F,ne=H>>>13,H&=8191,H+=X*R,H+=ae*(5*d),H+=L*(5*E),H+=z*(5*y),H+=C*(5*g),ne+=H>>>13,H&=8191;var p=ne;p+=M*g,p+=W*u,p+=B*re,p+=N*m,p+=te*h,ne=p>>>13,p&=8191,p+=X*F,p+=ae*R,p+=L*(5*d),p+=z*(5*E),p+=C*(5*y),ne+=p>>>13,p&=8191;var U=ne;U+=M*y,U+=W*g,U+=B*u,U+=N*re,U+=te*m,ne=U>>>13,U&=8191,U+=X*h,U+=ae*F,U+=L*R,U+=z*(5*d),U+=C*(5*E),ne+=U>>>13,U&=8191;var he=ne;he+=M*E,he+=W*y,he+=B*g,he+=N*u,he+=te*re,ne=he>>>13,he&=8191,he+=X*m,he+=ae*h,he+=L*F,he+=z*R,he+=C*(5*d),ne+=he>>>13,he&=8191;var pe=ne;pe+=M*d,pe+=W*E,pe+=B*y,pe+=N*g,pe+=te*u,ne=pe>>>13,pe&=8191,pe+=X*re,pe+=ae*m,pe+=L*h,pe+=z*F,pe+=C*R,ne+=pe>>>13,pe&=8191,ne=(ne<<2)+ne|0,ne=ne+ye|0,ye=ne&8191,ne=ne>>>13,le+=ne,M=ye,W=le,B=Ce,N=J,te=Y,X=H,ae=p,L=U,z=he,C=pe,w+=16,x-=16}this._h[0]=M,this._h[1]=W,this._h[2]=B,this._h[3]=N,this._h[4]=te,this._h[5]=X,this._h[6]=ae,this._h[7]=L,this._h[8]=z,this._h[9]=C},b.prototype.finish=function(_,w){w===void 0&&(w=0);var x=new Uint16Array(10),A,M,W,B;if(this._leftover){for(B=this._leftover,this._buffer[B++]=1;B<16;B++)this._buffer[B]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(A=this._h[1]>>>13,this._h[1]&=8191,B=2;B<10;B++)this._h[B]+=A,A=this._h[B]>>>13,this._h[B]&=8191;for(this._h[0]+=A*5,A=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=A,A=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=A,x[0]=this._h[0]+5,A=x[0]>>>13,x[0]&=8191,B=1;B<10;B++)x[B]=this._h[B]+A,A=x[B]>>>13,x[B]&=8191;for(x[9]-=1<<13,M=(A^1)-1,B=0;B<10;B++)x[B]&=M;for(M=~M,B=0;B<10;B++)this._h[B]=this._h[B]&M|x[B];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,W=this._h[0]+this._pad[0],this._h[0]=W&65535,B=1;B<8;B++)W=(this._h[B]+this._pad[B]|0)+(W>>>16)|0,this._h[B]=W&65535;return _[w+0]=this._h[0]>>>0,_[w+1]=this._h[0]>>>8,_[w+2]=this._h[1]>>>0,_[w+3]=this._h[1]>>>8,_[w+4]=this._h[2]>>>0,_[w+5]=this._h[2]>>>8,_[w+6]=this._h[3]>>>0,_[w+7]=this._h[3]>>>8,_[w+8]=this._h[4]>>>0,_[w+9]=this._h[4]>>>8,_[w+10]=this._h[5]>>>0,_[w+11]=this._h[5]>>>8,_[w+12]=this._h[6]>>>0,_[w+13]=this._h[6]>>>8,_[w+14]=this._h[7]>>>0,_[w+15]=this._h[7]>>>8,this._finished=!0,this},b.prototype.update=function(_){var w=0,x=_.length,A;if(this._leftover){A=16-this._leftover,A>x&&(A=x);for(var M=0;M<A;M++)this._buffer[this._leftover+M]=_[w+M];if(x-=A,w+=A,this._leftover+=A,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(x>=16&&(A=x-x%16,this._blocks(_,w,A),w+=A,x-=A),x){for(var M=0;M<x;M++)this._buffer[this._leftover+M]=_[w+M];this._leftover+=x}return this},b.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var _=new Uint8Array(16);return this.finish(_),_},b.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},b}();n.Poly1305=s;function o(b,_){var w=new s(b);w.update(_);var x=w.digest();return w.clean(),x}n.oneTimeAuth=o;function l(b,_){return b.length!==n.DIGEST_LENGTH||_.length!==n.DIGEST_LENGTH?!1:e.equal(b,_)}n.equal=l})(Ql);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=xo,r=Ql,s=Or,o=Ue,l=Ai;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var b=new Uint8Array(16),_=function(){function w(x){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,x.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(x)}return w.prototype.seal=function(x,A,M,W){if(x.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var B=new Uint8Array(16);B.set(x,B.length-x.length);var N=new Uint8Array(32);e.stream(this._key,B,N,4);var te=A.length+this.tagLength,X;if(W){if(W.length!==te)throw new Error("ChaCha20Poly1305: incorrect destination length");X=W}else X=new Uint8Array(te);return e.streamXOR(this._key,B,A,X,4),this._authenticate(X.subarray(X.length-this.tagLength,X.length),N,X.subarray(0,X.length-this.tagLength),M),s.wipe(B),X},w.prototype.open=function(x,A,M,W){if(x.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(A.length<this.tagLength)return null;var B=new Uint8Array(16);B.set(x,B.length-x.length);var N=new Uint8Array(32);e.stream(this._key,B,N,4);var te=new Uint8Array(this.tagLength);if(this._authenticate(te,N,A.subarray(0,A.length-this.tagLength),M),!l.equal(te,A.subarray(A.length-this.tagLength,A.length)))return null;var X=A.length-this.tagLength,ae;if(W){if(W.length!==X)throw new Error("ChaCha20Poly1305: incorrect destination length");ae=W}else ae=new Uint8Array(X);return e.streamXOR(this._key,B,A.subarray(0,A.length-this.tagLength),ae,4),s.wipe(B),ae},w.prototype.clean=function(){return s.wipe(this._key),this},w.prototype._authenticate=function(x,A,M,W){var B=new r.Poly1305(A);W&&(B.update(W),W.length%16>0&&B.update(b.subarray(W.length%16))),B.update(M),M.length%16>0&&B.update(b.subarray(M.length%16));var N=new Uint8Array(8);W&&o.writeUint64LE(W.length,N),B.update(N),o.writeUint64LE(M.length,N),B.update(N);for(var te=B.digest(),X=0;X<te.length;X++)x[X]=te[X];B.clean(),s.wipe(te),s.wipe(N)},w}();n.ChaCha20Poly1305=_})(Nc);var tf={},is={},Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});function em(n){return typeof n.saveState!="undefined"&&typeof n.restoreState!="undefined"&&typeof n.cleanSavedState!="undefined"}Lc.isSerializableHash=em;Object.defineProperty(is,"__esModule",{value:!0});var ei=Lc,tm=Ai,rm=Or,rf=function(){function n(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(s).clean():s.set(r);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=54^92;this._outer.update(s),ei.isSerializableHash(this._inner)&&ei.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),rm.wipe(s)}return n.prototype.reset=function(){if(!ei.isSerializableHash(this._inner)||!ei.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){ei.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ei.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(e){return this._inner.update(e),this},n.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},n.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},n.prototype.saveState=function(){if(!ei.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(e){if(!ei.isSerializableHash(this._inner)||!ei.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(e){if(!ei.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},n}();is.HMAC=rf;function im(n,e,r){var s=new rf(n,e);s.update(r);var o=s.digest();return s.clean(),o}is.hmac=im;is.equal=tm.equal;Object.defineProperty(tf,"__esModule",{value:!0});var nf=is,sf=Or,nm=function(){function n(e,r,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var l=nf.hmac(this._hash,s,r);this._hmac=new nf.HMAC(e,l),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(e){for(var r=new Uint8Array(e),s=0;s<r.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[s]=this._buffer[this._bufpos++];return r},n.prototype.clean=function(){this._hmac.clean(),sf.wipe(this._buffer),sf.wipe(this._counter),this._bufpos=0},n}(),sm=tf.HKDF=nm,Sn={},Co={},To={};Object.defineProperty(To,"__esModule",{value:!0});To.BrowserRandomSource=void 0;const of=65536;class om{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self!="undefined"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let s=0;s<r.length;s+=of)this._crypto.getRandomValues(r.subarray(s,s+Math.min(r.length-s,of)));return r}}To.BrowserRandomSource=om;var No={};Object.defineProperty(No,"__esModule",{value:!0});No.NodeRandomSource=void 0;const am=Or;class cm{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Db!="undefined"){const e=Eb;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=r[o];return(0,am.wipe)(r),s}}No.NodeRandomSource=cm;Object.defineProperty(Co,"__esModule",{value:!0});Co.SystemRandomSource=void 0;const um=To,hm=No;class lm{constructor(){if(this.isAvailable=!1,this.name="",this._source=new um.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new hm.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Co.SystemRandomSource=lm;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=Co,r=Ue,s=Or;n.defaultRandomSource=new e.SystemRandomSource;function o(x,A=n.defaultRandomSource){return A.randomBytes(x)}n.randomBytes=o;function l(x=n.defaultRandomSource){const A=o(4,x),M=(0,r.readUint32LE)(A);return(0,s.wipe)(A),M}n.randomUint32=l;const b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function _(x,A=b,M=n.defaultRandomSource){if(A.length<2)throw new Error("randomString charset is too short");if(A.length>256)throw new Error("randomString charset is too long");let W="";const B=A.length,N=256-256%B;for(;x>0;){const te=o(Math.ceil(x*256/N),M);for(let X=0;X<te.length&&x>0;X++){const ae=te[X];ae<N&&(W+=A.charAt(ae%B),x--)}(0,s.wipe)(te)}return W}n.randomString=_;function w(x,A=b,M=n.defaultRandomSource){const W=Math.ceil(x/(Math.log(A.length)/Math.LN2));return _(W,A,M)}n.randomStringForEntropy=w})(Sn);var Ro={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ue,r=Or;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var s=function(){function _(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return _.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},_.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},_.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},_.prototype.update=function(w,x){if(x===void 0&&(x=w.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var A=0;if(this._bytesHashed+=x,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&x>0;)this._buffer[this._bufferLength++]=w[A++],x--;this._bufferLength===this.blockSize&&(l(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(x>=this.blockSize&&(A=l(this._temp,this._state,w,A,x),x%=this.blockSize);x>0;)this._buffer[this._bufferLength++]=w[A++],x--;return this},_.prototype.finish=function(w){if(!this._finished){var x=this._bytesHashed,A=this._bufferLength,M=x/536870912|0,W=x<<3,B=x%64<56?64:128;this._buffer[A]=128;for(var N=A+1;N<B-8;N++)this._buffer[N]=0;e.writeUint32BE(M,this._buffer,B-8),e.writeUint32BE(W,this._buffer,B-4),l(this._temp,this._state,this._buffer,0,B),this._finished=!0}for(var N=0;N<this.digestLength/4;N++)e.writeUint32BE(this._state[N],w,N*4);return this},_.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},_.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},_.prototype.restoreState=function(w){return this._state.set(w.state),this._bufferLength=w.bufferLength,w.buffer&&this._buffer.set(w.buffer),this._bytesHashed=w.bytesHashed,this._finished=!1,this},_.prototype.cleanSavedState=function(w){r.wipe(w.state),w.buffer&&r.wipe(w.buffer),w.bufferLength=0,w.bytesHashed=0},_}();n.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function l(_,w,x,A,M){for(;M>=64;){for(var W=w[0],B=w[1],N=w[2],te=w[3],X=w[4],ae=w[5],L=w[6],z=w[7],C=0;C<16;C++){var R=A+C*4;_[C]=e.readUint32BE(x,R)}for(var C=16;C<64;C++){var F=_[C-2],h=(F>>>17|F<<32-17)^(F>>>19|F<<32-19)^F>>>10;F=_[C-15];var m=(F>>>7|F<<32-7)^(F>>>18|F<<32-18)^F>>>3;_[C]=(h+_[C-7]|0)+(m+_[C-16]|0)}for(var C=0;C<64;C++){var h=(((X>>>6|X<<32-6)^(X>>>11|X<<32-11)^(X>>>25|X<<32-25))+(X&ae^~X&L)|0)+(z+(o[C]+_[C]|0)|0)|0,m=((W>>>2|W<<32-2)^(W>>>13|W<<32-13)^(W>>>22|W<<32-22))+(W&B^W&N^B&N)|0;z=L,L=ae,ae=X,X=te+h|0,te=N,N=B,B=W,W=h+m|0}w[0]+=W,w[1]+=B,w[2]+=N,w[3]+=te,w[4]+=X,w[5]+=ae,w[6]+=L,w[7]+=z,A+=64,M-=64}return A}function b(_){var w=new s;w.update(_);var x=w.digest();return w.clean(),x}n.hash=b})(Ro);var $c={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=Sn,r=Or;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function s(C){const R=new Float64Array(16);if(C)for(let F=0;F<C.length;F++)R[F]=C[F];return R}const o=new Uint8Array(32);o[0]=9;const l=s([56129,1]);function b(C){let R=1;for(let F=0;F<16;F++){let h=C[F]+R+65535;R=Math.floor(h/65536),C[F]=h-R*65536}C[0]+=R-1+37*(R-1)}function _(C,R,F){const h=~(F-1);for(let m=0;m<16;m++){const re=h&(C[m]^R[m]);C[m]^=re,R[m]^=re}}function w(C,R){const F=s(),h=s();for(let m=0;m<16;m++)h[m]=R[m];b(h),b(h),b(h);for(let m=0;m<2;m++){F[0]=h[0]-65517;for(let u=1;u<15;u++)F[u]=h[u]-65535-(F[u-1]>>16&1),F[u-1]&=65535;F[15]=h[15]-32767-(F[14]>>16&1);const re=F[15]>>16&1;F[14]&=65535,_(h,F,1-re)}for(let m=0;m<16;m++)C[2*m]=h[m]&255,C[2*m+1]=h[m]>>8}function x(C,R){for(let F=0;F<16;F++)C[F]=R[2*F]+(R[2*F+1]<<8);C[15]&=32767}function A(C,R,F){for(let h=0;h<16;h++)C[h]=R[h]+F[h]}function M(C,R,F){for(let h=0;h<16;h++)C[h]=R[h]-F[h]}function W(C,R,F){let h,m,re=0,u=0,g=0,y=0,E=0,d=0,f=0,O=0,j=0,q=0,I=0,G=0,Q=0,ee=0,ne=0,ye=0,le=0,Ce=0,J=0,Y=0,H=0,p=0,U=0,he=0,pe=0,Se=0,He=0,Ve=0,Me=0,gt=0,yt=0,$e=F[0],Ie=F[1],Re=F[2],Fe=F[3],Be=F[4],xe=F[5],je=F[6],De=F[7],Pe=F[8],qe=F[9],Oe=F[10],ke=F[11],We=F[12],et=F[13],tt=F[14],Je=F[15];h=R[0],re+=h*$e,u+=h*Ie,g+=h*Re,y+=h*Fe,E+=h*Be,d+=h*xe,f+=h*je,O+=h*De,j+=h*Pe,q+=h*qe,I+=h*Oe,G+=h*ke,Q+=h*We,ee+=h*et,ne+=h*tt,ye+=h*Je,h=R[1],u+=h*$e,g+=h*Ie,y+=h*Re,E+=h*Fe,d+=h*Be,f+=h*xe,O+=h*je,j+=h*De,q+=h*Pe,I+=h*qe,G+=h*Oe,Q+=h*ke,ee+=h*We,ne+=h*et,ye+=h*tt,le+=h*Je,h=R[2],g+=h*$e,y+=h*Ie,E+=h*Re,d+=h*Fe,f+=h*Be,O+=h*xe,j+=h*je,q+=h*De,I+=h*Pe,G+=h*qe,Q+=h*Oe,ee+=h*ke,ne+=h*We,ye+=h*et,le+=h*tt,Ce+=h*Je,h=R[3],y+=h*$e,E+=h*Ie,d+=h*Re,f+=h*Fe,O+=h*Be,j+=h*xe,q+=h*je,I+=h*De,G+=h*Pe,Q+=h*qe,ee+=h*Oe,ne+=h*ke,ye+=h*We,le+=h*et,Ce+=h*tt,J+=h*Je,h=R[4],E+=h*$e,d+=h*Ie,f+=h*Re,O+=h*Fe,j+=h*Be,q+=h*xe,I+=h*je,G+=h*De,Q+=h*Pe,ee+=h*qe,ne+=h*Oe,ye+=h*ke,le+=h*We,Ce+=h*et,J+=h*tt,Y+=h*Je,h=R[5],d+=h*$e,f+=h*Ie,O+=h*Re,j+=h*Fe,q+=h*Be,I+=h*xe,G+=h*je,Q+=h*De,ee+=h*Pe,ne+=h*qe,ye+=h*Oe,le+=h*ke,Ce+=h*We,J+=h*et,Y+=h*tt,H+=h*Je,h=R[6],f+=h*$e,O+=h*Ie,j+=h*Re,q+=h*Fe,I+=h*Be,G+=h*xe,Q+=h*je,ee+=h*De,ne+=h*Pe,ye+=h*qe,le+=h*Oe,Ce+=h*ke,J+=h*We,Y+=h*et,H+=h*tt,p+=h*Je,h=R[7],O+=h*$e,j+=h*Ie,q+=h*Re,I+=h*Fe,G+=h*Be,Q+=h*xe,ee+=h*je,ne+=h*De,ye+=h*Pe,le+=h*qe,Ce+=h*Oe,J+=h*ke,Y+=h*We,H+=h*et,p+=h*tt,U+=h*Je,h=R[8],j+=h*$e,q+=h*Ie,I+=h*Re,G+=h*Fe,Q+=h*Be,ee+=h*xe,ne+=h*je,ye+=h*De,le+=h*Pe,Ce+=h*qe,J+=h*Oe,Y+=h*ke,H+=h*We,p+=h*et,U+=h*tt,he+=h*Je,h=R[9],q+=h*$e,I+=h*Ie,G+=h*Re,Q+=h*Fe,ee+=h*Be,ne+=h*xe,ye+=h*je,le+=h*De,Ce+=h*Pe,J+=h*qe,Y+=h*Oe,H+=h*ke,p+=h*We,U+=h*et,he+=h*tt,pe+=h*Je,h=R[10],I+=h*$e,G+=h*Ie,Q+=h*Re,ee+=h*Fe,ne+=h*Be,ye+=h*xe,le+=h*je,Ce+=h*De,J+=h*Pe,Y+=h*qe,H+=h*Oe,p+=h*ke,U+=h*We,he+=h*et,pe+=h*tt,Se+=h*Je,h=R[11],G+=h*$e,Q+=h*Ie,ee+=h*Re,ne+=h*Fe,ye+=h*Be,le+=h*xe,Ce+=h*je,J+=h*De,Y+=h*Pe,H+=h*qe,p+=h*Oe,U+=h*ke,he+=h*We,pe+=h*et,Se+=h*tt,He+=h*Je,h=R[12],Q+=h*$e,ee+=h*Ie,ne+=h*Re,ye+=h*Fe,le+=h*Be,Ce+=h*xe,J+=h*je,Y+=h*De,H+=h*Pe,p+=h*qe,U+=h*Oe,he+=h*ke,pe+=h*We,Se+=h*et,He+=h*tt,Ve+=h*Je,h=R[13],ee+=h*$e,ne+=h*Ie,ye+=h*Re,le+=h*Fe,Ce+=h*Be,J+=h*xe,Y+=h*je,H+=h*De,p+=h*Pe,U+=h*qe,he+=h*Oe,pe+=h*ke,Se+=h*We,He+=h*et,Ve+=h*tt,Me+=h*Je,h=R[14],ne+=h*$e,ye+=h*Ie,le+=h*Re,Ce+=h*Fe,J+=h*Be,Y+=h*xe,H+=h*je,p+=h*De,U+=h*Pe,he+=h*qe,pe+=h*Oe,Se+=h*ke,He+=h*We,Ve+=h*et,Me+=h*tt,gt+=h*Je,h=R[15],ye+=h*$e,le+=h*Ie,Ce+=h*Re,J+=h*Fe,Y+=h*Be,H+=h*xe,p+=h*je,U+=h*De,he+=h*Pe,pe+=h*qe,Se+=h*Oe,He+=h*ke,Ve+=h*We,Me+=h*et,gt+=h*tt,yt+=h*Je,re+=38*le,u+=38*Ce,g+=38*J,y+=38*Y,E+=38*H,d+=38*p,f+=38*U,O+=38*he,j+=38*pe,q+=38*Se,I+=38*He,G+=38*Ve,Q+=38*Me,ee+=38*gt,ne+=38*yt,m=1,h=re+m+65535,m=Math.floor(h/65536),re=h-m*65536,h=u+m+65535,m=Math.floor(h/65536),u=h-m*65536,h=g+m+65535,m=Math.floor(h/65536),g=h-m*65536,h=y+m+65535,m=Math.floor(h/65536),y=h-m*65536,h=E+m+65535,m=Math.floor(h/65536),E=h-m*65536,h=d+m+65535,m=Math.floor(h/65536),d=h-m*65536,h=f+m+65535,m=Math.floor(h/65536),f=h-m*65536,h=O+m+65535,m=Math.floor(h/65536),O=h-m*65536,h=j+m+65535,m=Math.floor(h/65536),j=h-m*65536,h=q+m+65535,m=Math.floor(h/65536),q=h-m*65536,h=I+m+65535,m=Math.floor(h/65536),I=h-m*65536,h=G+m+65535,m=Math.floor(h/65536),G=h-m*65536,h=Q+m+65535,m=Math.floor(h/65536),Q=h-m*65536,h=ee+m+65535,m=Math.floor(h/65536),ee=h-m*65536,h=ne+m+65535,m=Math.floor(h/65536),ne=h-m*65536,h=ye+m+65535,m=Math.floor(h/65536),ye=h-m*65536,re+=m-1+37*(m-1),m=1,h=re+m+65535,m=Math.floor(h/65536),re=h-m*65536,h=u+m+65535,m=Math.floor(h/65536),u=h-m*65536,h=g+m+65535,m=Math.floor(h/65536),g=h-m*65536,h=y+m+65535,m=Math.floor(h/65536),y=h-m*65536,h=E+m+65535,m=Math.floor(h/65536),E=h-m*65536,h=d+m+65535,m=Math.floor(h/65536),d=h-m*65536,h=f+m+65535,m=Math.floor(h/65536),f=h-m*65536,h=O+m+65535,m=Math.floor(h/65536),O=h-m*65536,h=j+m+65535,m=Math.floor(h/65536),j=h-m*65536,h=q+m+65535,m=Math.floor(h/65536),q=h-m*65536,h=I+m+65535,m=Math.floor(h/65536),I=h-m*65536,h=G+m+65535,m=Math.floor(h/65536),G=h-m*65536,h=Q+m+65535,m=Math.floor(h/65536),Q=h-m*65536,h=ee+m+65535,m=Math.floor(h/65536),ee=h-m*65536,h=ne+m+65535,m=Math.floor(h/65536),ne=h-m*65536,h=ye+m+65535,m=Math.floor(h/65536),ye=h-m*65536,re+=m-1+37*(m-1),C[0]=re,C[1]=u,C[2]=g,C[3]=y,C[4]=E,C[5]=d,C[6]=f,C[7]=O,C[8]=j,C[9]=q,C[10]=I,C[11]=G,C[12]=Q,C[13]=ee,C[14]=ne,C[15]=ye}function B(C,R){W(C,R,R)}function N(C,R){const F=s();for(let h=0;h<16;h++)F[h]=R[h];for(let h=253;h>=0;h--)B(F,F),h!==2&&h!==4&&W(F,F,R);for(let h=0;h<16;h++)C[h]=F[h]}function te(C,R){const F=new Uint8Array(32),h=new Float64Array(80),m=s(),re=s(),u=s(),g=s(),y=s(),E=s();for(let j=0;j<31;j++)F[j]=C[j];F[31]=C[31]&127|64,F[0]&=248,x(h,R);for(let j=0;j<16;j++)re[j]=h[j];m[0]=g[0]=1;for(let j=254;j>=0;--j){const q=F[j>>>3]>>>(j&7)&1;_(m,re,q),_(u,g,q),A(y,m,u),M(m,m,u),A(u,re,g),M(re,re,g),B(g,y),B(E,m),W(m,u,m),W(u,re,y),A(y,m,u),M(m,m,u),B(re,m),M(u,g,E),W(m,u,l),A(m,m,g),W(u,u,m),W(m,g,E),W(g,re,h),B(re,y),_(m,re,q),_(u,g,q)}for(let j=0;j<16;j++)h[j+16]=m[j],h[j+32]=u[j],h[j+48]=re[j],h[j+64]=g[j];const d=h.subarray(32),f=h.subarray(16);N(d,d),W(f,f,d);const O=new Uint8Array(32);return w(O,f),O}n.scalarMult=te;function X(C){return te(C,o)}n.scalarMultBase=X;function ae(C){if(C.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const R=new Uint8Array(C);return{publicKey:X(R),secretKey:R}}n.generateKeyPairFromSeed=ae;function L(C){const R=(0,e.randomBytes)(32,C),F=ae(R);return(0,r.wipe)(R),F}n.generateKeyPair=L;function z(C,R,F=!1){if(C.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(R.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const h=te(C,R);if(F){let m=0;for(let re=0;re<h.length;re++)m|=h[re];if(m===0)throw new Error("X25519: invalid shared key")}return h}n.sharedKey=z})($c);function Bc(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function af(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Bc(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function zc(n,e){e||(e=n.reduce((o,l)=>o+l.length,0));const r=af(e);let s=0;for(const o of n)r.set(o,s),s+=o.length;return Bc(r)}function fm(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<n.length;o++){var l=n.charAt(o),b=l.charCodeAt(0);if(r[b]!==255)throw new TypeError(l+" is ambiguous");r[b]=o}var _=n.length,w=n.charAt(0),x=Math.log(_)/Math.log(256),A=Math.log(256)/Math.log(_);function M(N){if(N instanceof Uint8Array||(ArrayBuffer.isView(N)?N=new Uint8Array(N.buffer,N.byteOffset,N.byteLength):Array.isArray(N)&&(N=Uint8Array.from(N))),!(N instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(N.length===0)return"";for(var te=0,X=0,ae=0,L=N.length;ae!==L&&N[ae]===0;)ae++,te++;for(var z=(L-ae)*A+1>>>0,C=new Uint8Array(z);ae!==L;){for(var R=N[ae],F=0,h=z-1;(R!==0||F<X)&&h!==-1;h--,F++)R+=256*C[h]>>>0,C[h]=R%_>>>0,R=R/_>>>0;if(R!==0)throw new Error("Non-zero carry");X=F,ae++}for(var m=z-X;m!==z&&C[m]===0;)m++;for(var re=w.repeat(te);m<z;++m)re+=n.charAt(C[m]);return re}function W(N){if(typeof N!="string")throw new TypeError("Expected String");if(N.length===0)return new Uint8Array;var te=0;if(N[te]!==" "){for(var X=0,ae=0;N[te]===w;)X++,te++;for(var L=(N.length-te)*x+1>>>0,z=new Uint8Array(L);N[te];){var C=r[N.charCodeAt(te)];if(C===255)return;for(var R=0,F=L-1;(C!==0||R<ae)&&F!==-1;F--,R++)C+=_*z[F]>>>0,z[F]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");ae=R,te++}if(N[te]!==" "){for(var h=L-ae;h!==L&&z[h]===0;)h++;for(var m=new Uint8Array(X+(L-h)),re=X;h!==L;)m[re++]=z[h++];return m}}}function B(N){var te=W(N);if(te)return te;throw new Error(`Non-${e} character`)}return{encode:M,decodeUnsafe:W,decode:B}}var dm=fm,pm=dm;const cf=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},gm=n=>new TextEncoder().encode(n),ym=n=>new TextDecoder().decode(n);class _m{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class vm{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return uf(this,e)}}class bm{constructor(e){this.decoders=e}or(e){return uf(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const uf=(n,e)=>new bm(it(it({},n.decoders||{[n.prefix]:n}),e.decoders||{[e.prefix]:e}));class mm{constructor(e,r,s,o){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new _m(e,r,s),this.decoder=new vm(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Fo=({name:n,prefix:e,encode:r,decode:s})=>new mm(n,e,r,s),ns=({prefix:n,name:e,alphabet:r})=>{const{encode:s,decode:o}=pm(r,e);return Fo({prefix:n,name:e,encode:s,decode:l=>cf(o(l))})},wm=(n,e,r,s)=>{const o={};for(let A=0;A<e.length;++A)o[e[A]]=A;let l=n.length;for(;n[l-1]==="=";)--l;const b=new Uint8Array(l*r/8|0);let _=0,w=0,x=0;for(let A=0;A<l;++A){const M=o[n[A]];if(M===void 0)throw new SyntaxError(`Non-${s} character`);w=w<<r|M,_+=r,_>=8&&(_-=8,b[x++]=255&w>>_)}if(_>=r||255&w<<8-_)throw new SyntaxError("Unexpected end of data");return b},Em=(n,e,r)=>{const s=e[e.length-1]==="=",o=(1<<r)-1;let l="",b=0,_=0;for(let w=0;w<n.length;++w)for(_=_<<8|n[w],b+=8;b>r;)b-=r,l+=e[o&_>>b];if(b&&(l+=e[o&_<<r-b]),s)for(;l.length*r&7;)l+="=";return l},Xt=({name:n,prefix:e,bitsPerChar:r,alphabet:s})=>Fo({prefix:e,name:n,encode(o){return Em(o,s,r)},decode(o){return wm(o,s,r,n)}}),Dm=Fo({prefix:"\0",name:"identity",encode:n=>ym(n),decode:n=>gm(n)});var Sm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",identity:Dm});const Im=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Om=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base2:Im});const xm=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Pm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base8:xm});const Am=ns({prefix:"9",name:"base10",alphabet:"0123456789"});var Cm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base10:Am});const Tm=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Nm=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Rm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base16:Tm,base16upper:Nm});const Fm=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),jm=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Um=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Mm=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Lm=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$m=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Bm=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zm=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hm=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var qm=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base32:Fm,base32upper:jm,base32pad:Um,base32padupper:Mm,base32hex:Lm,base32hexupper:$m,base32hexpad:Bm,base32hexpadupper:zm,base32z:Hm});const Km=ns({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Vm=ns({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var km=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base36:Km,base36upper:Vm});const Gm=ns({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Wm=ns({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ym=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base58btc:Gm,base58flickr:Wm});const Jm=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Xm=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Zm=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Qm=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ew=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base64:Jm,base64pad:Xm,base64url:Zm,base64urlpad:Qm});const hf=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),tw=hf.reduce((n,e,r)=>(n[r]=e,n),[]),rw=hf.reduce((n,e,r)=>(n[e.codePointAt(0)]=r,n),[]);function iw(n){return n.reduce((e,r)=>(e+=tw[r],e),"")}function nw(n){const e=[];for(const r of n){const s=rw[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const sw=Fo({prefix:"\u{1F680}",name:"base256emoji",encode:iw,decode:nw});var ow=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base256emoji:sw}),aw=ff,lf=128,cw=127,uw=~cw,hw=Math.pow(2,31);function ff(n,e,r){e=e||[],r=r||0;for(var s=r;n>=hw;)e[r++]=n&255|lf,n/=128;for(;n&uw;)e[r++]=n&255|lf,n>>>=7;return e[r]=n|0,ff.bytes=r-s+1,e}var lw=Hc,fw=128,df=127;function Hc(n,e){var r=0,e=e||0,s=0,o=e,l,b=n.length;do{if(o>=b)throw Hc.bytes=0,new RangeError("Could not decode varint");l=n[o++],r+=s<28?(l&df)<<s:(l&df)*Math.pow(2,s),s+=7}while(l>=fw);return Hc.bytes=o-e,r}var dw=Math.pow(2,7),pw=Math.pow(2,14),gw=Math.pow(2,21),yw=Math.pow(2,28),_w=Math.pow(2,35),vw=Math.pow(2,42),bw=Math.pow(2,49),mw=Math.pow(2,56),ww=Math.pow(2,63),Ew=function(n){return n<dw?1:n<pw?2:n<gw?3:n<yw?4:n<_w?5:n<vw?6:n<bw?7:n<mw?8:n<ww?9:10},Dw={encode:aw,decode:lw,encodingLength:Ew},pf=Dw;const gf=(n,e,r=0)=>(pf.encode(n,e,r),e),yf=n=>pf.encodingLength(n),qc=(n,e)=>{const r=e.byteLength,s=yf(n),o=s+yf(r),l=new Uint8Array(o+r);return gf(n,l,0),gf(r,l,s),l.set(e,o),new Sw(n,r,e,l)};class Sw{constructor(e,r,s,o){this.code=e,this.size=r,this.digest=s,this.bytes=o}}const _f=({name:n,code:e,encode:r})=>new Iw(n,e,r);class Iw{constructor(e,r,s){this.name=e,this.code=r,this.encode=s}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?qc(this.code,r):r.then(s=>qc(this.code,s))}else throw Error("Unknown type, must be binary type")}}const vf=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),Ow=_f({name:"sha2-256",code:18,encode:vf("SHA-256")}),xw=_f({name:"sha2-512",code:19,encode:vf("SHA-512")});var Pw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",sha256:Ow,sha512:xw});const bf=0,Aw="identity",mf=cf,Cw=n=>qc(bf,mf(n)),Tw={code:bf,name:Aw,encode:mf,digest:Cw};var Nw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",identity:Tw});new TextEncoder;new TextDecoder;const wf=it(it(it(it(it(it(it(it(it(it({},Sm),Om),Pm),Cm),Rm),qm),km),Ym),ew),ow);it(it({},Pw),Nw);function Ef(n,e,r,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:r},decoder:{decode:s}}}const Df=Ef("utf8","u",n=>{const e=new TextDecoder("utf8");return"u"+e.decode(n)},n=>new TextEncoder().encode(n.substring(1))),Kc=Ef("ascii","a",n=>{let e="a";for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return e},n=>{n=n.substring(1);const e=af(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}),Sf=it({utf8:Df,"utf-8":Df,hex:wf.base16,latin1:Kc,ascii:Kc,binary:Kc},wf);function _r(n,e="utf8"){const r=Sf[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Bc(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}function cr(n,e="utf8"){const r=Sf[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}var If=globalThis&&globalThis.__spreadArray||function(n,e,r){if(r||arguments.length===2)for(var s=0,o=e.length,l;s<o;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return n.concat(l||Array.prototype.slice.call(e))},Rw=function(){function n(e,r,s){this.name=e,this.version=r,this.os=s,this.type="browser"}return n}(),Fw=function(){function n(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return n}(),jw=function(){function n(e,r,s,o){this.name=e,this.version=r,this.os=s,this.bot=o,this.type="bot-device"}return n}(),Uw=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),Mw=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),Lw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,$w=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Of=3,Bw=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Lw]],xf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function zw(n){return n?Pf(n):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new Mw:typeof navigator!="undefined"?Pf(navigator.userAgent):Kw()}function Hw(n){return n!==""&&Bw.reduce(function(e,r){var s=r[0],o=r[1];if(e)return e;var l=o.exec(n);return!!l&&[s,l]},!1)}function Pf(n){var e=Hw(n);if(!e)return null;var r=e[0],s=e[1];if(r==="searchbot")return new Uw;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<Of&&(o=If(If([],o,!0),Vw(Of-o.length),!0)):o=[];var l=o.join("."),b=qw(n),_=$w.exec(n);return _&&_[1]?new jw(r,l,b,_[1]):new Rw(r,l,b)}function qw(n){for(var e=0,r=xf.length;e<r;e++){var s=xf[e],o=s[0],l=s[1],b=l.exec(n);if(b)return o}return null}function Kw(){var n=typeof process!="undefined"&&process.version;return n?new Fw(process.version.slice(1)):null}function Vw(n){for(var e=[],r=0;r<n;r++)e.push("0");return e}var be={},ss={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var e,r,s,o,l,b,_,w,x,A,M,W,B,N,te,X,ae,L,z,C,R,F,h;(function(m){var re=typeof mt=="object"?mt:typeof self=="object"?self:typeof this=="object"?this:{};m(u(re,u(n.exports)));function u(g,y){return g!==re&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(E,d){return g[E]=y?y(E,d):d}}})(function(m){var re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,g){u.__proto__=g}||function(u,g){for(var y in g)g.hasOwnProperty(y)&&(u[y]=g[y])};e=function(u,g){re(u,g);function y(){this.constructor=u}u.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)},r=Object.assign||function(u){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(u[d]=g[d])}return u},s=function(u,g){var y={};for(var E in u)Object.prototype.hasOwnProperty.call(u,E)&&g.indexOf(E)<0&&(y[E]=u[E]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,E=Object.getOwnPropertySymbols(u);d<E.length;d++)g.indexOf(E[d])<0&&Object.prototype.propertyIsEnumerable.call(u,E[d])&&(y[E[d]]=u[E[d]]);return y},o=function(u,g,y,E){var d=arguments.length,f=d<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,y):E,O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,g,y,E);else for(var j=u.length-1;j>=0;j--)(O=u[j])&&(f=(d<3?O(f):d>3?O(g,y,f):O(g,y))||f);return d>3&&f&&Object.defineProperty(g,y,f),f},l=function(u,g){return function(y,E){g(y,E,u)}},b=function(u,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(u,g)},_=function(u,g,y,E){function d(f){return f instanceof y?f:new y(function(O){O(f)})}return new(y||(y=Promise))(function(f,O){function j(G){try{I(E.next(G))}catch(Q){O(Q)}}function q(G){try{I(E.throw(G))}catch(Q){O(Q)}}function I(G){G.done?f(G.value):d(G.value).then(j,q)}I((E=E.apply(u,g||[])).next())})},w=function(u,g){var y={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},E,d,f,O;return O={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function j(I){return function(G){return q([I,G])}}function q(I){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,d&&(f=I[0]&2?d.return:I[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,I[1])).done)return f;switch(d=0,f&&(I=[I[0]&2,f.value]),I[0]){case 0:case 1:f=I;break;case 4:return y.label++,{value:I[1],done:!1};case 5:y.label++,d=I[1],I=[0];continue;case 7:I=y.ops.pop(),y.trys.pop();continue;default:if(f=y.trys,!(f=f.length>0&&f[f.length-1])&&(I[0]===6||I[0]===2)){y=0;continue}if(I[0]===3&&(!f||I[1]>f[0]&&I[1]<f[3])){y.label=I[1];break}if(I[0]===6&&y.label<f[1]){y.label=f[1],f=I;break}if(f&&y.label<f[2]){y.label=f[2],y.ops.push(I);break}f[2]&&y.ops.pop(),y.trys.pop();continue}I=g.call(u,y)}catch(G){I=[6,G],d=0}finally{E=f=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},h=function(u,g,y,E){E===void 0&&(E=y),u[E]=g[y]},x=function(u,g){for(var y in u)y!=="default"&&!g.hasOwnProperty(y)&&(g[y]=u[y])},A=function(u){var g=typeof Symbol=="function"&&Symbol.iterator,y=g&&u[g],E=0;if(y)return y.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&E>=u.length&&(u=void 0),{value:u&&u[E++],done:!u}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},M=function(u,g){var y=typeof Symbol=="function"&&u[Symbol.iterator];if(!y)return u;var E=y.call(u),d,f=[],O;try{for(;(g===void 0||g-- >0)&&!(d=E.next()).done;)f.push(d.value)}catch(j){O={error:j}}finally{try{d&&!d.done&&(y=E.return)&&y.call(E)}finally{if(O)throw O.error}}return f},W=function(){for(var u=[],g=0;g<arguments.length;g++)u=u.concat(M(arguments[g]));return u},B=function(){for(var u=0,g=0,y=arguments.length;g<y;g++)u+=arguments[g].length;for(var E=Array(u),d=0,g=0;g<y;g++)for(var f=arguments[g],O=0,j=f.length;O<j;O++,d++)E[d]=f[O];return E},N=function(u){return this instanceof N?(this.v=u,this):new N(u)},te=function(u,g,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=y.apply(u,g||[]),d,f=[];return d={},O("next"),O("throw"),O("return"),d[Symbol.asyncIterator]=function(){return this},d;function O(ee){E[ee]&&(d[ee]=function(ne){return new Promise(function(ye,le){f.push([ee,ne,ye,le])>1||j(ee,ne)})})}function j(ee,ne){try{q(E[ee](ne))}catch(ye){Q(f[0][3],ye)}}function q(ee){ee.value instanceof N?Promise.resolve(ee.value.v).then(I,G):Q(f[0][2],ee)}function I(ee){j("next",ee)}function G(ee){j("throw",ee)}function Q(ee,ne){ee(ne),f.shift(),f.length&&j(f[0][0],f[0][1])}},X=function(u){var g,y;return g={},E("next"),E("throw",function(d){throw d}),E("return"),g[Symbol.iterator]=function(){return this},g;function E(d,f){g[d]=u[d]?function(O){return(y=!y)?{value:N(u[d](O)),done:d==="return"}:f?f(O):O}:f}},ae=function(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=u[Symbol.asyncIterator],y;return g?g.call(u):(u=typeof A=="function"?A(u):u[Symbol.iterator](),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(f){y[f]=u[f]&&function(O){return new Promise(function(j,q){O=u[f](O),d(j,q,O.done,O.value)})}}function d(f,O,j,q){Promise.resolve(q).then(function(I){f({value:I,done:j})},O)}},L=function(u,g){return Object.defineProperty?Object.defineProperty(u,"raw",{value:g}):u.raw=g,u},z=function(u){if(u&&u.__esModule)return u;var g={};if(u!=null)for(var y in u)Object.hasOwnProperty.call(u,y)&&(g[y]=u[y]);return g.default=u,g},C=function(u){return u&&u.__esModule?u:{default:u}},R=function(u,g){if(!g.has(u))throw new TypeError("attempted to get private field on non-instance");return g.get(u)},F=function(u,g,y){if(!g.has(u))throw new TypeError("attempted to set private field on non-instance");return g.set(u,y),y},m("__extends",e),m("__assign",r),m("__rest",s),m("__decorate",o),m("__param",l),m("__metadata",b),m("__awaiter",_),m("__generator",w),m("__exportStar",x),m("__createBinding",h),m("__values",A),m("__read",M),m("__spread",W),m("__spreadArrays",B),m("__await",N),m("__asyncGenerator",te),m("__asyncDelegator",X),m("__asyncValues",ae),m("__makeTemplateObject",L),m("__importStar",z),m("__importDefault",C),m("__classPrivateFieldGet",R),m("__classPrivateFieldSet",F)})})(ss);var Af={},jo={};Object.defineProperty(jo,"__esModule",{value:!0});jo.delay=void 0;function kw(n){return new Promise(e=>{setTimeout(()=>{e(!0)},n)})}jo.delay=kw;var In={},Vc={},On={};Object.defineProperty(On,"__esModule",{value:!0});On.ONE_THOUSAND=On.ONE_HUNDRED=void 0;On.ONE_HUNDRED=100;On.ONE_THOUSAND=1e3;var Cf={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365})(Cf);(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=ss.exports;e.__exportStar(On,n),e.__exportStar(Cf,n)})(Vc);Object.defineProperty(In,"__esModule",{value:!0});In.fromMiliseconds=In.toMiliseconds=void 0;const Tf=Vc;function Gw(n){return n*Tf.ONE_THOUSAND}In.toMiliseconds=Gw;function Ww(n){return Math.floor(n/Tf.ONE_THOUSAND)}In.fromMiliseconds=Ww;(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=ss.exports;e.__exportStar(jo,n),e.__exportStar(In,n)})(Af);var os={};Object.defineProperty(os,"__esModule",{value:!0});os.Watch=void 0;class Nf{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const r=this.get(e);if(typeof r.elapsed!="undefined")throw new Error(`Watch already stopped for label: ${e}`);const s=Date.now()-r.started;this.timestamps.set(e,{started:r.started,elapsed:s})}get(e){const r=this.timestamps.get(e);if(typeof r=="undefined")throw new Error(`No timestamp found for label: ${e}`);return r}elapsed(e){const r=this.get(e);return r.elapsed||Date.now()-r.started}}os.Watch=Nf;os.default=Nf;var Rf={},Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.IWatch=void 0;class Yw{}Uo.IWatch=Yw;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),ss.exports.__exportStar(Uo,n)})(Rf);(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=ss.exports;e.__exportStar(Af,n),e.__exportStar(os,n),e.__exportStar(Rf,n),e.__exportStar(Vc,n)})(be);var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=jf=ft.getLocation=ft.getLocationOrThrow=kc=ft.getNavigator=ft.getNavigatorOrThrow=Ff=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function Xi(n){let e;return typeof window!="undefined"&&typeof window[n]!="undefined"&&(e=window[n]),e}ft.getFromWindow=Xi;function xn(n){const e=Xi(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}ft.getFromWindowOrThrow=xn;function Jw(){return xn("document")}ft.getDocumentOrThrow=Jw;function Xw(){return Xi("document")}var Ff=ft.getDocument=Xw;function Zw(){return xn("navigator")}ft.getNavigatorOrThrow=Zw;function Qw(){return Xi("navigator")}var kc=ft.getNavigator=Qw;function eE(){return xn("location")}ft.getLocationOrThrow=eE;function tE(){return Xi("location")}var jf=ft.getLocation=tE;function rE(){return xn("crypto")}ft.getCryptoOrThrow=rE;function iE(){return Xi("crypto")}ft.getCrypto=iE;function nE(){return xn("localStorage")}ft.getLocalStorageOrThrow=nE;function sE(){return Xi("localStorage")}ft.getLocalStorage=sE;var Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});var Uf=Gc.getWindowMetadata=void 0;const Mf=ft;function oE(){let n,e;try{n=Mf.getDocumentOrThrow(),e=Mf.getLocationOrThrow()}catch{return null}function r(){const M=n.getElementsByTagName("link"),W=[];for(let B=0;B<M.length;B++){const N=M[B],te=N.getAttribute("rel");if(te&&te.toLowerCase().indexOf("icon")>-1){const X=N.getAttribute("href");if(X)if(X.toLowerCase().indexOf("https:")===-1&&X.toLowerCase().indexOf("http:")===-1&&X.indexOf("//")!==0){let ae=e.protocol+"//"+e.host;if(X.indexOf("/")===0)ae+=X;else{const L=e.pathname.split("/");L.pop(),ae+=L.join("/")+"/"+X}W.push(ae)}else if(X.indexOf("//")===0){const ae=e.protocol+X;W.push(ae)}else W.push(X)}}return W}function s(...M){const W=n.getElementsByTagName("meta");for(let B=0;B<W.length;B++){const N=W[B],te=["itemprop","property","name"].map(X=>N.getAttribute(X)).filter(X=>X?M.includes(X):!1);if(te.length&&te){const X=N.getAttribute("content");if(X)return X}}return""}function o(){let M=s("name","og:site_name","og:title","twitter:title");return M||(M=n.title),M}function l(){return s("description","og:description","twitter:description","keywords")}const b=o(),_=l(),w=e.origin,x=r();return{description:_,url:w,icons:x,name:b}}Uf=Gc.getWindowMetadata=oE;var as={},aE=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Lf="%[a-f0-9]{2}",$f=new RegExp("("+Lf+")|([^%]+?)","gi"),Bf=new RegExp("("+Lf+")+","gi");function Wc(n,e){try{return[decodeURIComponent(n.join(""))]}catch{}if(n.length===1)return n;e=e||1;var r=n.slice(0,e),s=n.slice(e);return Array.prototype.concat.call([],Wc(r),Wc(s))}function cE(n){try{return decodeURIComponent(n)}catch{for(var e=n.match($f)||[],r=1;r<e.length;r++)n=Wc(e,r).join(""),e=n.match($f)||[];return n}}function uE(n){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=Bf.exec(n);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var s=cE(r[0]);s!==r[0]&&(e[r[0]]=s)}r=Bf.exec(n)}e["%C2"]="\uFFFD";for(var o=Object.keys(e),l=0;l<o.length;l++){var b=o[l];n=n.replace(new RegExp(b,"g"),e[b])}return n}var hE=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return uE(n)}},lE=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const r=n.indexOf(e);return r===-1?[n]:[n.slice(0,r),n.slice(r+e.length)]},fE=function(n,e){for(var r={},s=Object.keys(n),o=Array.isArray(e),l=0;l<s.length;l++){var b=s[l],_=n[b];(o?e.indexOf(b)!==-1:e(b,_,n))&&(r[b]=_)}return r};(function(n){const e=aE,r=hE,s=lE,o=fE,l=L=>L==null,b=Symbol("encodeFragmentIdentifier");function _(L){switch(L.arrayFormat){case"index":return z=>(C,R)=>{const F=C.length;return R===void 0||L.skipNull&&R===null||L.skipEmptyString&&R===""?C:R===null?[...C,[A(z,L),"[",F,"]"].join("")]:[...C,[A(z,L),"[",A(F,L),"]=",A(R,L)].join("")]};case"bracket":return z=>(C,R)=>R===void 0||L.skipNull&&R===null||L.skipEmptyString&&R===""?C:R===null?[...C,[A(z,L),"[]"].join("")]:[...C,[A(z,L),"[]=",A(R,L)].join("")];case"colon-list-separator":return z=>(C,R)=>R===void 0||L.skipNull&&R===null||L.skipEmptyString&&R===""?C:R===null?[...C,[A(z,L),":list="].join("")]:[...C,[A(z,L),":list=",A(R,L)].join("")];case"comma":case"separator":case"bracket-separator":{const z=L.arrayFormat==="bracket-separator"?"[]=":"=";return C=>(R,F)=>F===void 0||L.skipNull&&F===null||L.skipEmptyString&&F===""?R:(F=F===null?"":F,R.length===0?[[A(C,L),z,A(F,L)].join("")]:[[R,A(F,L)].join(L.arrayFormatSeparator)])}default:return z=>(C,R)=>R===void 0||L.skipNull&&R===null||L.skipEmptyString&&R===""?C:R===null?[...C,A(z,L)]:[...C,[A(z,L),"=",A(R,L)].join("")]}}function w(L){let z;switch(L.arrayFormat){case"index":return(C,R,F)=>{if(z=/\[(\d*)\]$/.exec(C),C=C.replace(/\[\d*\]$/,""),!z){F[C]=R;return}F[C]===void 0&&(F[C]={}),F[C][z[1]]=R};case"bracket":return(C,R,F)=>{if(z=/(\[\])$/.exec(C),C=C.replace(/\[\]$/,""),!z){F[C]=R;return}if(F[C]===void 0){F[C]=[R];return}F[C]=[].concat(F[C],R)};case"colon-list-separator":return(C,R,F)=>{if(z=/(:list)$/.exec(C),C=C.replace(/:list$/,""),!z){F[C]=R;return}if(F[C]===void 0){F[C]=[R];return}F[C]=[].concat(F[C],R)};case"comma":case"separator":return(C,R,F)=>{const h=typeof R=="string"&&R.includes(L.arrayFormatSeparator),m=typeof R=="string"&&!h&&M(R,L).includes(L.arrayFormatSeparator);R=m?M(R,L):R;const re=h||m?R.split(L.arrayFormatSeparator).map(u=>M(u,L)):R===null?R:M(R,L);F[C]=re};case"bracket-separator":return(C,R,F)=>{const h=/(\[\])$/.test(C);if(C=C.replace(/\[\]$/,""),!h){F[C]=R&&M(R,L);return}const m=R===null?[]:R.split(L.arrayFormatSeparator).map(re=>M(re,L));if(F[C]===void 0){F[C]=m;return}F[C]=[].concat(F[C],m)};default:return(C,R,F)=>{if(F[C]===void 0){F[C]=R;return}F[C]=[].concat(F[C],R)}}}function x(L){if(typeof L!="string"||L.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function A(L,z){return z.encode?z.strict?e(L):encodeURIComponent(L):L}function M(L,z){return z.decode?r(L):L}function W(L){return Array.isArray(L)?L.sort():typeof L=="object"?W(Object.keys(L)).sort((z,C)=>Number(z)-Number(C)).map(z=>L[z]):L}function B(L){const z=L.indexOf("#");return z!==-1&&(L=L.slice(0,z)),L}function N(L){let z="";const C=L.indexOf("#");return C!==-1&&(z=L.slice(C)),z}function te(L){L=B(L);const z=L.indexOf("?");return z===-1?"":L.slice(z+1)}function X(L,z){return z.parseNumbers&&!Number.isNaN(Number(L))&&typeof L=="string"&&L.trim()!==""?L=Number(L):z.parseBooleans&&L!==null&&(L.toLowerCase()==="true"||L.toLowerCase()==="false")&&(L=L.toLowerCase()==="true"),L}function ae(L,z){z=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},z),x(z.arrayFormatSeparator);const C=w(z),R=Object.create(null);if(typeof L!="string"||(L=L.trim().replace(/^[?#&]/,""),!L))return R;for(const F of L.split("&")){if(F==="")continue;let[h,m]=s(z.decode?F.replace(/\+/g," "):F,"=");m=m===void 0?null:["comma","separator","bracket-separator"].includes(z.arrayFormat)?m:M(m,z),C(M(h,z),m,R)}for(const F of Object.keys(R)){const h=R[F];if(typeof h=="object"&&h!==null)for(const m of Object.keys(h))h[m]=X(h[m],z);else R[F]=X(h,z)}return z.sort===!1?R:(z.sort===!0?Object.keys(R).sort():Object.keys(R).sort(z.sort)).reduce((F,h)=>{const m=R[h];return Boolean(m)&&typeof m=="object"&&!Array.isArray(m)?F[h]=W(m):F[h]=m,F},Object.create(null))}n.extract=te,n.parse=ae,n.stringify=(L,z)=>{if(!L)return"";z=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},z),x(z.arrayFormatSeparator);const C=m=>z.skipNull&&l(L[m])||z.skipEmptyString&&L[m]==="",R=_(z),F={};for(const m of Object.keys(L))C(m)||(F[m]=L[m]);const h=Object.keys(F);return z.sort!==!1&&h.sort(z.sort),h.map(m=>{const re=L[m];return re===void 0?"":re===null?A(m,z):Array.isArray(re)?re.length===0&&z.arrayFormat==="bracket-separator"?A(m,z)+"[]":re.reduce(R(m),[]).join("&"):A(m,z)+"="+A(re,z)}).filter(m=>m.length>0).join("&")},n.parseUrl=(L,z)=>{z=Object.assign({decode:!0},z);const[C,R]=s(L,"#");return Object.assign({url:C.split("?")[0]||"",query:ae(te(L),z)},z&&z.parseFragmentIdentifier&&R?{fragmentIdentifier:M(R,z)}:{})},n.stringifyUrl=(L,z)=>{z=Object.assign({encode:!0,strict:!0,[b]:!0},z);const C=B(L.url).split("?")[0]||"",R=n.extract(L.url),F=n.parse(R,{sort:!1}),h=Object.assign(F,L.query);let m=n.stringify(h,z);m&&(m=`?${m}`);let re=N(L.url);return L.fragmentIdentifier&&(re=`#${z[b]?A(L.fragmentIdentifier,z):L.fragmentIdentifier}`),`${C}${m}${re}`},n.pick=(L,z,C)=>{C=Object.assign({parseFragmentIdentifier:!0,[b]:!1},C);const{url:R,query:F,fragmentIdentifier:h}=n.parseUrl(L,C);return n.stringifyUrl({url:R,query:o(F,z),fragmentIdentifier:h},C)},n.exclude=(L,z,C)=>{const R=Array.isArray(z)?F=>!z.includes(F):(F,h)=>!z(F,h);return n.pick(L,R,C)}})(as);const dE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function pE(n,e=[]){const r=[];return Object.keys(n).forEach(s=>{if(e.length&&!e.includes(s))return;const o=n[s];r.push(...o.accounts)}),r}function zf(n,e){return n.includes(":")?[n]:e.chains||[]}const Hf="base10",ur="base16",Yc="base64pad",Jc="utf8",qf=0,Zi=1,gE=0,Kf=1,Xc=12,Zc=32;function yE(){const n=$c.generateKeyPair();return{privateKey:cr(n.secretKey,ur),publicKey:cr(n.publicKey,ur)}}function Qc(){const n=Sn.randomBytes(Zc);return cr(n,ur)}function _E(n,e){const r=$c.sharedKey(_r(n,ur),_r(e,ur)),s=new sm(Ro.SHA256,r).expand(Zc);return cr(s,ur)}function vE(n){const e=Ro.hash(_r(n,ur));return cr(e,ur)}function Pn(n){const e=Ro.hash(_r(n,Jc));return cr(e,ur)}function bE(n){return _r(`${n}`,Hf)}function cs(n){return Number(cr(n,Hf))}function mE(n){const e=bE(typeof n.type<"u"?n.type:qf);if(cs(e)===Zi&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof n.senderPublicKey<"u"?_r(n.senderPublicKey,ur):void 0,s=typeof n.iv<"u"?_r(n.iv,ur):Sn.randomBytes(Xc),o=new Nc.ChaCha20Poly1305(_r(n.symKey,ur)).seal(s,_r(n.message,Jc));return EE({type:e,sealed:o,iv:s,senderPublicKey:r})}function wE(n){const e=new Nc.ChaCha20Poly1305(_r(n.symKey,ur)),{sealed:r,iv:s}=Mo(n.encoded),o=e.open(s,r);if(o===null)throw new Error("Failed to decrypt");return cr(o,Jc)}function EE(n){if(cs(n.type)===Zi){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return cr(zc([n.type,n.senderPublicKey,n.iv,n.sealed]),Yc)}return cr(zc([n.type,n.iv,n.sealed]),Yc)}function Mo(n){const e=_r(n,Yc),r=e.slice(gE,Kf),s=Kf;if(cs(r)===Zi){const _=s+Zc,w=_+Xc,x=e.slice(s,_),A=e.slice(_,w),M=e.slice(w);return{type:r,sealed:M,iv:A,senderPublicKey:x}}const o=s+Xc,l=e.slice(s,o),b=e.slice(o);return{type:r,sealed:b,iv:l}}function DE(n,e){const r=Mo(n);return Vf({type:cs(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?cr(r.senderPublicKey,ur):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Vf(n){const e=(n==null?void 0:n.type)||qf;if(e===Zi){if(typeof(n==null?void 0:n.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(n==null?void 0:n.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n==null?void 0:n.senderPublicKey,receiverPublicKey:n==null?void 0:n.receiverPublicKey}}function kf(n){return n.type===Zi&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var SE=Object.defineProperty,Gf=Object.getOwnPropertySymbols,IE=Object.prototype.hasOwnProperty,OE=Object.prototype.propertyIsEnumerable,Wf=(n,e,r)=>e in n?SE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Yf=(n,e)=>{for(var r in e||(e={}))IE.call(e,r)&&Wf(n,r,e[r]);if(Gf)for(var r of Gf(e))OE.call(e,r)&&Wf(n,r,e[r]);return n};const xE="ReactNative",Ci={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},PE="js";function eu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Jf(){return!Ff()&&!!kc()&&navigator.product===xE}function tu(){return!eu()&&!!kc()}function ru(){return Jf()?Ci.reactNative:eu()?Ci.node:tu()?Ci.browser:Ci.unknown}function AE(n,e){let r=as.parse(n);return r=Yf(Yf({},r),e),n=as.stringify(r),n}function CE(){return Uf()||{name:"",description:"",url:"",icons:[""]}}function TE(){if(ru()===Ci.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:s}=global.Platform;return[r,s].join("-")}const n=zw();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function NE(){var n;const e=ru();return e===Ci.browser?[e,((n=jf())==null?void 0:n.host)||"unknown"].join(":"):e}function RE(n,e,r){const s=TE(),o=NE();return[[n,e].join("-"),[PE,r].join("-"),s,o].join("/")}function FE({protocol:n,version:e,relayUrl:r,sdkVersion:s,auth:o,projectId:l,useOnCloseEvent:b}){const _=r.split("?"),w=RE(n,e,s),x={auth:o,ua:w,projectId:l,useOnCloseEvent:b||void 0},A=AE(_[1]||"",x);return _[0]+"?"+A}function Qi(n,e){return n.filter(r=>e.includes(r)).length===n.length}function Xf(n){return Object.fromEntries(n.entries())}function Zf(n){return new Map(Object.entries(n))}function An(n=be.FIVE_MINUTES,e){const r=be.toMiliseconds(n||be.FIVE_MINUTES);let s,o,l;return{resolve:b=>{l&&s&&(clearTimeout(l),s(b))},reject:b=>{l&&o&&(clearTimeout(l),o(b))},done:()=>new Promise((b,_)=>{l=setTimeout(()=>{_(new Error(e))},r),s=b,o=_})}}function Lo(n,e,r){return new Promise(async(s,o)=>{const l=setTimeout(()=>o(new Error(r)),e);try{const b=await n;s(b)}catch(b){o(b)}clearTimeout(l)})}function Qf(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function jE(n){return Qf("topic",n)}function UE(n){return Qf("id",n)}function ed(n){const[e,r]=n.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")s.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return s}function kr(n,e){return be.fromMiliseconds((e||Date.now())+be.toMiliseconds(n))}function Ti(n){return Date.now()>=be.toMiliseconds(n)}function Kt(n,e){return`${n}${e?`:${e}`:""}`}function iu(n=[],e=[]){return[...new Set([...n,...e])]}async function ME({id:n,topic:e,wcDeepLink:r}){try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const l=`${o}/wc?requestId=${n}&sessionTopic=${e}`,b=ru();b===Ci.browser?l.startsWith("https://")?window.open(l,"_blank","noreferrer noopener"):window.open(l,"_self","noreferrer noopener"):b===Ci.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(l)}catch(s){console.error(s)}}const LE="irn";function nu(n){return(n==null?void 0:n.relay)||{protocol:LE}}function $o(n){const e=dE[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var $E=Object.defineProperty,td=Object.getOwnPropertySymbols,BE=Object.prototype.hasOwnProperty,zE=Object.prototype.propertyIsEnumerable,rd=(n,e,r)=>e in n?$E(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,HE=(n,e)=>{for(var r in e||(e={}))BE.call(e,r)&&rd(n,r,e[r]);if(td)for(var r of td(e))zE.call(e,r)&&rd(n,r,e[r]);return n};function qE(n,e="-"){const r={},s="relay"+e;return Object.keys(n).forEach(o=>{if(o.startsWith(s)){const l=o.replace(s,""),b=n[o];r[l]=b}}),r}function KE(n){const e=n.indexOf(":"),r=n.indexOf("?")!==-1?n.indexOf("?"):void 0,s=n.substring(0,e),o=n.substring(e+1,r).split("@"),l=typeof r<"u"?n.substring(r):"",b=as.parse(l);return{protocol:s,topic:VE(o[0]),version:parseInt(o[1],10),symKey:b.symKey,relay:qE(b)}}function VE(n){return n.startsWith("//")?n.substring(2):n}function kE(n,e="-"){const r="relay",s={};return Object.keys(n).forEach(o=>{const l=r+e+o;n[o]&&(s[l]=n[o])}),s}function GE(n){return`${n.protocol}:${n.topic}@${n.version}?`+as.stringify(HE({symKey:n.symKey},kE(n.relay)))}function Cn(n){const e=[];return n.forEach(r=>{const[s,o]=r.split(":");e.push(`${s}:${o}`)}),e}function WE(n){const e=[];return Object.values(n).forEach(r=>{e.push(...Cn(r.accounts))}),e}function YE(n,e){const r=[];return Object.values(n).forEach(s=>{Cn(s.accounts).includes(e)&&r.push(...s.methods)}),r}function JE(n,e){const r=[];return Object.values(n).forEach(s=>{Cn(s.accounts).includes(e)&&r.push(...s.events)}),r}function XE(n,e){const r=Ho(n,e);if(r)throw new Error(r.message);const s={};for(const[o,l]of Object.entries(n))s[o]={methods:l.methods,events:l.events,chains:l.accounts.map(b=>`${b.split(":")[0]}:${b.split(":")[1]}`)};return s}function su(n){return n.includes(":")}function Bo(n){return su(n)?n.split(":")[0]:n}const ZE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},QE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function de(n,e){const{message:r,code:s}=QE[n];return{message:e?`${r} ${e}`:r,code:s}}function jt(n,e){const{message:r,code:s}=ZE[n];return{message:e?`${r} ${e}`:r,code:s}}function ti(n,e){return Array.isArray(n)?typeof e<"u"&&n.length?n.every(e):!0:!1}function Tn(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function hr(n){return typeof n>"u"}function Yt(n,e){return e&&hr(n)?!0:typeof n=="string"&&!!n.trim().length}function ou(n,e){return e&&hr(n)?!0:typeof n=="number"&&!isNaN(n)}function e3(n,e){const{requiredNamespaces:r}=e,s=Object.keys(n.namespaces),o=Object.keys(r);let l=!0;return Qi(o,s)?(s.forEach(b=>{const{accounts:_,methods:w,events:x}=n.namespaces[b],A=Cn(_),M=r[b];(!Qi(zf(b,M),A)||!Qi(M.methods,w)||!Qi(M.events,x))&&(l=!1)}),l):!1}function zo(n){return Yt(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function t3(n){if(Yt(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&zo(r)}}return!1}function r3(n){if(Yt(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function i3(n){var e;return(e=n==null?void 0:n.proposer)==null?void 0:e.publicKey}function n3(n){return n==null?void 0:n.topic}function s3(n,e){let r=null;return Yt(n==null?void 0:n.publicKey,!1)||(r=de("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function id(n){let e=!0;return ti(n)?n.length&&(e=n.every(r=>Yt(r,!1))):e=!1,e}function o3(n,e,r){let s=null;return ti(e)&&e.length?e.forEach(o=>{s||zo(o)||(s=jt("UNSUPPORTED_CHAINS",`${r}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):zo(n)||(s=jt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function a3(n,e,r){let s=null;return Object.entries(n).forEach(([o,l])=>{if(s)return;const b=o3(o,zf(o,l),`${e} ${r}`);b&&(s=b)}),s}function c3(n,e){let r=null;return ti(n)?n.forEach(s=>{r||t3(s)||(r=jt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=jt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function u3(n,e){let r=null;return Object.values(n).forEach(s=>{if(r)return;const o=c3(s==null?void 0:s.accounts,`${e} namespace`);o&&(r=o)}),r}function h3(n,e){let r=null;return id(n==null?void 0:n.methods)?id(n==null?void 0:n.events)||(r=jt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=jt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function nd(n,e){let r=null;return Object.values(n).forEach(s=>{if(r)return;const o=h3(s,`${e}, namespace`);o&&(r=o)}),r}function l3(n,e,r){let s=null;if(n&&Tn(n)){const o=nd(n,e);o&&(s=o);const l=a3(n,e,r);l&&(s=l)}else s=de("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return s}function Ho(n,e){let r=null;if(n&&Tn(n)){const s=nd(n,e);s&&(r=s);const o=u3(n,e);o&&(r=o)}else r=de("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function sd(n){return Yt(n.protocol,!0)}function f3(n,e){let r=!1;return e&&!n?r=!0:n&&ti(n)&&n.length&&n.forEach(s=>{r=sd(s)}),r}function d3(n){return typeof n=="number"}function vr(n){return typeof n<"u"&&typeof n!==null}function p3(n){return!(!n||typeof n!="object"||!n.code||!ou(n.code,!1)||!n.message||!Yt(n.message,!1))}function g3(n){return!(hr(n)||!Yt(n.method,!1))}function y3(n){return!(hr(n)||hr(n.result)&&hr(n.error)||!ou(n.id,!1)||!Yt(n.jsonrpc,!1))}function _3(n){return!(hr(n)||!Yt(n.name,!1))}function od(n,e){return!(!zo(e)||!WE(n).includes(e))}function v3(n,e,r){return Yt(r,!1)?YE(n,e).includes(r):!1}function b3(n,e,r){return Yt(r,!1)?JE(n,e).includes(r):!1}function ad(n,e,r){let s=null;const o=m3(n),l=w3(e),b=Object.keys(o),_=Object.keys(l),w=cd(Object.keys(n)),x=cd(Object.keys(e)),A=w.filter(M=>!x.includes(M));return A.length&&(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${A.toString()}
      Received: ${Object.keys(e).toString()}`)),Qi(b,_)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${b.toString()}
      Approved: ${_.toString()}`)),Object.keys(e).forEach(M=>{if(!M.includes(":")||s)return;const W=Cn(e[M].accounts);W.includes(M)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${M}
        Required: ${M}
        Approved: ${W.toString()}`))}),b.forEach(M=>{s||(Qi(o[M].methods,l[M].methods)?Qi(o[M].events,l[M].events)||(s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${M}`)):s=de("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${M}`))}),s}function m3(n){const e={};return Object.keys(n).forEach(r=>{var s;r.includes(":")?e[r]=n[r]:(s=n[r].chains)==null||s.forEach(o=>{e[o]={methods:n[r].methods,events:n[r].events}})}),e}function cd(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function w3(n){const e={};return Object.keys(n).forEach(r=>{if(r.includes(":"))e[r]=n[r];else{const s=Cn(n[r].accounts);s==null||s.forEach(o=>{e[o]={accounts:n[r].accounts.filter(l=>l.includes(`${o}:`)),methods:n[r].methods,events:n[r].events}})}}),e}function E3(n,e){return ou(n,!1)&&n<=e.max&&n>=e.min}var qo={},au={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var e,r,s,o,l,b,_,w,x,A,M,W,B,N,te,X,ae,L,z,C,R,F,h;(function(m){var re=typeof mt=="object"?mt:typeof self=="object"?self:typeof this=="object"?this:{};m(u(re,u(n.exports)));function u(g,y){return g!==re&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(E,d){return g[E]=y?y(E,d):d}}})(function(m){var re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,g){u.__proto__=g}||function(u,g){for(var y in g)g.hasOwnProperty(y)&&(u[y]=g[y])};e=function(u,g){re(u,g);function y(){this.constructor=u}u.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)},r=Object.assign||function(u){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(u[d]=g[d])}return u},s=function(u,g){var y={};for(var E in u)Object.prototype.hasOwnProperty.call(u,E)&&g.indexOf(E)<0&&(y[E]=u[E]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,E=Object.getOwnPropertySymbols(u);d<E.length;d++)g.indexOf(E[d])<0&&Object.prototype.propertyIsEnumerable.call(u,E[d])&&(y[E[d]]=u[E[d]]);return y},o=function(u,g,y,E){var d=arguments.length,f=d<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,y):E,O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,g,y,E);else for(var j=u.length-1;j>=0;j--)(O=u[j])&&(f=(d<3?O(f):d>3?O(g,y,f):O(g,y))||f);return d>3&&f&&Object.defineProperty(g,y,f),f},l=function(u,g){return function(y,E){g(y,E,u)}},b=function(u,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(u,g)},_=function(u,g,y,E){function d(f){return f instanceof y?f:new y(function(O){O(f)})}return new(y||(y=Promise))(function(f,O){function j(G){try{I(E.next(G))}catch(Q){O(Q)}}function q(G){try{I(E.throw(G))}catch(Q){O(Q)}}function I(G){G.done?f(G.value):d(G.value).then(j,q)}I((E=E.apply(u,g||[])).next())})},w=function(u,g){var y={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},E,d,f,O;return O={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function j(I){return function(G){return q([I,G])}}function q(I){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,d&&(f=I[0]&2?d.return:I[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,I[1])).done)return f;switch(d=0,f&&(I=[I[0]&2,f.value]),I[0]){case 0:case 1:f=I;break;case 4:return y.label++,{value:I[1],done:!1};case 5:y.label++,d=I[1],I=[0];continue;case 7:I=y.ops.pop(),y.trys.pop();continue;default:if(f=y.trys,!(f=f.length>0&&f[f.length-1])&&(I[0]===6||I[0]===2)){y=0;continue}if(I[0]===3&&(!f||I[1]>f[0]&&I[1]<f[3])){y.label=I[1];break}if(I[0]===6&&y.label<f[1]){y.label=f[1],f=I;break}if(f&&y.label<f[2]){y.label=f[2],y.ops.push(I);break}f[2]&&y.ops.pop(),y.trys.pop();continue}I=g.call(u,y)}catch(G){I=[6,G],d=0}finally{E=f=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},h=function(u,g,y,E){E===void 0&&(E=y),u[E]=g[y]},x=function(u,g){for(var y in u)y!=="default"&&!g.hasOwnProperty(y)&&(g[y]=u[y])},A=function(u){var g=typeof Symbol=="function"&&Symbol.iterator,y=g&&u[g],E=0;if(y)return y.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&E>=u.length&&(u=void 0),{value:u&&u[E++],done:!u}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},M=function(u,g){var y=typeof Symbol=="function"&&u[Symbol.iterator];if(!y)return u;var E=y.call(u),d,f=[],O;try{for(;(g===void 0||g-- >0)&&!(d=E.next()).done;)f.push(d.value)}catch(j){O={error:j}}finally{try{d&&!d.done&&(y=E.return)&&y.call(E)}finally{if(O)throw O.error}}return f},W=function(){for(var u=[],g=0;g<arguments.length;g++)u=u.concat(M(arguments[g]));return u},B=function(){for(var u=0,g=0,y=arguments.length;g<y;g++)u+=arguments[g].length;for(var E=Array(u),d=0,g=0;g<y;g++)for(var f=arguments[g],O=0,j=f.length;O<j;O++,d++)E[d]=f[O];return E},N=function(u){return this instanceof N?(this.v=u,this):new N(u)},te=function(u,g,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=y.apply(u,g||[]),d,f=[];return d={},O("next"),O("throw"),O("return"),d[Symbol.asyncIterator]=function(){return this},d;function O(ee){E[ee]&&(d[ee]=function(ne){return new Promise(function(ye,le){f.push([ee,ne,ye,le])>1||j(ee,ne)})})}function j(ee,ne){try{q(E[ee](ne))}catch(ye){Q(f[0][3],ye)}}function q(ee){ee.value instanceof N?Promise.resolve(ee.value.v).then(I,G):Q(f[0][2],ee)}function I(ee){j("next",ee)}function G(ee){j("throw",ee)}function Q(ee,ne){ee(ne),f.shift(),f.length&&j(f[0][0],f[0][1])}},X=function(u){var g,y;return g={},E("next"),E("throw",function(d){throw d}),E("return"),g[Symbol.iterator]=function(){return this},g;function E(d,f){g[d]=u[d]?function(O){return(y=!y)?{value:N(u[d](O)),done:d==="return"}:f?f(O):O}:f}},ae=function(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=u[Symbol.asyncIterator],y;return g?g.call(u):(u=typeof A=="function"?A(u):u[Symbol.iterator](),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(f){y[f]=u[f]&&function(O){return new Promise(function(j,q){O=u[f](O),d(j,q,O.done,O.value)})}}function d(f,O,j,q){Promise.resolve(q).then(function(I){f({value:I,done:j})},O)}},L=function(u,g){return Object.defineProperty?Object.defineProperty(u,"raw",{value:g}):u.raw=g,u},z=function(u){if(u&&u.__esModule)return u;var g={};if(u!=null)for(var y in u)Object.hasOwnProperty.call(u,y)&&(g[y]=u[y]);return g.default=u,g},C=function(u){return u&&u.__esModule?u:{default:u}},R=function(u,g){if(!g.has(u))throw new TypeError("attempted to get private field on non-instance");return g.get(u)},F=function(u,g,y){if(!g.has(u))throw new TypeError("attempted to set private field on non-instance");return g.set(u,y),y},m("__extends",e),m("__assign",r),m("__rest",s),m("__decorate",o),m("__param",l),m("__metadata",b),m("__awaiter",_),m("__generator",w),m("__exportStar",x),m("__createBinding",h),m("__values",A),m("__read",M),m("__spread",W),m("__spreadArrays",B),m("__await",N),m("__asyncGenerator",te),m("__asyncDelegator",X),m("__asyncValues",ae),m("__makeTemplateObject",L),m("__importStar",z),m("__importDefault",C),m("__classPrivateFieldGet",R),m("__classPrivateFieldSet",F)})})(au);var us={};Object.defineProperty(us,"__esModule",{value:!0});function D3(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return JSON.parse(n)}catch{return n}}us.safeJsonParse=D3;function S3(n){return typeof n=="string"?n:JSON.stringify(n,(e,r)=>typeof r=="undefined"?null:r)}us.safeJsonStringify=S3;var Ko={exports:{}};(function(){let n;function e(){}n=e,n.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},n.prototype.setItem=function(r,s){this[r]=String(s)},n.prototype.removeItem=function(r){delete this[r]},n.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},n.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof mt!="undefined"&&mt.localStorage?Ko.exports=mt.localStorage:typeof window!="undefined"&&window.localStorage?Ko.exports=window.localStorage:Ko.exports=new e})();var ud={},Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});Vo.IKeyValueStorage=void 0;class I3{}Vo.IKeyValueStorage=I3;var ko={};Object.defineProperty(ko,"__esModule",{value:!0});ko.parseEntry=void 0;const O3=us;function x3(n){var e;return[n[0],O3.safeJsonParse((e=n[1])!==null&&e!==void 0?e:"")]}ko.parseEntry=x3;(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=au.exports;e.__exportStar(Vo,n),e.__exportStar(ko,n)})(ud);Object.defineProperty(qo,"__esModule",{value:!0});qo.KeyValueStorage=void 0;const Nn=au.exports,hd=us,P3=Nn.__importDefault(Ko.exports),A3=ud;class ld{constructor(){this.localStorage=P3.default}getKeys(){return Nn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Nn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(A3.parseEntry)})}getItem(e){return Nn.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return hd.safeJsonParse(r)})}setItem(e,r){return Nn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,hd.safeJsonStringify(r))})}removeItem(e){return Nn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}qo.KeyValueStorage=ld;var C3=qo.default=ld,Rn={},hs={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var e,r,s,o,l,b,_,w,x,A,M,W,B,N,te,X,ae,L,z,C,R,F,h;(function(m){var re=typeof mt=="object"?mt:typeof self=="object"?self:typeof this=="object"?this:{};m(u(re,u(n.exports)));function u(g,y){return g!==re&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(E,d){return g[E]=y?y(E,d):d}}})(function(m){var re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,g){u.__proto__=g}||function(u,g){for(var y in g)g.hasOwnProperty(y)&&(u[y]=g[y])};e=function(u,g){re(u,g);function y(){this.constructor=u}u.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)},r=Object.assign||function(u){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(u[d]=g[d])}return u},s=function(u,g){var y={};for(var E in u)Object.prototype.hasOwnProperty.call(u,E)&&g.indexOf(E)<0&&(y[E]=u[E]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,E=Object.getOwnPropertySymbols(u);d<E.length;d++)g.indexOf(E[d])<0&&Object.prototype.propertyIsEnumerable.call(u,E[d])&&(y[E[d]]=u[E[d]]);return y},o=function(u,g,y,E){var d=arguments.length,f=d<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,y):E,O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,g,y,E);else for(var j=u.length-1;j>=0;j--)(O=u[j])&&(f=(d<3?O(f):d>3?O(g,y,f):O(g,y))||f);return d>3&&f&&Object.defineProperty(g,y,f),f},l=function(u,g){return function(y,E){g(y,E,u)}},b=function(u,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(u,g)},_=function(u,g,y,E){function d(f){return f instanceof y?f:new y(function(O){O(f)})}return new(y||(y=Promise))(function(f,O){function j(G){try{I(E.next(G))}catch(Q){O(Q)}}function q(G){try{I(E.throw(G))}catch(Q){O(Q)}}function I(G){G.done?f(G.value):d(G.value).then(j,q)}I((E=E.apply(u,g||[])).next())})},w=function(u,g){var y={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},E,d,f,O;return O={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function j(I){return function(G){return q([I,G])}}function q(I){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,d&&(f=I[0]&2?d.return:I[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,I[1])).done)return f;switch(d=0,f&&(I=[I[0]&2,f.value]),I[0]){case 0:case 1:f=I;break;case 4:return y.label++,{value:I[1],done:!1};case 5:y.label++,d=I[1],I=[0];continue;case 7:I=y.ops.pop(),y.trys.pop();continue;default:if(f=y.trys,!(f=f.length>0&&f[f.length-1])&&(I[0]===6||I[0]===2)){y=0;continue}if(I[0]===3&&(!f||I[1]>f[0]&&I[1]<f[3])){y.label=I[1];break}if(I[0]===6&&y.label<f[1]){y.label=f[1],f=I;break}if(f&&y.label<f[2]){y.label=f[2],y.ops.push(I);break}f[2]&&y.ops.pop(),y.trys.pop();continue}I=g.call(u,y)}catch(G){I=[6,G],d=0}finally{E=f=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},h=function(u,g,y,E){E===void 0&&(E=y),u[E]=g[y]},x=function(u,g){for(var y in u)y!=="default"&&!g.hasOwnProperty(y)&&(g[y]=u[y])},A=function(u){var g=typeof Symbol=="function"&&Symbol.iterator,y=g&&u[g],E=0;if(y)return y.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&E>=u.length&&(u=void 0),{value:u&&u[E++],done:!u}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},M=function(u,g){var y=typeof Symbol=="function"&&u[Symbol.iterator];if(!y)return u;var E=y.call(u),d,f=[],O;try{for(;(g===void 0||g-- >0)&&!(d=E.next()).done;)f.push(d.value)}catch(j){O={error:j}}finally{try{d&&!d.done&&(y=E.return)&&y.call(E)}finally{if(O)throw O.error}}return f},W=function(){for(var u=[],g=0;g<arguments.length;g++)u=u.concat(M(arguments[g]));return u},B=function(){for(var u=0,g=0,y=arguments.length;g<y;g++)u+=arguments[g].length;for(var E=Array(u),d=0,g=0;g<y;g++)for(var f=arguments[g],O=0,j=f.length;O<j;O++,d++)E[d]=f[O];return E},N=function(u){return this instanceof N?(this.v=u,this):new N(u)},te=function(u,g,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=y.apply(u,g||[]),d,f=[];return d={},O("next"),O("throw"),O("return"),d[Symbol.asyncIterator]=function(){return this},d;function O(ee){E[ee]&&(d[ee]=function(ne){return new Promise(function(ye,le){f.push([ee,ne,ye,le])>1||j(ee,ne)})})}function j(ee,ne){try{q(E[ee](ne))}catch(ye){Q(f[0][3],ye)}}function q(ee){ee.value instanceof N?Promise.resolve(ee.value.v).then(I,G):Q(f[0][2],ee)}function I(ee){j("next",ee)}function G(ee){j("throw",ee)}function Q(ee,ne){ee(ne),f.shift(),f.length&&j(f[0][0],f[0][1])}},X=function(u){var g,y;return g={},E("next"),E("throw",function(d){throw d}),E("return"),g[Symbol.iterator]=function(){return this},g;function E(d,f){g[d]=u[d]?function(O){return(y=!y)?{value:N(u[d](O)),done:d==="return"}:f?f(O):O}:f}},ae=function(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=u[Symbol.asyncIterator],y;return g?g.call(u):(u=typeof A=="function"?A(u):u[Symbol.iterator](),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(f){y[f]=u[f]&&function(O){return new Promise(function(j,q){O=u[f](O),d(j,q,O.done,O.value)})}}function d(f,O,j,q){Promise.resolve(q).then(function(I){f({value:I,done:j})},O)}},L=function(u,g){return Object.defineProperty?Object.defineProperty(u,"raw",{value:g}):u.raw=g,u},z=function(u){if(u&&u.__esModule)return u;var g={};if(u!=null)for(var y in u)Object.hasOwnProperty.call(u,y)&&(g[y]=u[y]);return g.default=u,g},C=function(u){return u&&u.__esModule?u:{default:u}},R=function(u,g){if(!g.has(u))throw new TypeError("attempted to get private field on non-instance");return g.get(u)},F=function(u,g,y){if(!g.has(u))throw new TypeError("attempted to set private field on non-instance");return g.set(u,y),y},m("__extends",e),m("__assign",r),m("__rest",s),m("__decorate",o),m("__param",l),m("__metadata",b),m("__awaiter",_),m("__generator",w),m("__exportStar",x),m("__createBinding",h),m("__values",A),m("__read",M),m("__spread",W),m("__spreadArrays",B),m("__await",N),m("__asyncGenerator",te),m("__asyncDelegator",X),m("__asyncValues",ae),m("__makeTemplateObject",L),m("__importStar",z),m("__importDefault",C),m("__classPrivateFieldGet",R),m("__classPrivateFieldSet",F)})})(hs);var Go={},cu={},Wo={};class en{}var T3=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",IEvents:en}),N3=Sb(T3);Object.defineProperty(Wo,"__esModule",{value:!0});Wo.IHeartBeat=void 0;const R3=N3;class F3 extends R3.IEvents{constructor(e){super()}}Wo.IHeartBeat=F3;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),hs.exports.__exportStar(Wo,n)})(cu);var uu={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.HEARTBEAT_EVENTS=Fn.HEARTBEAT_INTERVAL=void 0;const j3=be;Fn.HEARTBEAT_INTERVAL=j3.FIVE_SECONDS;Fn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),hs.exports.__exportStar(Fn,n)})(uu);Object.defineProperty(Go,"__esModule",{value:!0});Go.HeartBeat=void 0;const hu=hs.exports,U3=Ur.exports,M3=be,L3=cu,lu=uu;class fu extends L3.IHeartBeat{constructor(e){super(e);this.events=new U3.EventEmitter,this.interval=lu.HEARTBEAT_INTERVAL,this.interval=(e==null?void 0:e.interval)||lu.HEARTBEAT_INTERVAL}static init(e){return hu.__awaiter(this,void 0,void 0,function*(){const r=new fu(e);return yield r.init(),r})}init(){return hu.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}initialize(){return hu.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),M3.toMiliseconds(this.interval))})}pulse(){this.events.emit(lu.HEARTBEAT_EVENTS.pulse)}}Go.HeartBeat=fu;(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=hs.exports;e.__exportStar(Go,n),e.__exportStar(cu,n),e.__exportStar(uu,n)})(Rn);var Qe={},fd={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var e,r,s,o,l,b,_,w,x,A,M,W,B,N,te,X,ae,L,z,C,R,F,h;(function(m){var re=typeof mt=="object"?mt:typeof self=="object"?self:typeof this=="object"?this:{};m(u(re,u(n.exports)));function u(g,y){return g!==re&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(E,d){return g[E]=y?y(E,d):d}}})(function(m){var re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,g){u.__proto__=g}||function(u,g){for(var y in g)g.hasOwnProperty(y)&&(u[y]=g[y])};e=function(u,g){re(u,g);function y(){this.constructor=u}u.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)},r=Object.assign||function(u){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(u[d]=g[d])}return u},s=function(u,g){var y={};for(var E in u)Object.prototype.hasOwnProperty.call(u,E)&&g.indexOf(E)<0&&(y[E]=u[E]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,E=Object.getOwnPropertySymbols(u);d<E.length;d++)g.indexOf(E[d])<0&&Object.prototype.propertyIsEnumerable.call(u,E[d])&&(y[E[d]]=u[E[d]]);return y},o=function(u,g,y,E){var d=arguments.length,f=d<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,y):E,O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,g,y,E);else for(var j=u.length-1;j>=0;j--)(O=u[j])&&(f=(d<3?O(f):d>3?O(g,y,f):O(g,y))||f);return d>3&&f&&Object.defineProperty(g,y,f),f},l=function(u,g){return function(y,E){g(y,E,u)}},b=function(u,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(u,g)},_=function(u,g,y,E){function d(f){return f instanceof y?f:new y(function(O){O(f)})}return new(y||(y=Promise))(function(f,O){function j(G){try{I(E.next(G))}catch(Q){O(Q)}}function q(G){try{I(E.throw(G))}catch(Q){O(Q)}}function I(G){G.done?f(G.value):d(G.value).then(j,q)}I((E=E.apply(u,g||[])).next())})},w=function(u,g){var y={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},E,d,f,O;return O={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function j(I){return function(G){return q([I,G])}}function q(I){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,d&&(f=I[0]&2?d.return:I[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,I[1])).done)return f;switch(d=0,f&&(I=[I[0]&2,f.value]),I[0]){case 0:case 1:f=I;break;case 4:return y.label++,{value:I[1],done:!1};case 5:y.label++,d=I[1],I=[0];continue;case 7:I=y.ops.pop(),y.trys.pop();continue;default:if(f=y.trys,!(f=f.length>0&&f[f.length-1])&&(I[0]===6||I[0]===2)){y=0;continue}if(I[0]===3&&(!f||I[1]>f[0]&&I[1]<f[3])){y.label=I[1];break}if(I[0]===6&&y.label<f[1]){y.label=f[1],f=I;break}if(f&&y.label<f[2]){y.label=f[2],y.ops.push(I);break}f[2]&&y.ops.pop(),y.trys.pop();continue}I=g.call(u,y)}catch(G){I=[6,G],d=0}finally{E=f=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},h=function(u,g,y,E){E===void 0&&(E=y),u[E]=g[y]},x=function(u,g){for(var y in u)y!=="default"&&!g.hasOwnProperty(y)&&(g[y]=u[y])},A=function(u){var g=typeof Symbol=="function"&&Symbol.iterator,y=g&&u[g],E=0;if(y)return y.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&E>=u.length&&(u=void 0),{value:u&&u[E++],done:!u}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},M=function(u,g){var y=typeof Symbol=="function"&&u[Symbol.iterator];if(!y)return u;var E=y.call(u),d,f=[],O;try{for(;(g===void 0||g-- >0)&&!(d=E.next()).done;)f.push(d.value)}catch(j){O={error:j}}finally{try{d&&!d.done&&(y=E.return)&&y.call(E)}finally{if(O)throw O.error}}return f},W=function(){for(var u=[],g=0;g<arguments.length;g++)u=u.concat(M(arguments[g]));return u},B=function(){for(var u=0,g=0,y=arguments.length;g<y;g++)u+=arguments[g].length;for(var E=Array(u),d=0,g=0;g<y;g++)for(var f=arguments[g],O=0,j=f.length;O<j;O++,d++)E[d]=f[O];return E},N=function(u){return this instanceof N?(this.v=u,this):new N(u)},te=function(u,g,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=y.apply(u,g||[]),d,f=[];return d={},O("next"),O("throw"),O("return"),d[Symbol.asyncIterator]=function(){return this},d;function O(ee){E[ee]&&(d[ee]=function(ne){return new Promise(function(ye,le){f.push([ee,ne,ye,le])>1||j(ee,ne)})})}function j(ee,ne){try{q(E[ee](ne))}catch(ye){Q(f[0][3],ye)}}function q(ee){ee.value instanceof N?Promise.resolve(ee.value.v).then(I,G):Q(f[0][2],ee)}function I(ee){j("next",ee)}function G(ee){j("throw",ee)}function Q(ee,ne){ee(ne),f.shift(),f.length&&j(f[0][0],f[0][1])}},X=function(u){var g,y;return g={},E("next"),E("throw",function(d){throw d}),E("return"),g[Symbol.iterator]=function(){return this},g;function E(d,f){g[d]=u[d]?function(O){return(y=!y)?{value:N(u[d](O)),done:d==="return"}:f?f(O):O}:f}},ae=function(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=u[Symbol.asyncIterator],y;return g?g.call(u):(u=typeof A=="function"?A(u):u[Symbol.iterator](),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(f){y[f]=u[f]&&function(O){return new Promise(function(j,q){O=u[f](O),d(j,q,O.done,O.value)})}}function d(f,O,j,q){Promise.resolve(q).then(function(I){f({value:I,done:j})},O)}},L=function(u,g){return Object.defineProperty?Object.defineProperty(u,"raw",{value:g}):u.raw=g,u},z=function(u){if(u&&u.__esModule)return u;var g={};if(u!=null)for(var y in u)Object.hasOwnProperty.call(u,y)&&(g[y]=u[y]);return g.default=u,g},C=function(u){return u&&u.__esModule?u:{default:u}},R=function(u,g){if(!g.has(u))throw new TypeError("attempted to get private field on non-instance");return g.get(u)},F=function(u,g,y){if(!g.has(u))throw new TypeError("attempted to set private field on non-instance");return g.set(u,y),y},m("__extends",e),m("__assign",r),m("__rest",s),m("__decorate",o),m("__param",l),m("__metadata",b),m("__awaiter",_),m("__generator",w),m("__exportStar",x),m("__createBinding",h),m("__values",A),m("__read",M),m("__spread",W),m("__spreadArrays",B),m("__await",N),m("__asyncGenerator",te),m("__asyncDelegator",X),m("__asyncValues",ae),m("__makeTemplateObject",L),m("__importStar",z),m("__importDefault",C),m("__classPrivateFieldGet",R),m("__classPrivateFieldSet",F)})})(fd);function $3(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}var B3=z3;function z3(n,e,r){var s=r&&r.stringify||$3,o=1;if(typeof n=="object"&&n!==null){var l=e.length+o;if(l===1)return n;var b=new Array(l);b[0]=s(n);for(var _=1;_<l;_++)b[_]=s(e[_]);return b.join(" ")}if(typeof n!="string")return n;var w=e.length;if(w===0)return n;for(var x="",A=1-o,M=-1,W=n&&n.length||0,B=0;B<W;){if(n.charCodeAt(B)===37&&B+1<W){switch(M=M>-1?M:0,n.charCodeAt(B+1)){case 100:case 102:if(A>=w||e[A]==null)break;M<B&&(x+=n.slice(M,B)),x+=Number(e[A]),M=B+2,B++;break;case 105:if(A>=w||e[A]==null)break;M<B&&(x+=n.slice(M,B)),x+=Math.floor(Number(e[A])),M=B+2,B++;break;case 79:case 111:case 106:if(A>=w||e[A]===void 0)break;M<B&&(x+=n.slice(M,B));var N=typeof e[A];if(N==="string"){x+="'"+e[A]+"'",M=B+2,B++;break}if(N==="function"){x+=e[A].name||"<anonymous>",M=B+2,B++;break}x+=s(e[A]),M=B+2,B++;break;case 115:if(A>=w)break;M<B&&(x+=n.slice(M,B)),x+=String(e[A]),M=B+2,B++;break;case 37:M<B&&(x+=n.slice(M,B)),x+="%",M=B+2,B++,A--;break}++A}++B}return M===-1?n:(M<W&&(x+=n.slice(M)),x)}const dd=B3;var H3=ri;const ls=Z3().console||{},q3={mapHttpRequest:Jo,mapHttpResponse:Jo,wrapRequestSerializer:pu,wrapResponseSerializer:pu,wrapErrorSerializer:pu,req:Jo,res:Jo,err:W3};function K3(n,e){return Array.isArray(n)?n.filter(function(s){return s!=="!stdSerializers.err"}):n===!0?Object.keys(e):!1}function ri(n){n=n||{},n.browser=n.browser||{};const e=n.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=n.browser.write||ls;n.browser.write&&(n.browser.asObject=!0);const s=n.serializers||{},o=K3(n.browser.serialize,s);let l=n.browser.serialize;Array.isArray(n.browser.serialize)&&n.browser.serialize.indexOf("!stdSerializers.err")>-1&&(l=!1);const b=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),n.enabled===!1&&(n.level="silent");const _=n.level||"info",w=Object.create(r);w.log||(w.log=fs),Object.defineProperty(w,"levelVal",{get:A}),Object.defineProperty(w,"level",{get:M,set:W});const x={transmit:e,serialize:o,asObject:n.browser.asObject,levels:b,timestamp:Y3(n)};w.levels=ri.levels,w.level=_,w.setMaxListeners=w.getMaxListeners=w.emit=w.addListener=w.on=w.prependListener=w.once=w.prependOnceListener=w.removeListener=w.removeAllListeners=w.listeners=w.listenerCount=w.eventNames=w.write=w.flush=fs,w.serializers=s,w._serialize=o,w._stdErrSerialize=l,w.child=B,e&&(w._logEvent=du());function A(){return this.level==="silent"?1/0:this.levels.values[this.level]}function M(){return this._level}function W(N){if(N!=="silent"&&!this.levels.values[N])throw Error("unknown level "+N);this._level=N,jn(x,w,"error","log"),jn(x,w,"fatal","error"),jn(x,w,"warn","error"),jn(x,w,"info","log"),jn(x,w,"debug","log"),jn(x,w,"trace","log")}function B(N,te){if(!N)throw new Error("missing bindings for child Pino");te=te||{},o&&N.serializers&&(te.serializers=N.serializers);const X=te.serializers;if(o&&X){var ae=Object.assign({},s,X),L=n.browser.serialize===!0?Object.keys(ae):o;delete N.serializers,Yo([N],L,ae,this._stdErrSerialize)}function z(C){this._childLevel=(C._childLevel|0)+1,this.error=Un(C,N,"error"),this.fatal=Un(C,N,"fatal"),this.warn=Un(C,N,"warn"),this.info=Un(C,N,"info"),this.debug=Un(C,N,"debug"),this.trace=Un(C,N,"trace"),ae&&(this.serializers=ae,this._serialize=L),e&&(this._logEvent=du([].concat(C._logEvent.bindings,N)))}return z.prototype=this,new z(this)}return w}ri.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};ri.stdSerializers=q3;ri.stdTimeFunctions=Object.assign({},{nullTime:pd,epochTime:gd,unixTime:J3,isoTime:X3});function jn(n,e,r,s){const o=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?fs:o[r]?o[r]:ls[r]||ls[s]||fs,V3(n,e,r)}function V3(n,e,r){!n.transmit&&e[r]===fs||(e[r]=function(s){return function(){const l=n.timestamp(),b=new Array(arguments.length),_=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ls?ls:this;for(var w=0;w<b.length;w++)b[w]=arguments[w];if(n.serialize&&!n.asObject&&Yo(b,this._serialize,this.serializers,this._stdErrSerialize),n.asObject?s.call(_,k3(this,r,b,l)):s.apply(_,b),n.transmit){const x=n.transmit.level||e.level,A=ri.levels.values[x],M=ri.levels.values[r];if(M<A)return;G3(this,{ts:l,methodLevel:r,methodValue:M,transmitLevel:x,transmitValue:ri.levels.values[n.transmit.level||e.level],send:n.transmit.send,val:e.levelVal},b)}}}(e[r]))}function k3(n,e,r,s){n._serialize&&Yo(r,n._serialize,n.serializers,n._stdErrSerialize);const o=r.slice();let l=o[0];const b={};s&&(b.time=s),b.level=ri.levels.values[e];let _=(n._childLevel|0)+1;if(_<1&&(_=1),l!==null&&typeof l=="object"){for(;_--&&typeof o[0]=="object";)Object.assign(b,o.shift());l=o.length?dd(o.shift(),o):void 0}else typeof l=="string"&&(l=dd(o.shift(),o));return l!==void 0&&(b.msg=l),b}function Yo(n,e,r,s){for(const o in n)if(s&&n[o]instanceof Error)n[o]=ri.stdSerializers.err(n[o]);else if(typeof n[o]=="object"&&!Array.isArray(n[o]))for(const l in n[o])e&&e.indexOf(l)>-1&&l in r&&(n[o][l]=r[l](n[o][l]))}function Un(n,e,r){return function(){const s=new Array(1+arguments.length);s[0]=e;for(var o=1;o<s.length;o++)s[o]=arguments[o-1];return n[r].apply(this,s)}}function G3(n,e,r){const s=e.send,o=e.ts,l=e.methodLevel,b=e.methodValue,_=e.val,w=n._logEvent.bindings;Yo(r,n._serialize||Object.keys(n.serializers),n.serializers,n._stdErrSerialize===void 0?!0:n._stdErrSerialize),n._logEvent.ts=o,n._logEvent.messages=r.filter(function(x){return w.indexOf(x)===-1}),n._logEvent.level.label=l,n._logEvent.level.value=b,s(l,n._logEvent,_),n._logEvent=du(w)}function du(n){return{ts:0,messages:[],bindings:n||[],level:{label:"",value:0}}}function W3(n){const e={type:n.constructor.name,msg:n.message,stack:n.stack};for(const r in n)e[r]===void 0&&(e[r]=n[r]);return e}function Y3(n){return typeof n.timestamp=="function"?n.timestamp:n.timestamp===!1?pd:gd}function Jo(){return{}}function pu(n){return n}function fs(){}function pd(){return!1}function gd(){return Date.now()}function J3(){return Math.round(Date.now()/1e3)}function X3(){return new Date(Date.now()).toISOString()}function Z3(){function n(e){return typeof e!="undefined"&&e}try{return typeof globalThis!="undefined"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return n(self)||n(window)||n(this)||{}}}var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.PINO_CUSTOM_CONTEXT_KEY=tn.PINO_LOGGER_DEFAULTS=void 0;tn.PINO_LOGGER_DEFAULTS={level:"info"};tn.PINO_CUSTOM_CONTEXT_KEY="custom_context";var br={};Object.defineProperty(br,"__esModule",{value:!0});br.generateChildLogger=br.formatChildLoggerContext=br.getLoggerContext=br.setBrowserLoggerContext=br.getBrowserLoggerContext=br.getDefaultLoggerOptions=void 0;const Mn=tn;function Q3(n){return Object.assign(Object.assign({},n),{level:(n==null?void 0:n.level)||Mn.PINO_LOGGER_DEFAULTS.level})}br.getDefaultLoggerOptions=Q3;function yd(n,e=Mn.PINO_CUSTOM_CONTEXT_KEY){return n[e]||""}br.getBrowserLoggerContext=yd;function _d(n,e,r=Mn.PINO_CUSTOM_CONTEXT_KEY){return n[r]=e,n}br.setBrowserLoggerContext=_d;function vd(n,e=Mn.PINO_CUSTOM_CONTEXT_KEY){let r="";return typeof n.bindings=="undefined"?r=yd(n,e):r=n.bindings().context||"",r}br.getLoggerContext=vd;function bd(n,e,r=Mn.PINO_CUSTOM_CONTEXT_KEY){const s=vd(n,r);return s.trim()?`${s}/${e}`:e}br.formatChildLoggerContext=bd;function e6(n,e,r=Mn.PINO_CUSTOM_CONTEXT_KEY){const s=bd(n,e,r),o=n.child({context:s});return _d(o,s,r)}br.generateChildLogger=e6;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.pino=void 0;const e=fd.exports,r=e.__importDefault(H3);Object.defineProperty(n,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(tn,n),e.__exportStar(br,n)})(Qe);class t6 extends en{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class r6 extends en{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class i6{constructor(e,r){this.logger=e,this.core=r}}class n6 extends en{constructor(e,r){super(),this.relayer=e,this.logger=r}}class s6 extends en{constructor(e){super()}}class o6{constructor(e,r,s,o){this.core=e,this.logger=r,this.name=s}}class a6 extends en{constructor(e,r){super(),this.relayer=e,this.logger=r}}class c6 extends en{constructor(e,r){super(),this.core=e,this.logger=r}}class u6{constructor(e,r){this.projectId=e,this.logger=r}}class h6{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class l6{constructor(e){this.client=e}}const f6=n=>JSON.stringify(n,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),d6=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=n.replace(e,'$1"$2n"$3');return JSON.parse(r,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function gu(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return d6(n)}catch{return n}}function ds(n){return typeof n=="string"?n:f6(n)||""}var yu={},md={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ue,r=Or;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var s=function(){function _(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return _.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},_.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},_.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},_.prototype.update=function(w,x){if(x===void 0&&(x=w.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var A=0;if(this._bytesHashed+=x,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&x>0;)this._buffer[this._bufferLength++]=w[A++],x--;this._bufferLength===this.blockSize&&(l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(x>=this.blockSize&&(A=l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,w,A,x),x%=this.blockSize);x>0;)this._buffer[this._bufferLength++]=w[A++],x--;return this},_.prototype.finish=function(w){if(!this._finished){var x=this._bytesHashed,A=this._bufferLength,M=x/536870912|0,W=x<<3,B=x%128<112?128:256;this._buffer[A]=128;for(var N=A+1;N<B-8;N++)this._buffer[N]=0;e.writeUint32BE(M,this._buffer,B-8),e.writeUint32BE(W,this._buffer,B-4),l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,B),this._finished=!0}for(var N=0;N<this.digestLength/8;N++)e.writeUint32BE(this._stateHi[N],w,N*8),e.writeUint32BE(this._stateLo[N],w,N*8+4);return this},_.prototype.digest=function(){var w=new Uint8Array(this.digestLength);return this.finish(w),w},_.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},_.prototype.restoreState=function(w){return this._stateHi.set(w.stateHi),this._stateLo.set(w.stateLo),this._bufferLength=w.bufferLength,w.buffer&&this._buffer.set(w.buffer),this._bytesHashed=w.bytesHashed,this._finished=!1,this},_.prototype.cleanSavedState=function(w){r.wipe(w.stateHi),r.wipe(w.stateLo),w.buffer&&r.wipe(w.buffer),w.bufferLength=0,w.bytesHashed=0},_}();n.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function l(_,w,x,A,M,W,B){for(var N=x[0],te=x[1],X=x[2],ae=x[3],L=x[4],z=x[5],C=x[6],R=x[7],F=A[0],h=A[1],m=A[2],re=A[3],u=A[4],g=A[5],y=A[6],E=A[7],d,f,O,j,q,I,G,Q;B>=128;){for(var ee=0;ee<16;ee++){var ne=8*ee+W;_[ee]=e.readUint32BE(M,ne),w[ee]=e.readUint32BE(M,ne+4)}for(var ee=0;ee<80;ee++){var ye=N,le=te,Ce=X,J=ae,Y=L,H=z,p=C,U=R,he=F,pe=h,Se=m,He=re,Ve=u,Me=g,gt=y,yt=E;if(d=R,f=E,q=f&65535,I=f>>>16,G=d&65535,Q=d>>>16,d=(L>>>14|u<<32-14)^(L>>>18|u<<32-18)^(u>>>41-32|L<<32-(41-32)),f=(u>>>14|L<<32-14)^(u>>>18|L<<32-18)^(L>>>41-32|u<<32-(41-32)),q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,d=L&z^~L&C,f=u&g^~u&y,q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,d=o[ee*2],f=o[ee*2+1],q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,d=_[ee%16],f=w[ee%16],q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,I+=q>>>16,G+=I>>>16,Q+=G>>>16,O=G&65535|Q<<16,j=q&65535|I<<16,d=O,f=j,q=f&65535,I=f>>>16,G=d&65535,Q=d>>>16,d=(N>>>28|F<<32-28)^(F>>>34-32|N<<32-(34-32))^(F>>>39-32|N<<32-(39-32)),f=(F>>>28|N<<32-28)^(N>>>34-32|F<<32-(34-32))^(N>>>39-32|F<<32-(39-32)),q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,d=N&te^N&X^te&X,f=F&h^F&m^h&m,q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,I+=q>>>16,G+=I>>>16,Q+=G>>>16,U=G&65535|Q<<16,yt=q&65535|I<<16,d=J,f=He,q=f&65535,I=f>>>16,G=d&65535,Q=d>>>16,d=O,f=j,q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,I+=q>>>16,G+=I>>>16,Q+=G>>>16,J=G&65535|Q<<16,He=q&65535|I<<16,te=ye,X=le,ae=Ce,L=J,z=Y,C=H,R=p,N=U,h=he,m=pe,re=Se,u=He,g=Ve,y=Me,E=gt,F=yt,ee%16==15)for(var ne=0;ne<16;ne++)d=_[ne],f=w[ne],q=f&65535,I=f>>>16,G=d&65535,Q=d>>>16,d=_[(ne+9)%16],f=w[(ne+9)%16],q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,O=_[(ne+1)%16],j=w[(ne+1)%16],d=(O>>>1|j<<32-1)^(O>>>8|j<<32-8)^O>>>7,f=(j>>>1|O<<32-1)^(j>>>8|O<<32-8)^(j>>>7|O<<32-7),q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,O=_[(ne+14)%16],j=w[(ne+14)%16],d=(O>>>19|j<<32-19)^(j>>>61-32|O<<32-(61-32))^O>>>6,f=(j>>>19|O<<32-19)^(O>>>61-32|j<<32-(61-32))^(j>>>6|O<<32-6),q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,I+=q>>>16,G+=I>>>16,Q+=G>>>16,_[ne]=G&65535|Q<<16,w[ne]=q&65535|I<<16}d=N,f=F,q=f&65535,I=f>>>16,G=d&65535,Q=d>>>16,d=x[0],f=A[0],q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,I+=q>>>16,G+=I>>>16,Q+=G>>>16,x[0]=N=G&65535|Q<<16,A[0]=F=q&65535|I<<16,d=te,f=h,q=f&65535,I=f>>>16,G=d&65535,Q=d>>>16,d=x[1],f=A[1],q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,I+=q>>>16,G+=I>>>16,Q+=G>>>16,x[1]=te=G&65535|Q<<16,A[1]=h=q&65535|I<<16,d=X,f=m,q=f&65535,I=f>>>16,G=d&65535,Q=d>>>16,d=x[2],f=A[2],q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,I+=q>>>16,G+=I>>>16,Q+=G>>>16,x[2]=X=G&65535|Q<<16,A[2]=m=q&65535|I<<16,d=ae,f=re,q=f&65535,I=f>>>16,G=d&65535,Q=d>>>16,d=x[3],f=A[3],q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,I+=q>>>16,G+=I>>>16,Q+=G>>>16,x[3]=ae=G&65535|Q<<16,A[3]=re=q&65535|I<<16,d=L,f=u,q=f&65535,I=f>>>16,G=d&65535,Q=d>>>16,d=x[4],f=A[4],q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,I+=q>>>16,G+=I>>>16,Q+=G>>>16,x[4]=L=G&65535|Q<<16,A[4]=u=q&65535|I<<16,d=z,f=g,q=f&65535,I=f>>>16,G=d&65535,Q=d>>>16,d=x[5],f=A[5],q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,I+=q>>>16,G+=I>>>16,Q+=G>>>16,x[5]=z=G&65535|Q<<16,A[5]=g=q&65535|I<<16,d=C,f=y,q=f&65535,I=f>>>16,G=d&65535,Q=d>>>16,d=x[6],f=A[6],q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,I+=q>>>16,G+=I>>>16,Q+=G>>>16,x[6]=C=G&65535|Q<<16,A[6]=y=q&65535|I<<16,d=R,f=E,q=f&65535,I=f>>>16,G=d&65535,Q=d>>>16,d=x[7],f=A[7],q+=f&65535,I+=f>>>16,G+=d&65535,Q+=d>>>16,I+=q>>>16,G+=I>>>16,Q+=G>>>16,x[7]=R=G&65535|Q<<16,A[7]=E=q&65535|I<<16,W+=128,B-=128}return W}function b(_){var w=new s;w.update(_);var x=w.digest();return w.clean(),x}n.hash=b})(md);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=Sn,r=md,s=Or;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function o(J){const Y=new Float64Array(16);if(J)for(let H=0;H<J.length;H++)Y[H]=J[H];return Y}const l=new Uint8Array(32);l[0]=9;const b=o(),_=o([1]),w=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),x=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),A=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),M=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),W=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function B(J,Y){for(let H=0;H<16;H++)J[H]=Y[H]|0}function N(J){let Y=1;for(let H=0;H<16;H++){let p=J[H]+Y+65535;Y=Math.floor(p/65536),J[H]=p-Y*65536}J[0]+=Y-1+37*(Y-1)}function te(J,Y,H){const p=~(H-1);for(let U=0;U<16;U++){const he=p&(J[U]^Y[U]);J[U]^=he,Y[U]^=he}}function X(J,Y){const H=o(),p=o();for(let U=0;U<16;U++)p[U]=Y[U];N(p),N(p),N(p);for(let U=0;U<2;U++){H[0]=p[0]-65517;for(let pe=1;pe<15;pe++)H[pe]=p[pe]-65535-(H[pe-1]>>16&1),H[pe-1]&=65535;H[15]=p[15]-32767-(H[14]>>16&1);const he=H[15]>>16&1;H[14]&=65535,te(p,H,1-he)}for(let U=0;U<16;U++)J[2*U]=p[U]&255,J[2*U+1]=p[U]>>8}function ae(J,Y){let H=0;for(let p=0;p<32;p++)H|=J[p]^Y[p];return(1&H-1>>>8)-1}function L(J,Y){const H=new Uint8Array(32),p=new Uint8Array(32);return X(H,J),X(p,Y),ae(H,p)}function z(J){const Y=new Uint8Array(32);return X(Y,J),Y[0]&1}function C(J,Y){for(let H=0;H<16;H++)J[H]=Y[2*H]+(Y[2*H+1]<<8);J[15]&=32767}function R(J,Y,H){for(let p=0;p<16;p++)J[p]=Y[p]+H[p]}function F(J,Y,H){for(let p=0;p<16;p++)J[p]=Y[p]-H[p]}function h(J,Y,H){let p,U,he=0,pe=0,Se=0,He=0,Ve=0,Me=0,gt=0,yt=0,$e=0,Ie=0,Re=0,Fe=0,Be=0,xe=0,je=0,De=0,Pe=0,qe=0,Oe=0,ke=0,We=0,et=0,tt=0,Je=0,rr=0,lr=0,Wr=0,ir=0,si=0,vi=0,Mi=0,Dt=H[0],_t=H[1],St=H[2],It=H[3],wt=H[4],vt=H[5],Mt=H[6],Lt=H[7],Ot=H[8],$t=H[9],xt=H[10],Tt=H[11],Pt=H[12],lt=H[13],Bt=H[14],zt=H[15];p=Y[0],he+=p*Dt,pe+=p*_t,Se+=p*St,He+=p*It,Ve+=p*wt,Me+=p*vt,gt+=p*Mt,yt+=p*Lt,$e+=p*Ot,Ie+=p*$t,Re+=p*xt,Fe+=p*Tt,Be+=p*Pt,xe+=p*lt,je+=p*Bt,De+=p*zt,p=Y[1],pe+=p*Dt,Se+=p*_t,He+=p*St,Ve+=p*It,Me+=p*wt,gt+=p*vt,yt+=p*Mt,$e+=p*Lt,Ie+=p*Ot,Re+=p*$t,Fe+=p*xt,Be+=p*Tt,xe+=p*Pt,je+=p*lt,De+=p*Bt,Pe+=p*zt,p=Y[2],Se+=p*Dt,He+=p*_t,Ve+=p*St,Me+=p*It,gt+=p*wt,yt+=p*vt,$e+=p*Mt,Ie+=p*Lt,Re+=p*Ot,Fe+=p*$t,Be+=p*xt,xe+=p*Tt,je+=p*Pt,De+=p*lt,Pe+=p*Bt,qe+=p*zt,p=Y[3],He+=p*Dt,Ve+=p*_t,Me+=p*St,gt+=p*It,yt+=p*wt,$e+=p*vt,Ie+=p*Mt,Re+=p*Lt,Fe+=p*Ot,Be+=p*$t,xe+=p*xt,je+=p*Tt,De+=p*Pt,Pe+=p*lt,qe+=p*Bt,Oe+=p*zt,p=Y[4],Ve+=p*Dt,Me+=p*_t,gt+=p*St,yt+=p*It,$e+=p*wt,Ie+=p*vt,Re+=p*Mt,Fe+=p*Lt,Be+=p*Ot,xe+=p*$t,je+=p*xt,De+=p*Tt,Pe+=p*Pt,qe+=p*lt,Oe+=p*Bt,ke+=p*zt,p=Y[5],Me+=p*Dt,gt+=p*_t,yt+=p*St,$e+=p*It,Ie+=p*wt,Re+=p*vt,Fe+=p*Mt,Be+=p*Lt,xe+=p*Ot,je+=p*$t,De+=p*xt,Pe+=p*Tt,qe+=p*Pt,Oe+=p*lt,ke+=p*Bt,We+=p*zt,p=Y[6],gt+=p*Dt,yt+=p*_t,$e+=p*St,Ie+=p*It,Re+=p*wt,Fe+=p*vt,Be+=p*Mt,xe+=p*Lt,je+=p*Ot,De+=p*$t,Pe+=p*xt,qe+=p*Tt,Oe+=p*Pt,ke+=p*lt,We+=p*Bt,et+=p*zt,p=Y[7],yt+=p*Dt,$e+=p*_t,Ie+=p*St,Re+=p*It,Fe+=p*wt,Be+=p*vt,xe+=p*Mt,je+=p*Lt,De+=p*Ot,Pe+=p*$t,qe+=p*xt,Oe+=p*Tt,ke+=p*Pt,We+=p*lt,et+=p*Bt,tt+=p*zt,p=Y[8],$e+=p*Dt,Ie+=p*_t,Re+=p*St,Fe+=p*It,Be+=p*wt,xe+=p*vt,je+=p*Mt,De+=p*Lt,Pe+=p*Ot,qe+=p*$t,Oe+=p*xt,ke+=p*Tt,We+=p*Pt,et+=p*lt,tt+=p*Bt,Je+=p*zt,p=Y[9],Ie+=p*Dt,Re+=p*_t,Fe+=p*St,Be+=p*It,xe+=p*wt,je+=p*vt,De+=p*Mt,Pe+=p*Lt,qe+=p*Ot,Oe+=p*$t,ke+=p*xt,We+=p*Tt,et+=p*Pt,tt+=p*lt,Je+=p*Bt,rr+=p*zt,p=Y[10],Re+=p*Dt,Fe+=p*_t,Be+=p*St,xe+=p*It,je+=p*wt,De+=p*vt,Pe+=p*Mt,qe+=p*Lt,Oe+=p*Ot,ke+=p*$t,We+=p*xt,et+=p*Tt,tt+=p*Pt,Je+=p*lt,rr+=p*Bt,lr+=p*zt,p=Y[11],Fe+=p*Dt,Be+=p*_t,xe+=p*St,je+=p*It,De+=p*wt,Pe+=p*vt,qe+=p*Mt,Oe+=p*Lt,ke+=p*Ot,We+=p*$t,et+=p*xt,tt+=p*Tt,Je+=p*Pt,rr+=p*lt,lr+=p*Bt,Wr+=p*zt,p=Y[12],Be+=p*Dt,xe+=p*_t,je+=p*St,De+=p*It,Pe+=p*wt,qe+=p*vt,Oe+=p*Mt,ke+=p*Lt,We+=p*Ot,et+=p*$t,tt+=p*xt,Je+=p*Tt,rr+=p*Pt,lr+=p*lt,Wr+=p*Bt,ir+=p*zt,p=Y[13],xe+=p*Dt,je+=p*_t,De+=p*St,Pe+=p*It,qe+=p*wt,Oe+=p*vt,ke+=p*Mt,We+=p*Lt,et+=p*Ot,tt+=p*$t,Je+=p*xt,rr+=p*Tt,lr+=p*Pt,Wr+=p*lt,ir+=p*Bt,si+=p*zt,p=Y[14],je+=p*Dt,De+=p*_t,Pe+=p*St,qe+=p*It,Oe+=p*wt,ke+=p*vt,We+=p*Mt,et+=p*Lt,tt+=p*Ot,Je+=p*$t,rr+=p*xt,lr+=p*Tt,Wr+=p*Pt,ir+=p*lt,si+=p*Bt,vi+=p*zt,p=Y[15],De+=p*Dt,Pe+=p*_t,qe+=p*St,Oe+=p*It,ke+=p*wt,We+=p*vt,et+=p*Mt,tt+=p*Lt,Je+=p*Ot,rr+=p*$t,lr+=p*xt,Wr+=p*Tt,ir+=p*Pt,si+=p*lt,vi+=p*Bt,Mi+=p*zt,he+=38*Pe,pe+=38*qe,Se+=38*Oe,He+=38*ke,Ve+=38*We,Me+=38*et,gt+=38*tt,yt+=38*Je,$e+=38*rr,Ie+=38*lr,Re+=38*Wr,Fe+=38*ir,Be+=38*si,xe+=38*vi,je+=38*Mi,U=1,p=he+U+65535,U=Math.floor(p/65536),he=p-U*65536,p=pe+U+65535,U=Math.floor(p/65536),pe=p-U*65536,p=Se+U+65535,U=Math.floor(p/65536),Se=p-U*65536,p=He+U+65535,U=Math.floor(p/65536),He=p-U*65536,p=Ve+U+65535,U=Math.floor(p/65536),Ve=p-U*65536,p=Me+U+65535,U=Math.floor(p/65536),Me=p-U*65536,p=gt+U+65535,U=Math.floor(p/65536),gt=p-U*65536,p=yt+U+65535,U=Math.floor(p/65536),yt=p-U*65536,p=$e+U+65535,U=Math.floor(p/65536),$e=p-U*65536,p=Ie+U+65535,U=Math.floor(p/65536),Ie=p-U*65536,p=Re+U+65535,U=Math.floor(p/65536),Re=p-U*65536,p=Fe+U+65535,U=Math.floor(p/65536),Fe=p-U*65536,p=Be+U+65535,U=Math.floor(p/65536),Be=p-U*65536,p=xe+U+65535,U=Math.floor(p/65536),xe=p-U*65536,p=je+U+65535,U=Math.floor(p/65536),je=p-U*65536,p=De+U+65535,U=Math.floor(p/65536),De=p-U*65536,he+=U-1+37*(U-1),U=1,p=he+U+65535,U=Math.floor(p/65536),he=p-U*65536,p=pe+U+65535,U=Math.floor(p/65536),pe=p-U*65536,p=Se+U+65535,U=Math.floor(p/65536),Se=p-U*65536,p=He+U+65535,U=Math.floor(p/65536),He=p-U*65536,p=Ve+U+65535,U=Math.floor(p/65536),Ve=p-U*65536,p=Me+U+65535,U=Math.floor(p/65536),Me=p-U*65536,p=gt+U+65535,U=Math.floor(p/65536),gt=p-U*65536,p=yt+U+65535,U=Math.floor(p/65536),yt=p-U*65536,p=$e+U+65535,U=Math.floor(p/65536),$e=p-U*65536,p=Ie+U+65535,U=Math.floor(p/65536),Ie=p-U*65536,p=Re+U+65535,U=Math.floor(p/65536),Re=p-U*65536,p=Fe+U+65535,U=Math.floor(p/65536),Fe=p-U*65536,p=Be+U+65535,U=Math.floor(p/65536),Be=p-U*65536,p=xe+U+65535,U=Math.floor(p/65536),xe=p-U*65536,p=je+U+65535,U=Math.floor(p/65536),je=p-U*65536,p=De+U+65535,U=Math.floor(p/65536),De=p-U*65536,he+=U-1+37*(U-1),J[0]=he,J[1]=pe,J[2]=Se,J[3]=He,J[4]=Ve,J[5]=Me,J[6]=gt,J[7]=yt,J[8]=$e,J[9]=Ie,J[10]=Re,J[11]=Fe,J[12]=Be,J[13]=xe,J[14]=je,J[15]=De}function m(J,Y){h(J,Y,Y)}function re(J,Y){const H=o();let p;for(p=0;p<16;p++)H[p]=Y[p];for(p=253;p>=0;p--)m(H,H),p!==2&&p!==4&&h(H,H,Y);for(p=0;p<16;p++)J[p]=H[p]}function u(J,Y){const H=o();let p;for(p=0;p<16;p++)H[p]=Y[p];for(p=250;p>=0;p--)m(H,H),p!==1&&h(H,H,Y);for(p=0;p<16;p++)J[p]=H[p]}function g(J,Y){const H=o(),p=o(),U=o(),he=o(),pe=o(),Se=o(),He=o(),Ve=o(),Me=o();F(H,J[1],J[0]),F(Me,Y[1],Y[0]),h(H,H,Me),R(p,J[0],J[1]),R(Me,Y[0],Y[1]),h(p,p,Me),h(U,J[3],Y[3]),h(U,U,x),h(he,J[2],Y[2]),R(he,he,he),F(pe,p,H),F(Se,he,U),R(He,he,U),R(Ve,p,H),h(J[0],pe,Se),h(J[1],Ve,He),h(J[2],He,Se),h(J[3],pe,Ve)}function y(J,Y,H){for(let p=0;p<4;p++)te(J[p],Y[p],H)}function E(J,Y){const H=o(),p=o(),U=o();re(U,Y[2]),h(H,Y[0],U),h(p,Y[1],U),X(J,p),J[31]^=z(H)<<7}function d(J,Y,H){B(J[0],b),B(J[1],_),B(J[2],_),B(J[3],b);for(let p=255;p>=0;--p){const U=H[p/8|0]>>(p&7)&1;y(J,Y,U),g(Y,J),g(J,J),y(J,Y,U)}}function f(J,Y){const H=[o(),o(),o(),o()];B(H[0],A),B(H[1],M),B(H[2],_),h(H[3],A,M),d(J,H,Y)}function O(J){if(J.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const Y=(0,r.hash)(J);Y[0]&=248,Y[31]&=127,Y[31]|=64;const H=new Uint8Array(32),p=[o(),o(),o(),o()];f(p,Y),E(H,p);const U=new Uint8Array(64);return U.set(J),U.set(H,32),{publicKey:H,secretKey:U}}n.generateKeyPairFromSeed=O;function j(J){const Y=(0,e.randomBytes)(32,J),H=O(Y);return(0,s.wipe)(Y),H}n.generateKeyPair=j;function q(J){if(J.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(J.subarray(32))}n.extractPublicKeyFromSecretKey=q;const I=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function G(J,Y){let H,p,U,he;for(p=63;p>=32;--p){for(H=0,U=p-32,he=p-12;U<he;++U)Y[U]+=H-16*Y[p]*I[U-(p-32)],H=Math.floor((Y[U]+128)/256),Y[U]-=H*256;Y[U]+=H,Y[p]=0}for(H=0,U=0;U<32;U++)Y[U]+=H-(Y[31]>>4)*I[U],H=Y[U]>>8,Y[U]&=255;for(U=0;U<32;U++)Y[U]-=H*I[U];for(p=0;p<32;p++)Y[p+1]+=Y[p]>>8,J[p]=Y[p]&255}function Q(J){const Y=new Float64Array(64);for(let H=0;H<64;H++)Y[H]=J[H];for(let H=0;H<64;H++)J[H]=0;G(J,Y)}function ee(J,Y){const H=new Float64Array(64),p=[o(),o(),o(),o()],U=(0,r.hash)(J.subarray(0,32));U[0]&=248,U[31]&=127,U[31]|=64;const he=new Uint8Array(64);he.set(U.subarray(32),32);const pe=new r.SHA512;pe.update(he.subarray(32)),pe.update(Y);const Se=pe.digest();pe.clean(),Q(Se),f(p,Se),E(he,p),pe.reset(),pe.update(he.subarray(0,32)),pe.update(J.subarray(32)),pe.update(Y);const He=pe.digest();Q(He);for(let Ve=0;Ve<32;Ve++)H[Ve]=Se[Ve];for(let Ve=0;Ve<32;Ve++)for(let Me=0;Me<32;Me++)H[Ve+Me]+=He[Ve]*U[Me];return G(he.subarray(32),H),he}n.sign=ee;function ne(J,Y){const H=o(),p=o(),U=o(),he=o(),pe=o(),Se=o(),He=o();return B(J[2],_),C(J[1],Y),m(U,J[1]),h(he,U,w),F(U,U,J[2]),R(he,J[2],he),m(pe,he),m(Se,pe),h(He,Se,pe),h(H,He,U),h(H,H,he),u(H,H),h(H,H,U),h(H,H,he),h(H,H,he),h(J[0],H,he),m(p,J[0]),h(p,p,he),L(p,U)&&h(J[0],J[0],W),m(p,J[0]),h(p,p,he),L(p,U)?-1:(z(J[0])===Y[31]>>7&&F(J[0],b,J[0]),h(J[3],J[0],J[1]),0)}function ye(J,Y,H){const p=new Uint8Array(32),U=[o(),o(),o(),o()],he=[o(),o(),o(),o()];if(H.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(ne(he,J))return!1;const pe=new r.SHA512;pe.update(H.subarray(0,32)),pe.update(J),pe.update(Y);const Se=pe.digest();return Q(Se),d(U,he,Se),f(he,H.subarray(32)),g(U,he),E(p,U),!ae(H,p)}n.verify=ye;function le(J){let Y=[o(),o(),o(),o()];if(ne(Y,J))throw new Error("Ed25519: invalid public key");let H=o(),p=o(),U=Y[1];R(H,_,U),F(p,_,U),re(p,p),h(H,H,p);let he=new Uint8Array(32);return X(he,H),he}n.convertPublicKeyToX25519=le;function Ce(J){const Y=(0,r.hash)(J.subarray(0,32));Y[0]&=248,Y[31]&=127,Y[31]|=64;const H=new Uint8Array(Y.subarray(0,32));return(0,s.wipe)(Y),H}n.convertSecretKeyToX25519=Ce})(yu);const p6="EdDSA",g6="JWT",wd=".",Ed="base64url",y6="utf8",_6="utf8",v6=":",b6="did",m6="key",Dd="base58btc",w6="z",E6="K36",D6=32;function Xo(n){return cr(_r(ds(n),y6),Ed)}function Sd(n){const e=_r(E6,Dd),r=w6+cr(zc([e,n]),Dd);return[b6,m6,r].join(v6)}function S6(n){return cr(n,Ed)}function I6(n){return _r([Xo(n.header),Xo(n.payload)].join(wd),_6)}function O6(n){return[Xo(n.header),Xo(n.payload),S6(n.signature)].join(wd)}function Id(n=Sn.randomBytes(D6)){return yu.generateKeyPairFromSeed(n)}async function x6(n,e,r,s,o=be.fromMiliseconds(Date.now())){const l={alg:p6,typ:g6},b=Sd(s.publicKey),_=o+r,w={iss:b,sub:n,aud:e,iat:o,exp:_},x=I6({header:l,payload:w}),A=yu.sign(s.secretKey,x);return O6({header:l,payload:w,signature:A})}const P6="PARSE_ERROR",A6="INVALID_REQUEST",C6="METHOD_NOT_FOUND",T6="INVALID_PARAMS",Od="INTERNAL_ERROR",_u="SERVER_ERROR",N6=[-32700,-32600,-32601,-32602,-32603],ps={[P6]:{code:-32700,message:"Parse error"},[A6]:{code:-32600,message:"Invalid Request"},[C6]:{code:-32601,message:"Method not found"},[T6]:{code:-32602,message:"Invalid params"},[Od]:{code:-32603,message:"Internal error"},[_u]:{code:-32e3,message:"Server error"}},xd=_u;function R6(n){return N6.includes(n)}function Pd(n){return Object.keys(ps).includes(n)?ps[n]:ps[xd]}function F6(n){const e=Object.values(ps).find(r=>r.code===n);return e||ps[xd]}function Ad(n,e,r){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):n}var Cd={},Td={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(n){var e,r,s,o,l,b,_,w,x,A,M,W,B,N,te,X,ae,L,z,C,R,F,h;(function(m){var re=typeof mt=="object"?mt:typeof self=="object"?self:typeof this=="object"?this:{};m(u(re,u(n.exports)));function u(g,y){return g!==re&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(E,d){return g[E]=y?y(E,d):d}}})(function(m){var re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,g){u.__proto__=g}||function(u,g){for(var y in g)g.hasOwnProperty(y)&&(u[y]=g[y])};e=function(u,g){re(u,g);function y(){this.constructor=u}u.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)},r=Object.assign||function(u){for(var g,y=1,E=arguments.length;y<E;y++){g=arguments[y];for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(u[d]=g[d])}return u},s=function(u,g){var y={};for(var E in u)Object.prototype.hasOwnProperty.call(u,E)&&g.indexOf(E)<0&&(y[E]=u[E]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,E=Object.getOwnPropertySymbols(u);d<E.length;d++)g.indexOf(E[d])<0&&Object.prototype.propertyIsEnumerable.call(u,E[d])&&(y[E[d]]=u[E[d]]);return y},o=function(u,g,y,E){var d=arguments.length,f=d<3?g:E===null?E=Object.getOwnPropertyDescriptor(g,y):E,O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(u,g,y,E);else for(var j=u.length-1;j>=0;j--)(O=u[j])&&(f=(d<3?O(f):d>3?O(g,y,f):O(g,y))||f);return d>3&&f&&Object.defineProperty(g,y,f),f},l=function(u,g){return function(y,E){g(y,E,u)}},b=function(u,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(u,g)},_=function(u,g,y,E){function d(f){return f instanceof y?f:new y(function(O){O(f)})}return new(y||(y=Promise))(function(f,O){function j(G){try{I(E.next(G))}catch(Q){O(Q)}}function q(G){try{I(E.throw(G))}catch(Q){O(Q)}}function I(G){G.done?f(G.value):d(G.value).then(j,q)}I((E=E.apply(u,g||[])).next())})},w=function(u,g){var y={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},E,d,f,O;return O={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function j(I){return function(G){return q([I,G])}}function q(I){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,d&&(f=I[0]&2?d.return:I[0]?d.throw||((f=d.return)&&f.call(d),0):d.next)&&!(f=f.call(d,I[1])).done)return f;switch(d=0,f&&(I=[I[0]&2,f.value]),I[0]){case 0:case 1:f=I;break;case 4:return y.label++,{value:I[1],done:!1};case 5:y.label++,d=I[1],I=[0];continue;case 7:I=y.ops.pop(),y.trys.pop();continue;default:if(f=y.trys,!(f=f.length>0&&f[f.length-1])&&(I[0]===6||I[0]===2)){y=0;continue}if(I[0]===3&&(!f||I[1]>f[0]&&I[1]<f[3])){y.label=I[1];break}if(I[0]===6&&y.label<f[1]){y.label=f[1],f=I;break}if(f&&y.label<f[2]){y.label=f[2],y.ops.push(I);break}f[2]&&y.ops.pop(),y.trys.pop();continue}I=g.call(u,y)}catch(G){I=[6,G],d=0}finally{E=f=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},h=function(u,g,y,E){E===void 0&&(E=y),u[E]=g[y]},x=function(u,g){for(var y in u)y!=="default"&&!g.hasOwnProperty(y)&&(g[y]=u[y])},A=function(u){var g=typeof Symbol=="function"&&Symbol.iterator,y=g&&u[g],E=0;if(y)return y.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&E>=u.length&&(u=void 0),{value:u&&u[E++],done:!u}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},M=function(u,g){var y=typeof Symbol=="function"&&u[Symbol.iterator];if(!y)return u;var E=y.call(u),d,f=[],O;try{for(;(g===void 0||g-- >0)&&!(d=E.next()).done;)f.push(d.value)}catch(j){O={error:j}}finally{try{d&&!d.done&&(y=E.return)&&y.call(E)}finally{if(O)throw O.error}}return f},W=function(){for(var u=[],g=0;g<arguments.length;g++)u=u.concat(M(arguments[g]));return u},B=function(){for(var u=0,g=0,y=arguments.length;g<y;g++)u+=arguments[g].length;for(var E=Array(u),d=0,g=0;g<y;g++)for(var f=arguments[g],O=0,j=f.length;O<j;O++,d++)E[d]=f[O];return E},N=function(u){return this instanceof N?(this.v=u,this):new N(u)},te=function(u,g,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=y.apply(u,g||[]),d,f=[];return d={},O("next"),O("throw"),O("return"),d[Symbol.asyncIterator]=function(){return this},d;function O(ee){E[ee]&&(d[ee]=function(ne){return new Promise(function(ye,le){f.push([ee,ne,ye,le])>1||j(ee,ne)})})}function j(ee,ne){try{q(E[ee](ne))}catch(ye){Q(f[0][3],ye)}}function q(ee){ee.value instanceof N?Promise.resolve(ee.value.v).then(I,G):Q(f[0][2],ee)}function I(ee){j("next",ee)}function G(ee){j("throw",ee)}function Q(ee,ne){ee(ne),f.shift(),f.length&&j(f[0][0],f[0][1])}},X=function(u){var g,y;return g={},E("next"),E("throw",function(d){throw d}),E("return"),g[Symbol.iterator]=function(){return this},g;function E(d,f){g[d]=u[d]?function(O){return(y=!y)?{value:N(u[d](O)),done:d==="return"}:f?f(O):O}:f}},ae=function(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=u[Symbol.asyncIterator],y;return g?g.call(u):(u=typeof A=="function"?A(u):u[Symbol.iterator](),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(f){y[f]=u[f]&&function(O){return new Promise(function(j,q){O=u[f](O),d(j,q,O.done,O.value)})}}function d(f,O,j,q){Promise.resolve(q).then(function(I){f({value:I,done:j})},O)}},L=function(u,g){return Object.defineProperty?Object.defineProperty(u,"raw",{value:g}):u.raw=g,u},z=function(u){if(u&&u.__esModule)return u;var g={};if(u!=null)for(var y in u)Object.hasOwnProperty.call(u,y)&&(g[y]=u[y]);return g.default=u,g},C=function(u){return u&&u.__esModule?u:{default:u}},R=function(u,g){if(!g.has(u))throw new TypeError("attempted to get private field on non-instance");return g.get(u)},F=function(u,g,y){if(!g.has(u))throw new TypeError("attempted to set private field on non-instance");return g.set(u,y),y},m("__extends",e),m("__assign",r),m("__rest",s),m("__decorate",o),m("__param",l),m("__metadata",b),m("__awaiter",_),m("__generator",w),m("__exportStar",x),m("__createBinding",h),m("__values",A),m("__read",M),m("__spread",W),m("__spreadArrays",B),m("__await",N),m("__asyncGenerator",te),m("__asyncDelegator",X),m("__asyncValues",ae),m("__makeTemplateObject",L),m("__importStar",z),m("__importDefault",C),m("__classPrivateFieldGet",R),m("__classPrivateFieldSet",F)})})(Td);var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.isBrowserCryptoAvailable=Ni.getSubtleCrypto=Ni.getBrowerCrypto=void 0;function vu(){return(mt===null||mt===void 0?void 0:mt.crypto)||(mt===null||mt===void 0?void 0:mt.msCrypto)||{}}Ni.getBrowerCrypto=vu;function Nd(){const n=vu();return n.subtle||n.webkitSubtle}Ni.getSubtleCrypto=Nd;function j6(){return!!vu()&&!!Nd()}Ni.isBrowserCryptoAvailable=j6;var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.isBrowser=Ri.isNode=Ri.isReactNative=void 0;function Rd(){return typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"}Ri.isReactNative=Rd;function Fd(){return typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined"}Ri.isNode=Fd;function U6(){return!Rd()&&!Fd()}Ri.isBrowser=U6;(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Td.exports;e.__exportStar(Ni,n),e.__exportStar(Ri,n)})(Cd);function jd(n=3){const e=Date.now()*Math.pow(10,n),r=Math.floor(Math.random()*Math.pow(10,n));return e+r}function bu(n=6){return BigInt(jd(n))}function Zo(n,e,r){return{id:r||jd(),jsonrpc:"2.0",method:n,params:e}}function mu(n,e){return{id:n,jsonrpc:"2.0",result:e}}function Qo(n,e,r){return{id:n,jsonrpc:"2.0",error:M6(e,r)}}function M6(n,e){return typeof n=="undefined"?Pd(Od):(typeof n=="string"&&(n=Object.assign(Object.assign({},Pd(_u)),{message:n})),typeof e!="undefined"&&(n.data=e),R6(n.code)&&(n=F6(n.code)),n)}class L6{}class $6 extends L6{constructor(){super()}}class B6 extends $6{constructor(e){super()}}const z6="^https?:",H6="^wss?:";function q6(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Ud(n,e){const r=q6(n);return typeof r=="undefined"?!1:new RegExp(e).test(r)}function Md(n){return Ud(n,z6)}function Ld(n){return Ud(n,H6)}function K6(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function $d(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function wu(n){return $d(n)&&"method"in n}function ea(n){return $d(n)&&(_i(n)||Gr(n))}function _i(n){return"result"in n}function Gr(n){return"error"in n}class Fi extends B6{constructor(e){super(e);this.events=new Ur.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Zo(e.method,e.params||[],e.id||bu().toString()),r)}async requestStrict(e,r){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(l){o(l)}this.events.on(`${e.id}`,l=>{Gr(l)?o(l.error):s(l.result)});try{await this.connection.send(e,r)}catch(l){o(l)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ea(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const V6=()=>typeof global!="undefined"&&typeof global.WebSocket!="undefined"?global.WebSocket:typeof window!="undefined"&&typeof window.WebSocket!="undefined"?window.WebSocket:require("ws"),k6=()=>typeof window!="undefined",Bd=n=>n.split("?")[0],zd=10,G6=V6();class W6{constructor(e){if(this.url=e,this.events=new Ur.exports.EventEmitter,this.registering=!1,!Ld(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket!="undefined"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket=="undefined"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e,r){typeof this.socket=="undefined"&&(this.socket=await this.register());try{this.socket.send(ds(e))}catch(s){this.onError(e.id,s)}}register(e=this.url){if(!Ld(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,o)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),o(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket=="undefined")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,s)=>{const o=Cd.isReactNative()?void 0:{rejectUnauthorized:!K6(e)},l=new G6(e,[],o);k6()?l.onerror=b=>{const _=b;s(this.emitError(_.error))}:l.on("error",b=>{s(this.emitError(b))}),l.onopen=()=>{this.onOpen(l),r(l)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data=="undefined")return;const r=typeof e.data=="string"?gu(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),o=s.message||s.toString(),l=Qo(e,o);this.events.emit("payload",l)}parseError(e,r=this.url){return Ad(e,Bd(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>zd&&this.events.setMaxListeners(zd)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Bd(this.url)}`));return this.events.emit("register_error",r),r}}var Eu={exports:{}};(function(n,e){var r=200,s="__lodash_hash_undefined__",o=1,l=2,b=9007199254740991,_="[object Arguments]",w="[object Array]",x="[object AsyncFunction]",A="[object Boolean]",M="[object Date]",W="[object Error]",B="[object Function]",N="[object GeneratorFunction]",te="[object Map]",X="[object Number]",ae="[object Null]",L="[object Object]",z="[object Promise]",C="[object Proxy]",R="[object RegExp]",F="[object Set]",h="[object String]",m="[object Symbol]",re="[object Undefined]",u="[object WeakMap]",g="[object ArrayBuffer]",y="[object DataView]",E="[object Float32Array]",d="[object Float64Array]",f="[object Int8Array]",O="[object Int16Array]",j="[object Int32Array]",q="[object Uint8Array]",I="[object Uint8ClampedArray]",G="[object Uint16Array]",Q="[object Uint32Array]",ee=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,ye=/^(?:0|[1-9]\d*)$/,le={};le[E]=le[d]=le[f]=le[O]=le[j]=le[q]=le[I]=le[G]=le[Q]=!0,le[_]=le[w]=le[g]=le[A]=le[y]=le[M]=le[W]=le[B]=le[te]=le[X]=le[L]=le[R]=le[F]=le[h]=le[u]=!1;var Ce=typeof mt=="object"&&mt&&mt.Object===Object&&mt,J=typeof self=="object"&&self&&self.Object===Object&&self,Y=Ce||J||Function("return this")(),H=e&&!e.nodeType&&e,p=H&&!0&&n&&!n.nodeType&&n,U=p&&p.exports===H,he=U&&Ce.process,pe=function(){try{return he&&he.binding&&he.binding("util")}catch{}}(),Se=pe&&pe.isTypedArray;function He(P,K){for(var ce=-1,ge=P==null?0:P.length,ct=0,Te=[];++ce<ge;){var dt=P[ce];K(dt,ce,P)&&(Te[ct++]=dt)}return Te}function Ve(P,K){for(var ce=-1,ge=K.length,ct=P.length;++ce<ge;)P[ct+ce]=K[ce];return P}function Me(P,K){for(var ce=-1,ge=P==null?0:P.length;++ce<ge;)if(K(P[ce],ce,P))return!0;return!1}function gt(P,K){for(var ce=-1,ge=Array(P);++ce<P;)ge[ce]=K(ce);return ge}function yt(P){return function(K){return P(K)}}function $e(P,K){return P.has(K)}function Ie(P,K){return P==null?void 0:P[K]}function Re(P){var K=-1,ce=Array(P.size);return P.forEach(function(ge,ct){ce[++K]=[ct,ge]}),ce}function Fe(P,K){return function(ce){return P(K(ce))}}function Be(P){var K=-1,ce=Array(P.size);return P.forEach(function(ge){ce[++K]=ge}),ce}var xe=Array.prototype,je=Function.prototype,De=Object.prototype,Pe=Y["__core-js_shared__"],qe=je.toString,Oe=De.hasOwnProperty,ke=function(){var P=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}(),We=De.toString,et=RegExp("^"+qe.call(Oe).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=U?Y.Buffer:void 0,Je=Y.Symbol,rr=Y.Uint8Array,lr=De.propertyIsEnumerable,Wr=xe.splice,ir=Je?Je.toStringTag:void 0,si=Object.getOwnPropertySymbols,vi=tt?tt.isBuffer:void 0,Mi=Fe(Object.keys,Object),Dt=mr(Y,"DataView"),_t=mr(Y,"Map"),St=mr(Y,"Promise"),It=mr(Y,"Set"),wt=mr(Y,"WeakMap"),vt=mr(Object,"create"),Mt=ai(Dt),Lt=ai(_t),Ot=ai(St),$t=ai(It),xt=ai(wt),Tt=Je?Je.prototype:void 0,Pt=Tt?Tt.valueOf:void 0;function lt(P){var K=-1,ce=P==null?0:P.length;for(this.clear();++K<ce;){var ge=P[K];this.set(ge[0],ge[1])}}function Bt(){this.__data__=vt?vt(null):{},this.size=0}function zt(P){var K=this.has(P)&&delete this.__data__[P];return this.size-=K?1:0,K}function aa(P){var K=this.__data__;if(vt){var ce=K[P];return ce===s?void 0:ce}return Oe.call(K,P)?K[P]:void 0}function ca(P){var K=this.__data__;return vt?K[P]!==void 0:Oe.call(K,P)}function ua(P,K){var ce=this.__data__;return this.size+=this.has(P)?0:1,ce[P]=vt&&K===void 0?s:K,this}lt.prototype.clear=Bt,lt.prototype.delete=zt,lt.prototype.get=aa,lt.prototype.has=ca,lt.prototype.set=ua;function xr(P){var K=-1,ce=P==null?0:P.length;for(this.clear();++K<ce;){var ge=P[K];this.set(ge[0],ge[1])}}function ha(){this.__data__=[],this.size=0}function la(P){var K=this.__data__,ce=Li(K,P);if(ce<0)return!1;var ge=K.length-1;return ce==ge?K.pop():Wr.call(K,ce,1),--this.size,!0}function fa(P){var K=this.__data__,ce=Li(K,P);return ce<0?void 0:K[ce][1]}function da(P){return Li(this.__data__,P)>-1}function pa(P,K){var ce=this.__data__,ge=Li(ce,P);return ge<0?(++this.size,ce.push([P,K])):ce[ge][1]=K,this}xr.prototype.clear=ha,xr.prototype.delete=la,xr.prototype.get=fa,xr.prototype.has=da,xr.prototype.set=pa;function oi(P){var K=-1,ce=P==null?0:P.length;for(this.clear();++K<ce;){var ge=P[K];this.set(ge[0],ge[1])}}function nn(){this.size=0,this.__data__={hash:new lt,map:new(_t||xr),string:new lt}}function ga(P){var K=bi(this,P).delete(P);return this.size-=K?1:0,K}function sn(P){return bi(this,P).get(P)}function ya(P){return bi(this,P).has(P)}function _a(P,K){var ce=bi(this,P),ge=ce.size;return ce.set(P,K),this.size+=ce.size==ge?0:1,this}oi.prototype.clear=nn,oi.prototype.delete=ga,oi.prototype.get=sn,oi.prototype.has=ya,oi.prototype.set=_a;function on(P){var K=-1,ce=P==null?0:P.length;for(this.__data__=new oi;++K<ce;)this.add(P[K])}function Es(P){return this.__data__.set(P,s),this}function Ds(P){return this.__data__.has(P)}on.prototype.add=on.prototype.push=Es,on.prototype.has=Ds;function Br(P){var K=this.__data__=new xr(P);this.size=K.size}function va(){this.__data__=new xr,this.size=0}function ba(P){var K=this.__data__,ce=K.delete(P);return this.size=K.size,ce}function ma(P){return this.__data__.get(P)}function wa(P){return this.__data__.has(P)}function Ss(P,K){var ce=this.__data__;if(ce instanceof xr){var ge=ce.__data__;if(!_t||ge.length<r-1)return ge.push([P,K]),this.size=++ce.size,this;ce=this.__data__=new oi(ge)}return ce.set(P,K),this.size=ce.size,this}Br.prototype.clear=va,Br.prototype.delete=ba,Br.prototype.get=ma,Br.prototype.has=wa,Br.prototype.set=Ss;function Is(P,K){var ce=un(P),ge=!ce&&Ms(P),ct=!ce&&!ge&&Bn(P),Te=!ce&&!ge&&!ct&&Bs(P),dt=ce||ge||ct||Te,Ht=dt?gt(P.length,String):[],Xe=Ht.length;for(var ut in P)(K||Oe.call(P,ut))&&!(dt&&(ut=="length"||ct&&(ut=="offset"||ut=="parent")||Te&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||Ns(ut,Xe)))&&Ht.push(ut);return Ht}function Li(P,K){for(var ce=P.length;ce--;)if(Us(P[ce][0],K))return ce;return-1}function Ln(P,K,ce){var ge=K(P);return un(P)?ge:Ve(ge,ce(P))}function $i(P){return P==null?P===void 0?re:ae:ir&&ir in Object(P)?Cs(P):Sa(P)}function $n(P){return zi(P)&&$i(P)==_}function Bi(P,K,ce,ge,ct){return P===K?!0:P==null||K==null||!zi(P)&&!zi(K)?P!==P&&K!==K:Os(P,K,ce,ge,Bi,ct)}function Os(P,K,ce,ge,ct,Te){var dt=un(P),Ht=un(K),Xe=dt?w:Yr(P),ut=Ht?w:Yr(K);Xe=Xe==_?L:Xe,ut=ut==_?L:ut;var Nt=Xe==L,fr=ut==L,qt=Xe==ut;if(qt&&Bn(P)){if(!Bn(K))return!1;dt=!0,Nt=!1}if(qt&&!Nt)return Te||(Te=new Br),dt||Bs(P)?an(P,K,ce,ge,ct,Te):Da(P,K,Xe,ce,ge,ct,Te);if(!(ce&o)){var pt=Nt&&Oe.call(P,"__wrapped__"),nr=fr&&Oe.call(K,"__wrapped__");if(pt||nr){var zr=pt?P.value():P,Pr=nr?K.value():K;return Te||(Te=new Br),ct(zr,Pr,ce,ge,Te)}}return qt?(Te||(Te=new Br),As(P,K,ce,ge,ct,Te)):!1}function Ea(P){if(!$s(P)||Fs(P))return!1;var K=hn(P)?et:ne;return K.test(ai(P))}function xs(P){return zi(P)&&Ls(P.length)&&!!le[$i(P)]}function Ps(P){if(!js(P))return Mi(P);var K=[];for(var ce in Object(P))Oe.call(P,ce)&&ce!="constructor"&&K.push(ce);return K}function an(P,K,ce,ge,ct,Te){var dt=ce&o,Ht=P.length,Xe=K.length;if(Ht!=Xe&&!(dt&&Xe>Ht))return!1;var ut=Te.get(P);if(ut&&Te.get(K))return ut==K;var Nt=-1,fr=!0,qt=ce&l?new on:void 0;for(Te.set(P,K),Te.set(K,P);++Nt<Ht;){var pt=P[Nt],nr=K[Nt];if(ge)var zr=dt?ge(nr,pt,Nt,K,P,Te):ge(pt,nr,Nt,P,K,Te);if(zr!==void 0){if(zr)continue;fr=!1;break}if(qt){if(!Me(K,function(Pr,Jr){if(!$e(qt,Jr)&&(pt===Pr||ct(pt,Pr,ce,ge,Te)))return qt.push(Jr)})){fr=!1;break}}else if(!(pt===nr||ct(pt,nr,ce,ge,Te))){fr=!1;break}}return Te.delete(P),Te.delete(K),fr}function Da(P,K,ce,ge,ct,Te,dt){switch(ce){case y:if(P.byteLength!=K.byteLength||P.byteOffset!=K.byteOffset)return!1;P=P.buffer,K=K.buffer;case g:return!(P.byteLength!=K.byteLength||!Te(new rr(P),new rr(K)));case A:case M:case X:return Us(+P,+K);case W:return P.name==K.name&&P.message==K.message;case R:case h:return P==K+"";case te:var Ht=Re;case F:var Xe=ge&o;if(Ht||(Ht=Be),P.size!=K.size&&!Xe)return!1;var ut=dt.get(P);if(ut)return ut==K;ge|=l,dt.set(P,K);var Nt=an(Ht(P),Ht(K),ge,ct,Te,dt);return dt.delete(P),Nt;case m:if(Pt)return Pt.call(P)==Pt.call(K)}return!1}function As(P,K,ce,ge,ct,Te){var dt=ce&o,Ht=cn(P),Xe=Ht.length,ut=cn(K),Nt=ut.length;if(Xe!=Nt&&!dt)return!1;for(var fr=Xe;fr--;){var qt=Ht[fr];if(!(dt?qt in K:Oe.call(K,qt)))return!1}var pt=Te.get(P);if(pt&&Te.get(K))return pt==K;var nr=!0;Te.set(P,K),Te.set(K,P);for(var zr=dt;++fr<Xe;){qt=Ht[fr];var Pr=P[qt],Jr=K[qt];if(ge)var zn=dt?ge(Jr,Pr,qt,K,P,Te):ge(Pr,Jr,qt,P,K,Te);if(!(zn===void 0?Pr===Jr||ct(Pr,Jr,ce,ge,Te):zn)){nr=!1;break}zr||(zr=qt=="constructor")}if(nr&&!zr){var Hi=P.constructor,Gt=K.constructor;Hi!=Gt&&"constructor"in P&&"constructor"in K&&!(typeof Hi=="function"&&Hi instanceof Hi&&typeof Gt=="function"&&Gt instanceof Gt)&&(nr=!1)}return Te.delete(P),Te.delete(K),nr}function cn(P){return Ln(P,xa,Ts)}function bi(P,K){var ce=P.__data__;return Rs(K)?ce[typeof K=="string"?"string":"hash"]:ce.map}function mr(P,K){var ce=Ie(P,K);return Ea(ce)?ce:void 0}function Cs(P){var K=Oe.call(P,ir),ce=P[ir];try{P[ir]=void 0;var ge=!0}catch{}var ct=We.call(P);return ge&&(K?P[ir]=ce:delete P[ir]),ct}var Ts=si?function(P){return P==null?[]:(P=Object(P),He(si(P),function(K){return lr.call(P,K)}))}:at,Yr=$i;(Dt&&Yr(new Dt(new ArrayBuffer(1)))!=y||_t&&Yr(new _t)!=te||St&&Yr(St.resolve())!=z||It&&Yr(new It)!=F||wt&&Yr(new wt)!=u)&&(Yr=function(P){var K=$i(P),ce=K==L?P.constructor:void 0,ge=ce?ai(ce):"";if(ge)switch(ge){case Mt:return y;case Lt:return te;case Ot:return z;case $t:return F;case xt:return u}return K});function Ns(P,K){return K=K==null?b:K,!!K&&(typeof P=="number"||ye.test(P))&&P>-1&&P%1==0&&P<K}function Rs(P){var K=typeof P;return K=="string"||K=="number"||K=="symbol"||K=="boolean"?P!=="__proto__":P===null}function Fs(P){return!!ke&&ke in P}function js(P){var K=P&&P.constructor,ce=typeof K=="function"&&K.prototype||De;return P===ce}function Sa(P){return We.call(P)}function ai(P){if(P!=null){try{return qe.call(P)}catch{}try{return P+""}catch{}}return""}function Us(P,K){return P===K||P!==P&&K!==K}var Ms=$n(function(){return arguments}())?$n:function(P){return zi(P)&&Oe.call(P,"callee")&&!lr.call(P,"callee")},un=Array.isArray;function Ia(P){return P!=null&&Ls(P.length)&&!hn(P)}var Bn=vi||ot;function Oa(P,K){return Bi(P,K)}function hn(P){if(!$s(P))return!1;var K=$i(P);return K==B||K==N||K==x||K==C}function Ls(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=b}function $s(P){var K=typeof P;return P!=null&&(K=="object"||K=="function")}function zi(P){return P!=null&&typeof P=="object"}var Bs=Se?yt(Se):xs;function xa(P){return Ia(P)?Is(P):Ps(P)}function at(){return[]}function ot(){return!1}n.exports=Oa})(Eu,Eu.exports);var Y6=Eu.exports;function J6(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var o=0;o<n.length;o++){var l=n.charAt(o),b=l.charCodeAt(0);if(r[b]!==255)throw new TypeError(l+" is ambiguous");r[b]=o}var _=n.length,w=n.charAt(0),x=Math.log(_)/Math.log(256),A=Math.log(256)/Math.log(_);function M(N){if(N instanceof Uint8Array||(ArrayBuffer.isView(N)?N=new Uint8Array(N.buffer,N.byteOffset,N.byteLength):Array.isArray(N)&&(N=Uint8Array.from(N))),!(N instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(N.length===0)return"";for(var te=0,X=0,ae=0,L=N.length;ae!==L&&N[ae]===0;)ae++,te++;for(var z=(L-ae)*A+1>>>0,C=new Uint8Array(z);ae!==L;){for(var R=N[ae],F=0,h=z-1;(R!==0||F<X)&&h!==-1;h--,F++)R+=256*C[h]>>>0,C[h]=R%_>>>0,R=R/_>>>0;if(R!==0)throw new Error("Non-zero carry");X=F,ae++}for(var m=z-X;m!==z&&C[m]===0;)m++;for(var re=w.repeat(te);m<z;++m)re+=n.charAt(C[m]);return re}function W(N){if(typeof N!="string")throw new TypeError("Expected String");if(N.length===0)return new Uint8Array;var te=0;if(N[te]!==" "){for(var X=0,ae=0;N[te]===w;)X++,te++;for(var L=(N.length-te)*x+1>>>0,z=new Uint8Array(L);N[te];){var C=r[N.charCodeAt(te)];if(C===255)return;for(var R=0,F=L-1;(C!==0||R<ae)&&F!==-1;F--,R++)C+=_*z[F]>>>0,z[F]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");ae=R,te++}if(N[te]!==" "){for(var h=L-ae;h!==L&&z[h]===0;)h++;for(var m=new Uint8Array(X+(L-h)),re=X;h!==L;)m[re++]=z[h++];return m}}}function B(N){var te=W(N);if(te)return te;throw new Error(`Non-${e} character`)}return{encode:M,decodeUnsafe:W,decode:B}}var X6=J6,Z6=X6;const Hd=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Q6=n=>new TextEncoder().encode(n),e2=n=>new TextDecoder().decode(n);class t2{constructor(e,r,s){this.name=e,this.prefix=r,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class r2{constructor(e,r,s){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return qd(this,e)}}class i2{constructor(e){this.decoders=e}or(e){return qd(this,e)}decode(e){const r=e[0],s=this.decoders[r];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qd=(n,e)=>new i2(it(it({},n.decoders||{[n.prefix]:n}),e.decoders||{[e.prefix]:e}));class n2{constructor(e,r,s,o){this.name=e,this.prefix=r,this.baseEncode=s,this.baseDecode=o,this.encoder=new t2(e,r,s),this.decoder=new r2(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ta=({name:n,prefix:e,encode:r,decode:s})=>new n2(n,e,r,s),gs=({prefix:n,name:e,alphabet:r})=>{const{encode:s,decode:o}=Z6(r,e);return ta({prefix:n,name:e,encode:s,decode:l=>Hd(o(l))})},s2=(n,e,r,s)=>{const o={};for(let A=0;A<e.length;++A)o[e[A]]=A;let l=n.length;for(;n[l-1]==="=";)--l;const b=new Uint8Array(l*r/8|0);let _=0,w=0,x=0;for(let A=0;A<l;++A){const M=o[n[A]];if(M===void 0)throw new SyntaxError(`Non-${s} character`);w=w<<r|M,_+=r,_>=8&&(_-=8,b[x++]=255&w>>_)}if(_>=r||255&w<<8-_)throw new SyntaxError("Unexpected end of data");return b},o2=(n,e,r)=>{const s=e[e.length-1]==="=",o=(1<<r)-1;let l="",b=0,_=0;for(let w=0;w<n.length;++w)for(_=_<<8|n[w],b+=8;b>r;)b-=r,l+=e[o&_>>b];if(b&&(l+=e[o&_<<r-b]),s)for(;l.length*r&7;)l+="=";return l},Zt=({name:n,prefix:e,bitsPerChar:r,alphabet:s})=>ta({prefix:e,name:n,encode(o){return o2(o,s,r)},decode(o){return s2(o,s,r,n)}}),a2=ta({prefix:"\0",name:"identity",encode:n=>e2(n),decode:n=>Q6(n)});var c2=Object.freeze({__proto__:null,identity:a2});const u2=Zt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var h2=Object.freeze({__proto__:null,base2:u2});const l2=Zt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var f2=Object.freeze({__proto__:null,base8:l2});const d2=gs({prefix:"9",name:"base10",alphabet:"0123456789"});var p2=Object.freeze({__proto__:null,base10:d2});const g2=Zt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),y2=Zt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var _2=Object.freeze({__proto__:null,base16:g2,base16upper:y2});const v2=Zt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),b2=Zt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),m2=Zt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),w2=Zt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),E2=Zt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),D2=Zt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),S2=Zt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),I2=Zt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),O2=Zt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var x2=Object.freeze({__proto__:null,base32:v2,base32upper:b2,base32pad:m2,base32padupper:w2,base32hex:E2,base32hexupper:D2,base32hexpad:S2,base32hexpadupper:I2,base32z:O2});const P2=gs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),A2=gs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var C2=Object.freeze({__proto__:null,base36:P2,base36upper:A2});const T2=gs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),N2=gs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var R2=Object.freeze({__proto__:null,base58btc:T2,base58flickr:N2});const F2=Zt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),j2=Zt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),U2=Zt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),M2=Zt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var L2=Object.freeze({__proto__:null,base64:F2,base64pad:j2,base64url:U2,base64urlpad:M2});const Kd=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),$2=Kd.reduce((n,e,r)=>(n[r]=e,n),[]),B2=Kd.reduce((n,e,r)=>(n[e.codePointAt(0)]=r,n),[]);function z2(n){return n.reduce((e,r)=>(e+=$2[r],e),"")}function H2(n){const e=[];for(const r of n){const s=B2[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const q2=ta({prefix:"\u{1F680}",name:"base256emoji",encode:z2,decode:H2});var K2=Object.freeze({__proto__:null,base256emoji:q2}),V2=kd,Vd=128,k2=127,G2=~k2,W2=Math.pow(2,31);function kd(n,e,r){e=e||[],r=r||0;for(var s=r;n>=W2;)e[r++]=n&255|Vd,n/=128;for(;n&G2;)e[r++]=n&255|Vd,n>>>=7;return e[r]=n|0,kd.bytes=r-s+1,e}var Y2=Du,J2=128,Gd=127;function Du(n,e){var r=0,e=e||0,s=0,o=e,l,b=n.length;do{if(o>=b)throw Du.bytes=0,new RangeError("Could not decode varint");l=n[o++],r+=s<28?(l&Gd)<<s:(l&Gd)*Math.pow(2,s),s+=7}while(l>=J2);return Du.bytes=o-e,r}var X2=Math.pow(2,7),Z2=Math.pow(2,14),Q2=Math.pow(2,21),eD=Math.pow(2,28),tD=Math.pow(2,35),rD=Math.pow(2,42),iD=Math.pow(2,49),nD=Math.pow(2,56),sD=Math.pow(2,63),oD=function(n){return n<X2?1:n<Z2?2:n<Q2?3:n<eD?4:n<tD?5:n<rD?6:n<iD?7:n<nD?8:n<sD?9:10},aD={encode:V2,decode:Y2,encodingLength:oD},Wd=aD;const Yd=(n,e,r=0)=>(Wd.encode(n,e,r),e),Jd=n=>Wd.encodingLength(n),Su=(n,e)=>{const r=e.byteLength,s=Jd(n),o=s+Jd(r),l=new Uint8Array(o+r);return Yd(n,l,0),Yd(r,l,s),l.set(e,o),new cD(n,r,e,l)};class cD{constructor(e,r,s,o){this.code=e,this.size=r,this.digest=s,this.bytes=o}}const Xd=({name:n,code:e,encode:r})=>new uD(n,e,r);class uD{constructor(e,r,s){this.name=e,this.code=r,this.encode=s}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Su(this.code,r):r.then(s=>Su(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Zd=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),hD=Xd({name:"sha2-256",code:18,encode:Zd("SHA-256")}),lD=Xd({name:"sha2-512",code:19,encode:Zd("SHA-512")});var fD=Object.freeze({__proto__:null,sha256:hD,sha512:lD});const Qd=0,dD="identity",ep=Hd,pD=n=>Su(Qd,ep(n)),gD={code:Qd,name:dD,encode:ep,digest:pD};var yD=Object.freeze({__proto__:null,identity:gD});new TextEncoder,new TextDecoder;const tp=it(it(it(it(it(it(it(it(it(it({},c2),h2),f2),p2),_2),x2),C2),R2),L2),K2);it(it({},fD),yD);function rp(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function _D(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?rp(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function ip(n,e,r,s){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:r},decoder:{decode:s}}}const np=ip("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Iu=ip("ascii","a",n=>{let e="a";for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return e},n=>{n=n.substring(1);const e=_D(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}),vD=it({utf8:np,"utf-8":np,hex:tp.base16,latin1:Iu,ascii:Iu,binary:Iu},tp);function bD(n,e="utf8"){const r=vD[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?rp(globalThis.Buffer.from(n,"utf-8")):r.decoder.decode(`${r.prefix}${n}`)}const sp="wc",mD=2,Ou="core",ji=`${sp}@2:${Ou}:`,wD={name:Ou,logger:"error"},ED={database:":memory:"},DD="crypto",op="client_ed25519_seed",SD=be.ONE_DAY,ID="keychain",OD="0.3",xD="messages",PD="0.3",AD=be.SIX_HOURS,CD="publisher",ap="irn",TD="error",cp="wss://relay.walletconnect.com",up="wss://relay.walletconnect.org",ND="relayer",Ct={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},RD="_subscription",ys={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},FD=be.ONE_SECOND/2,jD="2.9.0",UD=1e4,MD="0.3",LD="WALLETCONNECT_CLIENT_ID",ii={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},$D="subscription",BD="0.3",zD=be.FIVE_SECONDS*1e3,HD="pairing",qD="0.3",_s={wc_pairingDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:be.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:be.ONE_DAY,prompt:!1,tag:0},res:{ttl:be.ONE_DAY,prompt:!1,tag:0}}},ni={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},KD="history",VD="0.3",kD="expirer",Mr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},GD="0.3",xu="verify-api",hp="https://verify.walletconnect.com";class WD{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=ID,this.version=OD,this.initialized=!1,this.storagePrefix=ji,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:l}=de("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(l)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Xf(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Zf(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class YD{constructor(e,r,s){this.core=e,this.logger=r,this.name=DD,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),l=Id(o);return Sd(l.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=yE();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const l=await this.getClientSeed(),b=Id(l),_=Qc();return await x6(_,o,SD,b)},this.generateSharedKey=(o,l,b)=>{this.isInitialized();const _=this.getPrivateKey(o),w=_E(_,l);return this.setSymKey(w,b)},this.setSymKey=async(o,l)=>{this.isInitialized();const b=l||vE(o);return await this.keychain.set(b,o),b},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,l,b)=>{this.isInitialized();const _=Vf(b),w=ds(l);if(kf(_)){const W=_.senderPublicKey,B=_.receiverPublicKey;o=await this.generateSharedKey(W,B)}const x=this.getSymKey(o),{type:A,senderPublicKey:M}=_;return mE({type:A,symKey:x,message:w,senderPublicKey:M})},this.decode=async(o,l,b)=>{this.isInitialized();const _=DE(l,b);if(kf(_)){const A=_.receiverPublicKey,M=_.senderPublicKey;o=await this.generateSharedKey(A,M)}const w=this.getSymKey(o),x=wE({symKey:w,encoded:l});return gu(x)},this.getPayloadType=o=>{const l=Mo(o);return cs(l.type)},this.getPayloadSenderPublicKey=o=>{const l=Mo(o);return l.senderPublicKey?cr(l.senderPublicKey,ur):void 0},this.core=e,this.logger=Qe.generateChildLogger(r,this.name),this.keychain=s||new WD(this.core,this.logger)}get context(){return Qe.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(op)}catch{e=Qc(),await this.keychain.set(op,e)}return bD(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class JD extends i6{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=xD,this.version=PD,this.initialized=!1,this.storagePrefix=ji,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const l=Pn(o);let b=this.messages.get(s);return typeof b>"u"&&(b={}),typeof b[l]<"u"||(b[l]=o,this.messages.set(s,b),await this.persist()),l},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const l=this.get(s),b=Pn(o);return typeof l[b]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Qe.generateChildLogger(e,this.name),this.core=r}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Xf(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Zf(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class XD extends n6{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Ur.exports.EventEmitter,this.name=CD,this.queue=new Map,this.publishTimeout=be.toMiliseconds(be.TEN_SECONDS),this.queueTimeout=be.toMiliseconds(be.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,l)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:l}});try{const b=(l==null?void 0:l.ttl)||AD,_=nu(l),w=(l==null?void 0:l.prompt)||!1,x=(l==null?void 0:l.tag)||0,A=(l==null?void 0:l.id)||bu().toString(),M={topic:s,message:o,opts:{ttl:b,relay:_,prompt:w,tag:x,id:A}},W=setTimeout(()=>this.queue.set(A,M),this.queueTimeout);try{await await Lo(this.rpcPublish(s,o,b,_,w,x,A),this.publishTimeout),clearTimeout(W),this.relayer.events.emit(Ct.publish,M)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:l}})}catch(b){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(b),b}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Qe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Qe.getLoggerContext(this.logger)}rpcPublish(e,r,s,o,l,b,_){var w,x,A,M;const W={method:$o(o.protocol).publish,params:{topic:e,message:r,ttl:s,prompt:l,tag:b},id:_};return hr((w=W.params)==null?void 0:w.prompt)&&((x=W.params)==null||delete x.prompt),hr((A=W.params)==null?void 0:A.tag)&&((M=W.params)==null||delete M.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:W}),this.relayer.request(W)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:s,opts:o}=e;await this.publish(r,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(Rn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ct.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ct.message_ack,e=>{this.onPublish(e.id.toString())})}}class ZD{constructor(){this.map=new Map,this.set=(e,r)=>{const s=this.get(e);this.exists(e,r)||this.map.set(e,[...s,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,r))return;const o=s.filter(l=>l!==r);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var QD=Object.defineProperty,eS=Object.defineProperties,tS=Object.getOwnPropertyDescriptors,lp=Object.getOwnPropertySymbols,rS=Object.prototype.hasOwnProperty,iS=Object.prototype.propertyIsEnumerable,fp=(n,e,r)=>e in n?QD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,vs=(n,e)=>{for(var r in e||(e={}))rS.call(e,r)&&fp(n,r,e[r]);if(lp)for(var r of lp(e))iS.call(e,r)&&fp(n,r,e[r]);return n},Pu=(n,e)=>eS(n,tS(e));class nS extends a6{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new ZD,this.events=new Ur.exports.EventEmitter,this.name=$D,this.version=BD,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=ji,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const l=nu(o),b={topic:s,relay:l};this.pending.set(s,b);const _=await this.rpcSubscribe(s,l);return this.onSubscribe(_,b),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),_}catch(l){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(l),l}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,l)=>{const b=new be.Watch;b.start(this.pendingSubscriptionWatchLabel);const _=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(_),b.stop(this.pendingSubscriptionWatchLabel),o(!0)),b.elapsed(this.pendingSubscriptionWatchLabel)>=zD&&(clearInterval(_),b.stop(this.pendingSubscriptionWatchLabel),l(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Qe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let s=!1;try{s=this.getSubscription(e).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,r)))}async unsubscribeById(e,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}});try{const o=nu(s);await this.rpcUnsubscribe(e,r,o);const l=jt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,l),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,r){const s={method:$o(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Lo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ct.connection_stalled)}return Pn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,s={method:$o(r.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Lo(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ct.connection_stalled)}}rpcUnsubscribe(e,r,s){const o={method:$o(s.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,r){this.setSubscription(e,Pu(vs({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,vs({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,vs({},r)),this.topicMap.set(r.topic,e),this.events.emit(ii.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(ii.deleted,Pu(vs({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ii.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ii.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);ti(r)&&this.onBatchSubscribe(r.map((s,o)=>Pu(vs({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Rn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Ct.connect,async()=>{await this.onConnect()}),this.relayer.on(Ct.disconnect,()=>{this.onDisconnect()}),this.events.on(ii.created,async e=>{const r=ii.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(ii.deleted,async e=>{const r=ii.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var sS=Object.defineProperty,dp=Object.getOwnPropertySymbols,oS=Object.prototype.hasOwnProperty,aS=Object.prototype.propertyIsEnumerable,pp=(n,e,r)=>e in n?sS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,cS=(n,e)=>{for(var r in e||(e={}))oS.call(e,r)&&pp(n,r,e[r]);if(dp)for(var r of dp(e))aS.call(e,r)&&pp(n,r,e[r]);return n};class uS extends s6{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Ur.exports.EventEmitter,this.name=ND,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Qe.generateChildLogger(e.logger,this.name):Qe.pino(Qe.getDefaultLoggerOptions({level:e.logger||TD})),this.messages=new JD(this.logger,e.core),this.subscriber=new nS(this,this.logger),this.publisher=new XD(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||cp,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${up}...`),await this.restartTransport(up)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},UD)}get context(){return Qe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,s){this.isInitialized(),await this.publisher.publish(e,r,s),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";return o||(await Promise.all([new Promise(l=>{this.subscriber.once(ii.created,b=>{b.topic===e&&l()})}),new Promise(async l=>{o=await this.subscriber.subscribe(e,r),l()})]),o)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Ct.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(ii.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,s)=>{await Lo(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>s(o)).then(()=>r()).finally(()=>this.removeListener(Ct.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(Ct.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.events.emit(Ct.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(ys.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Fi(new W6(FE({sdkVersion:jD,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:s}=e;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(e){const{topic:r,message:s}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,s):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),wu(e)){if(!e.method.endsWith(RD))return;const r=e.params,{topic:s,message:o,publishedAt:l}=r.data,b={topic:s,message:o,publishedAt:l};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(cS({type:"event",event:r.id},b)),this.events.emit(r.id,b),await this.acknowledgePayload(e),await this.onMessageEvent(b)}else ea(e)&&this.events.emit(Ct.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Ct.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=mu(e.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(ys.payload,e=>this.onProviderPayload(e)),this.provider.on(ys.connect,()=>{this.events.emit(Ct.connect)}),this.provider.on(ys.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(ys.error,e=>{this.logger.error(e),this.events.emit(Ct.error,e)})}registerEventListeners(){this.events.on(Ct.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Ct.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},be.toMiliseconds(FD))}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var hS=Object.defineProperty,gp=Object.getOwnPropertySymbols,lS=Object.prototype.hasOwnProperty,fS=Object.prototype.propertyIsEnumerable,yp=(n,e,r)=>e in n?hS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,_p=(n,e)=>{for(var r in e||(e={}))lS.call(e,r)&&yp(n,r,e[r]);if(gp)for(var r of gp(e))fS.call(e,r)&&yp(n,r,e[r]);return n};class ra extends o6{constructor(e,r,s,o=ji,l=void 0){super(e,r,s,o),this.core=e,this.logger=r,this.name=s,this.map=new Map,this.version=MD,this.cached=[],this.initialized=!1,this.storagePrefix=ji,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(b=>{this.getKey&&b!==null&&!hr(b)?this.map.set(this.getKey(b),b):i3(b)?this.map.set(b.id,b):n3(b)&&this.map.set(b.topic,b)}),this.cached=[],this.initialized=!0)},this.set=async(b,_)=>{this.isInitialized(),this.map.has(b)?await this.update(b,_):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:b,value:_}),this.map.set(b,_),await this.persist())},this.get=b=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:b}),this.getData(b)),this.getAll=b=>(this.isInitialized(),b?this.values.filter(_=>Object.keys(b).every(w=>Y6(_[w],b[w]))):this.values),this.update=async(b,_)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:b,update:_});const w=_p(_p({},this.getData(b)),_);this.map.set(b,w),await this.persist()},this.delete=async(b,_)=>{this.isInitialized(),this.map.has(b)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:b,reason:_}),this.map.delete(b),await this.persist())},this.logger=Qe.generateChildLogger(r,this.name),this.storagePrefix=o,this.getKey=l}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class dS{constructor(e,r){this.core=e,this.logger=r,this.name=HD,this.version=qD,this.events=new Tc,this.initialized=!1,this.storagePrefix=ji,this.ignoredPayloadTypes=[Zi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Qc(),o=await this.core.crypto.setSymKey(s),l=kr(be.FIVE_MINUTES),b={protocol:ap},_={topic:o,expiry:l,relay:b,active:!1},w=GE({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:b});return await this.pairings.set(o,_),await this.core.relayer.subscribe(o),this.core.expirer.set(o,l),{topic:o,uri:w}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:l,relay:b}=KE(s.uri);if(this.pairings.keys.includes(o))throw new Error(`Pairing already exists: ${o}`);if(this.core.crypto.hasKeys(o))throw new Error(`Keychain already exists: ${o}`);const _=kr(be.FIVE_MINUTES),w={topic:o,relay:b,expiry:_,active:!1};return await this.pairings.set(o,w),await this.core.crypto.setSymKey(l,o),await this.core.relayer.subscribe(o,{relay:b}),this.core.expirer.set(o,_),s.activatePairing&&await this.activate({topic:o}),w},this.activate=async({topic:s})=>{this.isInitialized();const o=kr(be.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const l=await this.sendRequest(o,"wc_pairingPing",{}),{done:b,resolve:_,reject:w}=An();this.events.once(Kt("pairing_ping",l),({error:x})=>{x?w(x):_()}),await b()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",jt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,l)=>{const b=Zo(o,l),_=await this.core.crypto.encode(s,b),w=_s[o].req;return this.core.history.set(s,b),this.core.relayer.publish(s,_,w),b.id},this.sendResult=async(s,o,l)=>{const b=mu(s,l),_=await this.core.crypto.encode(o,b),w=await this.core.history.get(o,s),x=_s[w.request.method].res;await this.core.relayer.publish(o,_,x),await this.core.history.resolve(b)},this.sendError=async(s,o,l)=>{const b=Qo(s,l),_=await this.core.crypto.encode(o,b),w=await this.core.history.get(o,s),x=_s[w.request.method]?_s[w.request.method].res:_s.unregistered_method.res;await this.core.relayer.publish(o,_,x),await this.core.history.resolve(b)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,jt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>Ti(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:l}=s,b=l.method;if(this.pairings.keys.includes(o))switch(b){case"wc_pairingPing":return this.onPairingPingRequest(o,l);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,l);default:return this.onUnknownRpcMethodRequest(o,l)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:l}=s,b=(await this.core.history.get(o,l.id)).request.method;if(this.pairings.keys.includes(o))switch(b){case"wc_pairingPing":return this.onPairingPingResponse(o,l);default:return this.onUnknownRpcMethodResponse(b)}},this.onPairingPingRequest=async(s,o)=>{const{id:l}=o;try{this.isValidPing({topic:s}),await this.sendResult(l,s,!0),this.events.emit("pairing_ping",{id:l,topic:s})}catch(b){await this.sendError(l,s,b),this.logger.error(b)}},this.onPairingPingResponse=(s,o)=>{const{id:l}=o;setTimeout(()=>{_i(o)?this.events.emit(Kt("pairing_ping",l),{}):Gr(o)&&this.events.emit(Kt("pairing_ping",l),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:l}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:l,topic:s})}catch(b){await this.sendError(l,s,b),this.logger.error(b)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:l,method:b}=o;try{if(this.registeredMethods.includes(b))return;const _=jt("WC_METHOD_UNSUPPORTED",b);await this.sendError(l,s,_),this.logger.error(_)}catch(_){await this.sendError(l,s,_),this.logger.error(_)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(jt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!vr(s)){const{message:o}=de("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(o)}if(!r3(s.uri)){const{message:o}=de("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(o)}},this.isValidPing=async s=>{if(!vr(s)){const{message:l}=de("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(l)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!vr(s)){const{message:l}=de("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(l)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Yt(s,!1)){const{message:o}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(Ti(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=de("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Qe.generateChildLogger(r,this.name),this.pairings=new ra(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ct.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(r,s);wu(o)?(this.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):ea(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:r,payload:o}),this.core.history.delete(r,o.id))})}registerExpirerEvents(){this.core.expirer.on(Mr.expired,async e=>{const{topic:r}=ed(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class pS extends r6{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Ur.exports.EventEmitter,this.name=KD,this.version=VD,this.cached=[],this.initialized=!1,this.storagePrefix=ji,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,l)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:l}),this.records.has(o.id))return;const b={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:l,expiry:kr(be.THIRTY_DAYS)};this.records.set(b.id,b),this.events.emit(ni.created,b)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Gr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(ni.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(l=>{if(l.topic===s){if(typeof o<"u"&&l.id!==o)return;this.records.delete(l.id),this.events.emit(ni.deleted,l)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:Zo(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ni.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ni.created,e=>{const r=ni.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ni.updated,e=>{const r=ni.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(ni.deleted,e=>{const r=ni.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Rn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{be.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class gS extends c6{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Ur.exports.EventEmitter,this.name=kD,this.version=GD,this.cached=[],this.initialized=!1,this.storagePrefix=ji,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const l=this.formatTarget(s),b={target:l,expiry:o};this.expirations.set(l,b),this.checkExpiry(l,b),this.events.emit(Mr.created,{target:l,expiration:b})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),l=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Mr.deleted,{target:o,expiration:l})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Qe.generateChildLogger(r,this.name)}get context(){return Qe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return jE(e);if(typeof e=="number")return UE(e);const{message:r}=de("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Mr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=de("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:s}=de("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(e,r){const{expiry:s}=r;be.toMiliseconds(s)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Mr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Rn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Mr.created,e=>{const r=Mr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mr.expired,e=>{const r=Mr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Mr.deleted,e=>{const r=Mr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}}class yS extends u6{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=xu,this.initialized=!1,this.init=async s=>{Jf()||!tu()||(this.verifyUrl=(s==null?void 0:s.verifyUrl)||hp,await this.createIframe())},this.register=async s=>{var o;if(this.initialized||await this.init(),!!this.iframe)try{(o=this.iframe.contentWindow)==null||o.postMessage(s.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${s.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async s=>{var o;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${s.attestationId}`);const l=this.startAbortTimer(be.FIVE_SECONDS),b=await fetch(`${this.verifyUrl}/attestation/${s.attestationId}`,{signal:this.abortController.signal});return clearTimeout(l),b.status===200?(o=await b.json())==null?void 0:o.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((s,o)=>{if(document.getElementById(xu))return s();const l=document.createElement("iframe");l.setAttribute("id",xu),l.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),l.style.display="none",l.addEventListener("load",()=>{this.initialized=!0,s()}),l.addEventListener("error",b=>{o(b)}),document.body.append(l),this.iframe=l}),new Promise(s=>{setTimeout(()=>s("iframe load timeout"),be.toMiliseconds(be.ONE_SECOND/2))})])}catch(s){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(s)}},this.logger=Qe.generateChildLogger(r,this.name),this.verifyUrl=hp,this.abortController=new AbortController,this.isDevEnv=eu()&&{}.IS_VITEST}get context(){return Qe.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),be.toMiliseconds(e))}}var _S=Object.defineProperty,vp=Object.getOwnPropertySymbols,vS=Object.prototype.hasOwnProperty,bS=Object.prototype.propertyIsEnumerable,bp=(n,e,r)=>e in n?_S(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,mp=(n,e)=>{for(var r in e||(e={}))vS.call(e,r)&&bp(n,r,e[r]);if(vp)for(var r of vp(e))bS.call(e,r)&&bp(n,r,e[r]);return n};class Au extends t6{constructor(e){super(e),this.protocol=sp,this.version=mD,this.name=Ou,this.events=new Ur.exports.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||cp;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||wD.logger}));this.logger=Qe.generateChildLogger(r,this.name),this.heartbeat=new Rn.HeartBeat,this.crypto=new YD(this,this.logger,e==null?void 0:e.keychain),this.history=new pS(this,this.logger),this.expirer=new gS(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new C3(mp(mp({},ED),e==null?void 0:e.storageOptions)),this.relayer=new uS({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new dS(this,this.logger),this.verify=new yS(this.projectId||"",this.logger)}static async init(e){const r=new Au(e);await r.initialize();const s=await r.crypto.getClientId();return await r.storage.setItem(LD,s),r}get context(){return Qe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const mS=Au,wp="wc",Ep=2,Dp="client",Cu=`${wp}@${Ep}:${Dp}:`,Tu={name:Dp,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},wS="WALLETCONNECT_DEEPLINK_CHOICE",ES="proposal",Sp="Proposal expired",DS="session",ia=be.SEVEN_DAYS,SS="engine",bs={wc_sessionPropose:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1104},res:{ttl:be.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1106},res:{ttl:be.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1112},res:{ttl:be.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1115}}},Nu={min:be.FIVE_MINUTES,max:be.SEVEN_DAYS},IS="request",OS=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var xS=Object.defineProperty,PS=Object.defineProperties,AS=Object.getOwnPropertyDescriptors,Ip=Object.getOwnPropertySymbols,CS=Object.prototype.hasOwnProperty,TS=Object.prototype.propertyIsEnumerable,Op=(n,e,r)=>e in n?xS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Lr=(n,e)=>{for(var r in e||(e={}))CS.call(e,r)&&Op(n,r,e[r]);if(Ip)for(var r of Ip(e))TS.call(e,r)&&Op(n,r,e[r]);return n},Ru=(n,e)=>PS(n,AS(e));class NS extends l6{constructor(e){super(e),this.name=SS,this.events=new Tc,this.initialized=!1,this.ignoredPayloadTypes=[Zi],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(bs)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const s=Ru(Lr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:l,optionalNamespaces:b,sessionProperties:_,relays:w}=s;let x=o,A,M=!1;if(x&&(M=this.client.core.pairing.pairings.get(x).active),!x||!M){const{topic:z,uri:C}=await this.client.core.pairing.create();x=z,A=C}const W=await this.client.core.crypto.generateKeyPair(),B=Lr({requiredNamespaces:l,optionalNamespaces:b,relays:w!=null?w:[{protocol:ap}],proposer:{publicKey:W,metadata:this.client.metadata}},_&&{sessionProperties:_}),{reject:N,resolve:te,done:X}=An(be.FIVE_MINUTES,Sp);if(this.events.once(Kt("session_connect"),async({error:z,session:C})=>{if(z)N(z);else if(C){C.self.publicKey=W;const R=Ru(Lr({},C),{requiredNamespaces:C.requiredNamespaces,optionalNamespaces:C.optionalNamespaces});await this.client.session.set(C.topic,R),await this.setExpiry(C.topic,C.expiry),x&&await this.client.core.pairing.updateMetadata({topic:x,metadata:C.peer.metadata}),te(R)}}),!x){const{message:z}=de("NO_MATCHING_KEY",`connect() pairing topic: ${x}`);throw new Error(z)}const ae=await this.sendRequest(x,"wc_sessionPropose",B),L=kr(be.FIVE_MINUTES);return await this.setProposal(ae,Lr({id:ae,expiry:L},B)),{uri:A,approval:X}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:o,namespaces:l,sessionProperties:b}=r,_=this.client.proposal.get(s);let{pairingTopic:w,proposer:x,requiredNamespaces:A,optionalNamespaces:M}=_;w=w||"",Tn(A)||(A=XE(l,"approve()"));const W=await this.client.core.crypto.generateKeyPair(),B=x.publicKey,N=await this.client.core.crypto.generateSharedKey(W,B);w&&s&&(await this.client.core.pairing.updateMetadata({topic:w,metadata:x.metadata}),await this.sendResult(s,w,{relay:{protocol:o!=null?o:"irn"},responderPublicKey:W}),await this.client.proposal.delete(s,jt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:w}));const te=Lr({relay:{protocol:o!=null?o:"irn"},namespaces:l,requiredNamespaces:A,optionalNamespaces:M,pairingTopic:w,controller:{publicKey:W,metadata:this.client.metadata},expiry:kr(ia)},b&&{sessionProperties:b});await this.client.core.relayer.subscribe(N),await this.sendRequest(N,"wc_sessionSettle",te);const X=Ru(Lr({},te),{topic:N,pairingTopic:w,acknowledged:!1,self:te.controller,peer:{publicKey:x.publicKey,metadata:x.metadata},controller:W});return await this.client.session.set(N,X),await this.setExpiry(N,kr(ia)),{topic:N,acknowledged:()=>new Promise(ae=>setTimeout(()=>ae(this.client.session.get(N)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:s,reason:o}=r,{pairingTopic:l}=this.client.proposal.get(s);l&&(await this.sendError(s,l,o),await this.client.proposal.delete(s,jt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:o}=r,l=await this.sendRequest(s,"wc_sessionUpdate",{namespaces:o}),{done:b,resolve:_,reject:w}=An();return this.events.once(Kt("session_update",l),({error:x})=>{x?w(x):_()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:b}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,o=await this.sendRequest(s,"wc_sessionExtend",{}),{done:l,resolve:b,reject:_}=An();return this.events.once(Kt("session_extend",o),({error:w})=>{w?_(w):b()}),await this.setExpiry(s,kr(ia)),{acknowledged:l}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:o,topic:l,expiry:b}=r,_=await this.sendRequest(l,"wc_sessionRequest",{request:o,chainId:s},b),{done:w,resolve:x,reject:A}=An(b);this.events.once(Kt("session_request",_),({error:W,result:B})=>{W?A(W):x(B)}),this.client.events.emit("session_request_sent",{topic:l,request:o,chainId:s,id:_});const M=await this.client.core.storage.getItem(wS);return ME({id:_,topic:l,wcDeepLink:M}),await w()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:o}=r,{id:l}=o;_i(o)?await this.sendResult(l,s,o.result):Gr(o)&&await this.sendError(l,s,o.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=await this.sendRequest(s,"wc_sessionPing",{}),{done:l,resolve:b,reject:_}=An();this.events.once(Kt("session_ping",o),({error:w})=>{w?_(w):b()}),await l()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:o,chainId:l}=r;await this.sendRequest(s,"wc_sessionEvent",{event:o,chainId:l})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const o=bu().toString();let l;const b=_=>{(_==null?void 0:_.id.toString())===o&&(this.client.core.relayer.events.removeListener(Ct.message_ack,b),l())};await Promise.all([new Promise(_=>{l=_,this.client.core.relayer.on(Ct.message_ack,b)}),this.sendRequest(s,"wc_sessionDelete",jt("USER_DISCONNECTED"),void 0,o)]),await this.deleteSession(s)}else await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>e3(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(l=>{var b,_;return((b=l.peerMetadata)==null?void 0:b.url)&&((_=l.peerMetadata)==null?void 0:_.url)===r.peer.metadata.url&&l.topic&&l.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(l=>this.client.core.pairing.disconnect({topic:l.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,jt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r)},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,jt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),o?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=bs.wc_sessionRequest.req.ttl,{id:o,topic:l,params:b}=r;await this.client.pendingRequest.set(o,{id:o,topic:l,params:b}),s&&this.client.core.expirer.set(o,kr(s))},this.sendRequest=async(r,s,o,l,b)=>{const _=Zo(s,o);if(tu()&&OS.includes(s)){const A=Pn(JSON.stringify(_));await this.client.core.verify.register({attestationId:A})}const w=await this.client.core.crypto.encode(r,_),x=bs[s].req;return l&&(x.ttl=l),b&&(x.id=b),this.client.core.history.set(r,_),this.client.core.relayer.publish(r,w,x),_.id},this.sendResult=async(r,s,o)=>{const l=mu(r,o),b=await this.client.core.crypto.encode(s,l),_=await this.client.core.history.get(s,r),w=bs[_.request.method].res;this.client.core.relayer.publish(s,b,w),await this.client.core.history.resolve(l)},this.sendError=async(r,s,o)=>{const l=Qo(r,o),b=await this.client.core.crypto.encode(s,l),_=await this.client.core.history.get(s,r),w=bs[_.request.method].res;this.client.core.relayer.publish(s,b,w),await this.client.core.history.resolve(l)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(o=>{Ti(o.expiry)&&r.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Ti(o.expiry)&&s.push(o.id)}),await Promise.all([...r.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=r=>{const{topic:s,payload:o}=r,l=o.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:o}=r,l=(await this.client.core.history.get(s,o.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${l}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:s}=r,{message:o}=de("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(r,s)=>{const{params:o,id:l}=s;try{this.isValidConnect(Lr({},s.params));const b=kr(be.FIVE_MINUTES),_=Lr({id:l,pairingTopic:r,expiry:b},o);await this.setProposal(l,_);const w=Pn(JSON.stringify(s)),x=await this.getVerifyContext(w,_.proposer.metadata);this.client.events.emit("session_proposal",{id:l,params:_,verifyContext:x})}catch(b){await this.sendError(l,r,b),this.client.logger.error(b)}},this.onSessionProposeResponse=async(r,s)=>{const{id:o}=s;if(_i(s)){const{result:l}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});const b=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:b});const _=b.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:_});const w=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:w});const x=await this.client.core.crypto.generateSharedKey(_,w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:x});const A=await this.client.core.relayer.subscribe(x);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:A}),await this.client.core.pairing.activate({topic:r})}else Gr(s)&&(await this.client.proposal.delete(o,jt("USER_DISCONNECTED")),this.events.emit(Kt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:o,params:l}=s;try{this.isValidSessionSettleRequest(l);const{relay:b,controller:_,expiry:w,namespaces:x,requiredNamespaces:A,optionalNamespaces:M,sessionProperties:W,pairingTopic:B}=s.params,N=Lr({topic:r,relay:b,expiry:w,namespaces:x,acknowledged:!0,pairingTopic:B,requiredNamespaces:A,optionalNamespaces:M,controller:_.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:_.publicKey,metadata:_.metadata}},W&&{sessionProperties:W});await this.sendResult(s.id,r,!0),this.events.emit(Kt("session_connect"),{session:N}),this.cleanupDuplicatePairings(N)}catch(b){await this.sendError(o,r,b),this.client.logger.error(b)}},this.onSessionSettleResponse=async(r,s)=>{const{id:o}=s;_i(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Kt("session_approve",o),{})):Gr(s)&&(await this.client.session.delete(r,jt("USER_DISCONNECTED")),this.events.emit(Kt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:o,id:l}=s;try{this.isValidUpdate(Lr({topic:r},o)),await this.client.session.update(r,{namespaces:o.namespaces}),await this.sendResult(l,r,!0),this.client.events.emit("session_update",{id:l,topic:r,params:o})}catch(b){await this.sendError(l,r,b),this.client.logger.error(b)}},this.onSessionUpdateResponse=(r,s)=>{const{id:o}=s;_i(s)?this.events.emit(Kt("session_update",o),{}):Gr(s)&&this.events.emit(Kt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:o}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,kr(ia)),await this.sendResult(o,r,!0),this.client.events.emit("session_extend",{id:o,topic:r})}catch(l){await this.sendError(o,r,l),this.client.logger.error(l)}},this.onSessionExtendResponse=(r,s)=>{const{id:o}=s;_i(s)?this.events.emit(Kt("session_extend",o),{}):Gr(s)&&this.events.emit(Kt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:o}=s;try{this.isValidPing({topic:r}),await this.sendResult(o,r,!0),this.client.events.emit("session_ping",{id:o,topic:r})}catch(l){await this.sendError(o,r,l),this.client.logger.error(l)}},this.onSessionPingResponse=(r,s)=>{const{id:o}=s;setTimeout(()=>{_i(s)?this.events.emit(Kt("session_ping",o),{}):Gr(s)&&this.events.emit(Kt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(l=>{this.client.core.relayer.once(Ct.publish,async()=>{l(await this.deleteSession(r))})}),this.sendResult(o,r,!0)]),this.client.events.emit("session_delete",{id:o,topic:r})}catch(l){this.client.logger.error(l)}},this.onSessionRequest=async(r,s)=>{const{id:o,params:l}=s;try{this.isValidRequest(Lr({topic:r},l)),await this.setPendingSessionRequest({id:o,topic:r,params:l});const b=Pn(JSON.stringify(s)),_=this.client.session.get(r),w=await this.getVerifyContext(b,_.peer.metadata);this.client.events.emit("session_request",{id:o,topic:r,params:l,verifyContext:w})}catch(b){await this.sendError(o,r,b),this.client.logger.error(b)}},this.onSessionRequestResponse=(r,s)=>{const{id:o}=s;_i(s)?this.events.emit(Kt("session_request",o),{result:s.result}):Gr(s)&&this.events.emit(Kt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:o,params:l}=s;try{this.isValidEmit(Lr({topic:r},l)),this.client.events.emit("session_event",{id:o,topic:r,params:l})}catch(b){await this.sendError(o,r,b),this.client.logger.error(b)}},this.isValidConnect=async r=>{if(!vr(r)){const{message:w}=de("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(w)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:l,sessionProperties:b,relays:_}=r;if(hr(s)||await this.isValidPairingTopic(s),!f3(_,!0)){const{message:w}=de("MISSING_OR_INVALID",`connect() relays: ${_}`);throw new Error(w)}!hr(o)&&Tn(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!hr(l)&&Tn(l)!==0&&this.validateNamespaces(l,"optionalNamespaces"),hr(b)||this.validateSessionProps(b,"sessionProperties")},this.validateNamespaces=(r,s)=>{const o=l3(r,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async r=>{if(!vr(r))throw new Error(de("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:o,relayProtocol:l,sessionProperties:b}=r;await this.isValidProposalId(s);const _=this.client.proposal.get(s),w=Ho(o,"approve()");if(w)throw new Error(w.message);const x=ad(_.requiredNamespaces,o,"approve()");if(x)throw new Error(x.message);if(!Yt(l,!0)){const{message:A}=de("MISSING_OR_INVALID",`approve() relayProtocol: ${l}`);throw new Error(A)}hr(b)||this.validateSessionProps(b,"sessionProperties")},this.isValidReject=async r=>{if(!vr(r)){const{message:l}=de("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(l)}const{id:s,reason:o}=r;if(await this.isValidProposalId(s),!p3(o)){const{message:l}=de("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(l)}},this.isValidSessionSettleRequest=r=>{if(!vr(r)){const{message:x}=de("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(x)}const{relay:s,controller:o,namespaces:l,expiry:b}=r;if(!sd(s)){const{message:x}=de("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(x)}const _=s3(o,"onSessionSettleRequest()");if(_)throw new Error(_.message);const w=Ho(l,"onSessionSettleRequest()");if(w)throw new Error(w.message);if(Ti(b)){const{message:x}=de("EXPIRED","onSessionSettleRequest()");throw new Error(x)}},this.isValidUpdate=async r=>{if(!vr(r)){const{message:w}=de("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(w)}const{topic:s,namespaces:o}=r;await this.isValidSessionTopic(s);const l=this.client.session.get(s),b=Ho(o,"update()");if(b)throw new Error(b.message);const _=ad(l.requiredNamespaces,o,"update()");if(_)throw new Error(_.message)},this.isValidExtend=async r=>{if(!vr(r)){const{message:o}=de("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!vr(r)){const{message:w}=de("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(w)}const{topic:s,request:o,chainId:l,expiry:b}=r;await this.isValidSessionTopic(s);const{namespaces:_}=this.client.session.get(s);if(!od(_,l)){const{message:w}=de("MISSING_OR_INVALID",`request() chainId: ${l}`);throw new Error(w)}if(!g3(o)){const{message:w}=de("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(w)}if(!v3(_,l,o.method)){const{message:w}=de("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(w)}if(b&&!E3(b,Nu)){const{message:w}=de("MISSING_OR_INVALID",`request() expiry: ${b}. Expiry must be a number (in seconds) between ${Nu.min} and ${Nu.max}`);throw new Error(w)}},this.isValidRespond=async r=>{if(!vr(r)){const{message:l}=de("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(l)}const{topic:s,response:o}=r;if(await this.isValidSessionTopic(s),!y3(o)){const{message:l}=de("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(l)}},this.isValidPing=async r=>{if(!vr(r)){const{message:o}=de("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!vr(r)){const{message:_}=de("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(_)}const{topic:s,event:o,chainId:l}=r;await this.isValidSessionTopic(s);const{namespaces:b}=this.client.session.get(s);if(!od(b,l)){const{message:_}=de("MISSING_OR_INVALID",`emit() chainId: ${l}`);throw new Error(_)}if(!_3(o)){const{message:_}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(_)}if(!b3(b,l,o.name)){const{message:_}=de("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(_)}},this.isValidDisconnect=async r=>{if(!vr(r)){const{message:o}=de("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const o={verified:{verifyUrl:s.verifyUrl||"",validation:"UNKNOWN",origin:s.url||""}};try{const l=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});l&&(o.verified.origin=l,o.verified.validation=l===s.url?"VALID":"INVALID")}catch(l){this.client.logger.error(l)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(o=>{if(!Yt(o,!1)){const{message:l}=de("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(l)}})}}isInitialized(){if(!this.initialized){const{message:e}=de("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Ct.message,async e=>{const{topic:r,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(r,s);wu(o)?(this.client.core.history.set(r,o),this.onRelayEventRequest({topic:r,payload:o})):ea(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:r,payload:o}),this.client.core.history.delete(r,o.id)):this.onRelayEventUnknownPayload({topic:r,payload:o})})}registerExpirerEvents(){this.client.core.expirer.on(Mr.expired,async e=>{const{topic:r,id:s}=ed(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,de("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(e){if(!Yt(e,!1)){const{message:r}=de("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Ti(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=de("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Yt(e,!1)){const{message:r}=de("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Ti(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=de("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Yt(e,!1)){const{message:r}=de("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=de("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!d3(e)){const{message:r}=de("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=de("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Ti(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=de("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class RS extends ra{constructor(e,r){super(e,r,ES,Cu),this.core=e,this.logger=r}}class FS extends ra{constructor(e,r){super(e,r,DS,Cu),this.core=e,this.logger=r}}class jS extends ra{constructor(e,r){super(e,r,IS,Cu,s=>s.id),this.core=e,this.logger=r}}class Fu extends h6{constructor(e){super(e),this.protocol=wp,this.version=Ep,this.name=Tu.name,this.events=new Ur.exports.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||Tu.name,this.metadata=(e==null?void 0:e.metadata)||CE();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Tu.logger}));this.core=(e==null?void 0:e.core)||new mS(e),this.logger=Qe.generateChildLogger(r,this.name),this.session=new FS(this.core,this.logger),this.proposal=new RS(this.core,this.logger),this.pendingRequest=new jS(this.core,this.logger),this.engine=new NS(this)}static async init(e){const r=new Fu(e);return await r.initialize(),r}get context(){return Qe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var ju={exports:{}};(function(n,e){var r=typeof self!="undefined"?self:mt,s=function(){function l(){this.fetch=!1,this.DOMException=r.DOMException}return l.prototype=r,new l}();(function(l){(function(b){var _={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function w(d){return d&&DataView.prototype.isPrototypeOf(d)}if(_.arrayBuffer)var x=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],A=ArrayBuffer.isView||function(d){return d&&x.indexOf(Object.prototype.toString.call(d))>-1};function M(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function W(d){return typeof d!="string"&&(d=String(d)),d}function B(d){var f={next:function(){var O=d.shift();return{done:O===void 0,value:O}}};return _.iterable&&(f[Symbol.iterator]=function(){return f}),f}function N(d){this.map={},d instanceof N?d.forEach(function(f,O){this.append(O,f)},this):Array.isArray(d)?d.forEach(function(f){this.append(f[0],f[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(f){this.append(f,d[f])},this)}N.prototype.append=function(d,f){d=M(d),f=W(f);var O=this.map[d];this.map[d]=O?O+", "+f:f},N.prototype.delete=function(d){delete this.map[M(d)]},N.prototype.get=function(d){return d=M(d),this.has(d)?this.map[d]:null},N.prototype.has=function(d){return this.map.hasOwnProperty(M(d))},N.prototype.set=function(d,f){this.map[M(d)]=W(f)},N.prototype.forEach=function(d,f){for(var O in this.map)this.map.hasOwnProperty(O)&&d.call(f,this.map[O],O,this)},N.prototype.keys=function(){var d=[];return this.forEach(function(f,O){d.push(O)}),B(d)},N.prototype.values=function(){var d=[];return this.forEach(function(f){d.push(f)}),B(d)},N.prototype.entries=function(){var d=[];return this.forEach(function(f,O){d.push([O,f])}),B(d)},_.iterable&&(N.prototype[Symbol.iterator]=N.prototype.entries);function te(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function X(d){return new Promise(function(f,O){d.onload=function(){f(d.result)},d.onerror=function(){O(d.error)}})}function ae(d){var f=new FileReader,O=X(f);return f.readAsArrayBuffer(d),O}function L(d){var f=new FileReader,O=X(f);return f.readAsText(d),O}function z(d){for(var f=new Uint8Array(d),O=new Array(f.length),j=0;j<f.length;j++)O[j]=String.fromCharCode(f[j]);return O.join("")}function C(d){if(d.slice)return d.slice(0);var f=new Uint8Array(d.byteLength);return f.set(new Uint8Array(d)),f.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:_.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:_.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:_.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():_.arrayBuffer&&_.blob&&w(d)?(this._bodyArrayBuffer=C(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):_.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||A(d))?this._bodyArrayBuffer=C(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var d=te(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?te(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ae)}),this.text=function(){var d=te(this);if(d)return d;if(this._bodyBlob)return L(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(z(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(re)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function h(d){var f=d.toUpperCase();return F.indexOf(f)>-1?f:d}function m(d,f){f=f||{};var O=f.body;if(d instanceof m){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,f.headers||(this.headers=new N(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!O&&d._bodyInit!=null&&(O=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=f.credentials||this.credentials||"same-origin",(f.headers||!this.headers)&&(this.headers=new N(f.headers)),this.method=h(f.method||this.method||"GET"),this.mode=f.mode||this.mode||null,this.signal=f.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(O)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})};function re(d){var f=new FormData;return d.trim().split("&").forEach(function(O){if(O){var j=O.split("="),q=j.shift().replace(/\+/g," "),I=j.join("=").replace(/\+/g," ");f.append(decodeURIComponent(q),decodeURIComponent(I))}}),f}function u(d){var f=new N,O=d.replace(/\r?\n[\t ]+/g," ");return O.split(/\r?\n/).forEach(function(j){var q=j.split(":"),I=q.shift().trim();if(I){var G=q.join(":").trim();f.append(I,G)}}),f}R.call(m.prototype);function g(d,f){f||(f={}),this.type="default",this.status=f.status===void 0?200:f.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in f?f.statusText:"OK",this.headers=new N(f.headers),this.url=f.url||"",this._initBody(d)}R.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new N(this.headers),url:this.url})},g.error=function(){var d=new g(null,{status:0,statusText:""});return d.type="error",d};var y=[301,302,303,307,308];g.redirect=function(d,f){if(y.indexOf(f)===-1)throw new RangeError("Invalid status code");return new g(null,{status:f,headers:{location:d}})},b.DOMException=l.DOMException;try{new b.DOMException}catch{b.DOMException=function(f,O){this.message=f,this.name=O;var j=Error(f);this.stack=j.stack},b.DOMException.prototype=Object.create(Error.prototype),b.DOMException.prototype.constructor=b.DOMException}function E(d,f){return new Promise(function(O,j){var q=new m(d,f);if(q.signal&&q.signal.aborted)return j(new b.DOMException("Aborted","AbortError"));var I=new XMLHttpRequest;function G(){I.abort()}I.onload=function(){var Q={status:I.status,statusText:I.statusText,headers:u(I.getAllResponseHeaders()||"")};Q.url="responseURL"in I?I.responseURL:Q.headers.get("X-Request-URL");var ee="response"in I?I.response:I.responseText;O(new g(ee,Q))},I.onerror=function(){j(new TypeError("Network request failed"))},I.ontimeout=function(){j(new TypeError("Network request failed"))},I.onabort=function(){j(new b.DOMException("Aborted","AbortError"))},I.open(q.method,q.url,!0),q.credentials==="include"?I.withCredentials=!0:q.credentials==="omit"&&(I.withCredentials=!1),"responseType"in I&&_.blob&&(I.responseType="blob"),q.headers.forEach(function(Q,ee){I.setRequestHeader(ee,Q)}),q.signal&&(q.signal.addEventListener("abort",G),I.onreadystatechange=function(){I.readyState===4&&q.signal.removeEventListener("abort",G)}),I.send(typeof q._bodyInit=="undefined"?null:q._bodyInit)})}return E.polyfill=!0,l.fetch||(l.fetch=E,l.Headers=N,l.Request=m,l.Response=g),b.Headers=N,b.Request=m,b.Response=g,b.fetch=E,Object.defineProperty(b,"__esModule",{value:!0}),b})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,n.exports=e})(ju,ju.exports);var xp=Ib(ju.exports);const US={Accept:"application/json","Content-Type":"application/json"},MS="POST",Pp={headers:US,method:MS},Ap=10;class rn{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Ur.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!Md(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const s=ds(e),l=await(await xp(this.url,Object.assign(Object.assign({},Pp),{body:s}))).json();this.onPayload({data:l})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!Md(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,o)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),o(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable=="undefined")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=ds({id:1,jsonrpc:"2.0",method:"test",params:[]});await xp(e,Object.assign(Object.assign({},Pp),{body:r}))}this.onOpen()}catch(r){const s=this.parseError(r);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data=="undefined")return;const r=typeof e.data=="string"?gu(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const s=this.parseError(r),o=s.message||s.toString(),l=Qo(e,o);this.events.emit("payload",l)}parseError(e,r=this.url){return Ad(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Ap&&this.events.setMaxListeners(Ap)}}const Cp="error",LS="wss://relay.walletconnect.com",$S="wc",BS="universal_provider",Tp=`${$S}@2:${BS}:`,zS="https://rpc.walletconnect.com/v1",Ui={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Uu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,e){(function(){var r,s="4.17.21",o=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",b="Expected a function",_="Invalid `variable` option passed into `_.template`",w="__lodash_hash_undefined__",x=500,A="__lodash_placeholder__",M=1,W=2,B=4,N=1,te=2,X=1,ae=2,L=4,z=8,C=16,R=32,F=64,h=128,m=256,re=512,u=30,g="...",y=800,E=16,d=1,f=2,O=3,j=1/0,q=9007199254740991,I=17976931348623157e292,G=0/0,Q=4294967295,ee=Q-1,ne=Q>>>1,ye=[["ary",h],["bind",X],["bindKey",ae],["curry",z],["curryRight",C],["flip",re],["partial",R],["partialRight",F],["rearg",m]],le="[object Arguments]",Ce="[object Array]",J="[object AsyncFunction]",Y="[object Boolean]",H="[object Date]",p="[object DOMException]",U="[object Error]",he="[object Function]",pe="[object GeneratorFunction]",Se="[object Map]",He="[object Number]",Ve="[object Null]",Me="[object Object]",gt="[object Promise]",yt="[object Proxy]",$e="[object RegExp]",Ie="[object Set]",Re="[object String]",Fe="[object Symbol]",Be="[object Undefined]",xe="[object WeakMap]",je="[object WeakSet]",De="[object ArrayBuffer]",Pe="[object DataView]",qe="[object Float32Array]",Oe="[object Float64Array]",ke="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",rr="[object Uint16Array]",lr="[object Uint32Array]",Wr=/\b__p \+= '';/g,ir=/\b(__p \+=) '' \+/g,si=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vi=/&(?:amp|lt|gt|quot|#39);/g,Mi=/[&<>"']/g,Dt=RegExp(vi.source),_t=RegExp(Mi.source),St=/<%-([\s\S]+?)%>/g,It=/<%([\s\S]+?)%>/g,wt=/<%=([\s\S]+?)%>/g,vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mt=/^\w*$/,Lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ot=/[\\^$.*+?()[\]{}|]/g,$t=RegExp(Ot.source),xt=/^\s+/,Tt=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,Bt=/,? & /,zt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,aa=/[()=,{}\[\]\/\s]/,ca=/\\(\\)?/g,ua=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xr=/\w*$/,ha=/^[-+]0x[0-9a-f]+$/i,la=/^0b[01]+$/i,fa=/^\[object .+?Constructor\]$/,da=/^0o[0-7]+$/i,pa=/^(?:0|[1-9]\d*)$/,oi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,nn=/($^)/,ga=/['\n\r\u2028\u2029\\]/g,sn="\\ud800-\\udfff",ya="\\u0300-\\u036f",_a="\\ufe20-\\ufe2f",on="\\u20d0-\\u20ff",Es=ya+_a+on,Ds="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",va="\\xac\\xb1\\xd7\\xf7",ba="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ma="\\u2000-\\u206f",wa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ss="A-Z\\xc0-\\xd6\\xd8-\\xde",Is="\\ufe0e\\ufe0f",Li=va+ba+ma+wa,Ln="['\u2019]",$i="["+sn+"]",$n="["+Li+"]",Bi="["+Es+"]",Os="\\d+",Ea="["+Ds+"]",xs="["+Br+"]",Ps="[^"+sn+Li+Os+Ds+Br+Ss+"]",an="\\ud83c[\\udffb-\\udfff]",Da="(?:"+Bi+"|"+an+")",As="[^"+sn+"]",cn="(?:\\ud83c[\\udde6-\\uddff]){2}",bi="[\\ud800-\\udbff][\\udc00-\\udfff]",mr="["+Ss+"]",Cs="\\u200d",Ts="(?:"+xs+"|"+Ps+")",Yr="(?:"+mr+"|"+Ps+")",Ns="(?:"+Ln+"(?:d|ll|m|re|s|t|ve))?",Rs="(?:"+Ln+"(?:D|LL|M|RE|S|T|VE))?",Fs=Da+"?",js="["+Is+"]?",Sa="(?:"+Cs+"(?:"+[As,cn,bi].join("|")+")"+js+Fs+")*",ai="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Us="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ms=js+Fs+Sa,un="(?:"+[Ea,cn,bi].join("|")+")"+Ms,Ia="(?:"+[As+Bi+"?",Bi,cn,bi,$i].join("|")+")",Bn=RegExp(Ln,"g"),Oa=RegExp(Bi,"g"),hn=RegExp(an+"(?="+an+")|"+Ia+Ms,"g"),Ls=RegExp([mr+"?"+xs+"+"+Ns+"(?="+[$n,mr,"$"].join("|")+")",Yr+"+"+Rs+"(?="+[$n,mr+Ts,"$"].join("|")+")",mr+"?"+Ts+"+"+Ns,mr+"+"+Rs,Us,ai,Os,un].join("|"),"g"),$s=RegExp("["+Cs+sn+Es+Is+"]"),zi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xa=-1,at={};at[qe]=at[Oe]=at[ke]=at[We]=at[et]=at[tt]=at[Je]=at[rr]=at[lr]=!0,at[le]=at[Ce]=at[De]=at[Y]=at[Pe]=at[H]=at[U]=at[he]=at[Se]=at[He]=at[Me]=at[$e]=at[Ie]=at[Re]=at[xe]=!1;var ot={};ot[le]=ot[Ce]=ot[De]=ot[Pe]=ot[Y]=ot[H]=ot[qe]=ot[Oe]=ot[ke]=ot[We]=ot[et]=ot[Se]=ot[He]=ot[Me]=ot[$e]=ot[Ie]=ot[Re]=ot[Fe]=ot[tt]=ot[Je]=ot[rr]=ot[lr]=!0,ot[U]=ot[he]=ot[xe]=!1;var P={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},K={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ce={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ge={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,Te=parseInt,dt=typeof ms=="object"&&ms&&ms.Object===Object&&ms,Ht=typeof self=="object"&&self&&self.Object===Object&&self,Xe=dt||Ht||Function("return this")(),ut=e&&!e.nodeType&&e,Nt=ut&&!0&&n&&!n.nodeType&&n,fr=Nt&&Nt.exports===ut,qt=fr&&dt.process,pt=function(){try{var V=Nt&&Nt.require&&Nt.require("util").types;return V||qt&&qt.binding&&qt.binding("util")}catch{}}(),nr=pt&&pt.isArrayBuffer,zr=pt&&pt.isDate,Pr=pt&&pt.isMap,Jr=pt&&pt.isRegExp,zn=pt&&pt.isSet,Hi=pt&&pt.isTypedArray;function Gt(V,ie,Z){switch(Z.length){case 0:return V.call(ie);case 1:return V.call(ie,Z[0]);case 2:return V.call(ie,Z[0],Z[1]);case 3:return V.call(ie,Z[0],Z[1],Z[2])}return V.apply(ie,Z)}function Hp(V,ie,Z,_e){for(var Ae=-1,rt=V==null?0:V.length;++Ae<rt;){var Vt=V[Ae];ie(_e,Vt,Z(Vt),V)}return _e}function Ar(V,ie){for(var Z=-1,_e=V==null?0:V.length;++Z<_e&&ie(V[Z],Z,V)!==!1;);return V}function qp(V,ie){for(var Z=V==null?0:V.length;Z--&&ie(V[Z],Z,V)!==!1;);return V}function Vu(V,ie){for(var Z=-1,_e=V==null?0:V.length;++Z<_e;)if(!ie(V[Z],Z,V))return!1;return!0}function mi(V,ie){for(var Z=-1,_e=V==null?0:V.length,Ae=0,rt=[];++Z<_e;){var Vt=V[Z];ie(Vt,Z,V)&&(rt[Ae++]=Vt)}return rt}function zs(V,ie){var Z=V==null?0:V.length;return!!Z&&ln(V,ie,0)>-1}function Pa(V,ie,Z){for(var _e=-1,Ae=V==null?0:V.length;++_e<Ae;)if(Z(ie,V[_e]))return!0;return!1}function bt(V,ie){for(var Z=-1,_e=V==null?0:V.length,Ae=Array(_e);++Z<_e;)Ae[Z]=ie(V[Z],Z,V);return Ae}function wi(V,ie){for(var Z=-1,_e=ie.length,Ae=V.length;++Z<_e;)V[Ae+Z]=ie[Z];return V}function Aa(V,ie,Z,_e){var Ae=-1,rt=V==null?0:V.length;for(_e&&rt&&(Z=V[++Ae]);++Ae<rt;)Z=ie(Z,V[Ae],Ae,V);return Z}function Kp(V,ie,Z,_e){var Ae=V==null?0:V.length;for(_e&&Ae&&(Z=V[--Ae]);Ae--;)Z=ie(Z,V[Ae],Ae,V);return Z}function Ca(V,ie){for(var Z=-1,_e=V==null?0:V.length;++Z<_e;)if(ie(V[Z],Z,V))return!0;return!1}var Vp=Ta("length");function kp(V){return V.split("")}function Gp(V){return V.match(zt)||[]}function ku(V,ie,Z){var _e;return Z(V,function(Ae,rt,Vt){if(ie(Ae,rt,Vt))return _e=rt,!1}),_e}function Hs(V,ie,Z,_e){for(var Ae=V.length,rt=Z+(_e?1:-1);_e?rt--:++rt<Ae;)if(ie(V[rt],rt,V))return rt;return-1}function ln(V,ie,Z){return ie===ie?sg(V,ie,Z):Hs(V,Gu,Z)}function Wp(V,ie,Z,_e){for(var Ae=Z-1,rt=V.length;++Ae<rt;)if(_e(V[Ae],ie))return Ae;return-1}function Gu(V){return V!==V}function Wu(V,ie){var Z=V==null?0:V.length;return Z?Ra(V,ie)/Z:G}function Ta(V){return function(ie){return ie==null?r:ie[V]}}function Na(V){return function(ie){return V==null?r:V[ie]}}function Yu(V,ie,Z,_e,Ae){return Ae(V,function(rt,Vt,ht){Z=_e?(_e=!1,rt):ie(Z,rt,Vt,ht)}),Z}function Yp(V,ie){var Z=V.length;for(V.sort(ie);Z--;)V[Z]=V[Z].value;return V}function Ra(V,ie){for(var Z,_e=-1,Ae=V.length;++_e<Ae;){var rt=ie(V[_e]);rt!==r&&(Z=Z===r?rt:Z+rt)}return Z}function Fa(V,ie){for(var Z=-1,_e=Array(V);++Z<V;)_e[Z]=ie(Z);return _e}function Jp(V,ie){return bt(ie,function(Z){return[Z,V[Z]]})}function Ju(V){return V&&V.slice(0,eh(V)+1).replace(xt,"")}function wr(V){return function(ie){return V(ie)}}function ja(V,ie){return bt(ie,function(Z){return V[Z]})}function Hn(V,ie){return V.has(ie)}function Xu(V,ie){for(var Z=-1,_e=V.length;++Z<_e&&ln(ie,V[Z],0)>-1;);return Z}function Zu(V,ie){for(var Z=V.length;Z--&&ln(ie,V[Z],0)>-1;);return Z}function Xp(V,ie){for(var Z=V.length,_e=0;Z--;)V[Z]===ie&&++_e;return _e}var Zp=Na(P),Qp=Na(K);function eg(V){return"\\"+ge[V]}function tg(V,ie){return V==null?r:V[ie]}function fn(V){return $s.test(V)}function rg(V){return zi.test(V)}function ig(V){for(var ie,Z=[];!(ie=V.next()).done;)Z.push(ie.value);return Z}function Ua(V){var ie=-1,Z=Array(V.size);return V.forEach(function(_e,Ae){Z[++ie]=[Ae,_e]}),Z}function Qu(V,ie){return function(Z){return V(ie(Z))}}function Ei(V,ie){for(var Z=-1,_e=V.length,Ae=0,rt=[];++Z<_e;){var Vt=V[Z];(Vt===ie||Vt===A)&&(V[Z]=A,rt[Ae++]=Z)}return rt}function qs(V){var ie=-1,Z=Array(V.size);return V.forEach(function(_e){Z[++ie]=_e}),Z}function ng(V){var ie=-1,Z=Array(V.size);return V.forEach(function(_e){Z[++ie]=[_e,_e]}),Z}function sg(V,ie,Z){for(var _e=Z-1,Ae=V.length;++_e<Ae;)if(V[_e]===ie)return _e;return-1}function og(V,ie,Z){for(var _e=Z+1;_e--;)if(V[_e]===ie)return _e;return _e}function dn(V){return fn(V)?cg(V):Vp(V)}function Hr(V){return fn(V)?ug(V):kp(V)}function eh(V){for(var ie=V.length;ie--&&Tt.test(V.charAt(ie)););return ie}var ag=Na(ce);function cg(V){for(var ie=hn.lastIndex=0;hn.test(V);)++ie;return ie}function ug(V){return V.match(hn)||[]}function hg(V){return V.match(Ls)||[]}var lg=function V(ie){ie=ie==null?Xe:pn.defaults(Xe.Object(),ie,pn.pick(Xe,Bs));var Z=ie.Array,_e=ie.Date,Ae=ie.Error,rt=ie.Function,Vt=ie.Math,ht=ie.Object,Ma=ie.RegExp,fg=ie.String,Cr=ie.TypeError,Ks=Z.prototype,dg=rt.prototype,gn=ht.prototype,Vs=ie["__core-js_shared__"],ks=dg.toString,st=gn.hasOwnProperty,pg=0,th=function(){var t=/[^.]+$/.exec(Vs&&Vs.keys&&Vs.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Gs=gn.toString,gg=ks.call(ht),yg=Xe._,_g=Ma("^"+ks.call(st).replace(Ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ws=fr?ie.Buffer:r,Di=ie.Symbol,Ys=ie.Uint8Array,rh=Ws?Ws.allocUnsafe:r,Js=Qu(ht.getPrototypeOf,ht),ih=ht.create,nh=gn.propertyIsEnumerable,Xs=Ks.splice,sh=Di?Di.isConcatSpreadable:r,qn=Di?Di.iterator:r,qi=Di?Di.toStringTag:r,Zs=function(){try{var t=Wi(ht,"defineProperty");return t({},"",{}),t}catch{}}(),vg=ie.clearTimeout!==Xe.clearTimeout&&ie.clearTimeout,bg=_e&&_e.now!==Xe.Date.now&&_e.now,mg=ie.setTimeout!==Xe.setTimeout&&ie.setTimeout,Qs=Vt.ceil,eo=Vt.floor,La=ht.getOwnPropertySymbols,wg=Ws?Ws.isBuffer:r,oh=ie.isFinite,Eg=Ks.join,Dg=Qu(ht.keys,ht),kt=Vt.max,Qt=Vt.min,Sg=_e.now,Ig=ie.parseInt,ah=Vt.random,Og=Ks.reverse,$a=Wi(ie,"DataView"),Kn=Wi(ie,"Map"),Ba=Wi(ie,"Promise"),yn=Wi(ie,"Set"),Vn=Wi(ie,"WeakMap"),kn=Wi(ht,"create"),to=Vn&&new Vn,_n={},xg=Yi($a),Pg=Yi(Kn),Ag=Yi(Ba),Cg=Yi(yn),Tg=Yi(Vn),ro=Di?Di.prototype:r,Gn=ro?ro.valueOf:r,ch=ro?ro.toString:r;function D(t){if(At(t)&&!Ne(t)&&!(t instanceof Ye)){if(t instanceof Tr)return t;if(st.call(t,"__wrapped__"))return ul(t)}return new Tr(t)}var vn=function(){function t(){}return function(i){if(!Et(i))return{};if(ih)return ih(i);t.prototype=i;var a=new t;return t.prototype=r,a}}();function io(){}function Tr(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}D.templateSettings={escape:St,evaluate:It,interpolate:wt,variable:"",imports:{_:D}},D.prototype=io.prototype,D.prototype.constructor=D,Tr.prototype=vn(io.prototype),Tr.prototype.constructor=Tr;function Ye(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Q,this.__views__=[]}function Ng(){var t=new Ye(this.__wrapped__);return t.__actions__=dr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=dr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=dr(this.__views__),t}function Rg(){if(this.__filtered__){var t=new Ye(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Fg(){var t=this.__wrapped__.value(),i=this.__dir__,a=Ne(t),c=i<0,v=a?t.length:0,S=k0(0,v,this.__views__),T=S.start,$=S.end,k=$-T,se=c?$:T-1,oe=this.__iteratees__,ue=oe.length,fe=0,ve=Qt(k,this.__takeCount__);if(!a||!c&&v==k&&ve==k)return Nh(t,this.__actions__);var we=[];e:for(;k--&&fe<ve;){se+=i;for(var ze=-1,Ee=t[se];++ze<ue;){var Ge=oe[ze],Ze=Ge.iteratee,Sr=Ge.type,ar=Ze(Ee);if(Sr==f)Ee=ar;else if(!ar){if(Sr==d)continue e;break e}}we[fe++]=Ee}return we}Ye.prototype=vn(io.prototype),Ye.prototype.constructor=Ye;function Ki(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var c=t[i];this.set(c[0],c[1])}}function jg(){this.__data__=kn?kn(null):{},this.size=0}function Ug(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function Mg(t){var i=this.__data__;if(kn){var a=i[t];return a===w?r:a}return st.call(i,t)?i[t]:r}function Lg(t){var i=this.__data__;return kn?i[t]!==r:st.call(i,t)}function $g(t,i){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=kn&&i===r?w:i,this}Ki.prototype.clear=jg,Ki.prototype.delete=Ug,Ki.prototype.get=Mg,Ki.prototype.has=Lg,Ki.prototype.set=$g;function ci(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var c=t[i];this.set(c[0],c[1])}}function Bg(){this.__data__=[],this.size=0}function zg(t){var i=this.__data__,a=no(i,t);if(a<0)return!1;var c=i.length-1;return a==c?i.pop():Xs.call(i,a,1),--this.size,!0}function Hg(t){var i=this.__data__,a=no(i,t);return a<0?r:i[a][1]}function qg(t){return no(this.__data__,t)>-1}function Kg(t,i){var a=this.__data__,c=no(a,t);return c<0?(++this.size,a.push([t,i])):a[c][1]=i,this}ci.prototype.clear=Bg,ci.prototype.delete=zg,ci.prototype.get=Hg,ci.prototype.has=qg,ci.prototype.set=Kg;function ui(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var c=t[i];this.set(c[0],c[1])}}function Vg(){this.size=0,this.__data__={hash:new Ki,map:new(Kn||ci),string:new Ki}}function kg(t){var i=_o(this,t).delete(t);return this.size-=i?1:0,i}function Gg(t){return _o(this,t).get(t)}function Wg(t){return _o(this,t).has(t)}function Yg(t,i){var a=_o(this,t),c=a.size;return a.set(t,i),this.size+=a.size==c?0:1,this}ui.prototype.clear=Vg,ui.prototype.delete=kg,ui.prototype.get=Gg,ui.prototype.has=Wg,ui.prototype.set=Yg;function Vi(t){var i=-1,a=t==null?0:t.length;for(this.__data__=new ui;++i<a;)this.add(t[i])}function Jg(t){return this.__data__.set(t,w),this}function Xg(t){return this.__data__.has(t)}Vi.prototype.add=Vi.prototype.push=Jg,Vi.prototype.has=Xg;function qr(t){var i=this.__data__=new ci(t);this.size=i.size}function Zg(){this.__data__=new ci,this.size=0}function Qg(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}function e0(t){return this.__data__.get(t)}function t0(t){return this.__data__.has(t)}function r0(t,i){var a=this.__data__;if(a instanceof ci){var c=a.__data__;if(!Kn||c.length<o-1)return c.push([t,i]),this.size=++a.size,this;a=this.__data__=new ui(c)}return a.set(t,i),this.size=a.size,this}qr.prototype.clear=Zg,qr.prototype.delete=Qg,qr.prototype.get=e0,qr.prototype.has=t0,qr.prototype.set=r0;function uh(t,i){var a=Ne(t),c=!a&&Ji(t),v=!a&&!c&&Pi(t),S=!a&&!c&&!v&&En(t),T=a||c||v||S,$=T?Fa(t.length,fg):[],k=$.length;for(var se in t)(i||st.call(t,se))&&!(T&&(se=="length"||v&&(se=="offset"||se=="parent")||S&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||di(se,k)))&&$.push(se);return $}function hh(t){var i=t.length;return i?t[Xa(0,i-1)]:r}function i0(t,i){return vo(dr(t),ki(i,0,t.length))}function n0(t){return vo(dr(t))}function za(t,i,a){(a!==r&&!Kr(t[i],a)||a===r&&!(i in t))&&hi(t,i,a)}function Wn(t,i,a){var c=t[i];(!(st.call(t,i)&&Kr(c,a))||a===r&&!(i in t))&&hi(t,i,a)}function no(t,i){for(var a=t.length;a--;)if(Kr(t[a][0],i))return a;return-1}function s0(t,i,a,c){return Si(t,function(v,S,T){i(c,v,a(v),T)}),c}function lh(t,i){return t&&Zr(i,Wt(i),t)}function o0(t,i){return t&&Zr(i,gr(i),t)}function hi(t,i,a){i=="__proto__"&&Zs?Zs(t,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[i]=a}function Ha(t,i){for(var a=-1,c=i.length,v=Z(c),S=t==null;++a<c;)v[a]=S?r:Ec(t,i[a]);return v}function ki(t,i,a){return t===t&&(a!==r&&(t=t<=a?t:a),i!==r&&(t=t>=i?t:i)),t}function Nr(t,i,a,c,v,S){var T,$=i&M,k=i&W,se=i&B;if(a&&(T=v?a(t,c,v,S):a(t)),T!==r)return T;if(!Et(t))return t;var oe=Ne(t);if(oe){if(T=W0(t),!$)return dr(t,T)}else{var ue=er(t),fe=ue==he||ue==pe;if(Pi(t))return jh(t,$);if(ue==Me||ue==le||fe&&!v){if(T=k||fe?{}:el(t),!$)return k?M0(t,o0(T,t)):U0(t,lh(T,t))}else{if(!ot[ue])return v?t:{};T=Y0(t,ue,$)}}S||(S=new qr);var ve=S.get(t);if(ve)return ve;S.set(t,T),Al(t)?t.forEach(function(Ee){T.add(Nr(Ee,i,a,Ee,t,S))}):xl(t)&&t.forEach(function(Ee,Ge){T.set(Ge,Nr(Ee,i,a,Ge,t,S))});var we=se?k?cc:ac:k?gr:Wt,ze=oe?r:we(t);return Ar(ze||t,function(Ee,Ge){ze&&(Ge=Ee,Ee=t[Ge]),Wn(T,Ge,Nr(Ee,i,a,Ge,t,S))}),T}function a0(t){var i=Wt(t);return function(a){return fh(a,t,i)}}function fh(t,i,a){var c=a.length;if(t==null)return!c;for(t=ht(t);c--;){var v=a[c],S=i[v],T=t[v];if(T===r&&!(v in t)||!S(T))return!1}return!0}function dh(t,i,a){if(typeof t!="function")throw new Cr(b);return ts(function(){t.apply(r,a)},i)}function Yn(t,i,a,c){var v=-1,S=zs,T=!0,$=t.length,k=[],se=i.length;if(!$)return k;a&&(i=bt(i,wr(a))),c?(S=Pa,T=!1):i.length>=o&&(S=Hn,T=!1,i=new Vi(i));e:for(;++v<$;){var oe=t[v],ue=a==null?oe:a(oe);if(oe=c||oe!==0?oe:0,T&&ue===ue){for(var fe=se;fe--;)if(i[fe]===ue)continue e;k.push(oe)}else S(i,ue,c)||k.push(oe)}return k}var Si=Bh(Xr),ph=Bh(Ka,!0);function c0(t,i){var a=!0;return Si(t,function(c,v,S){return a=!!i(c,v,S),a}),a}function so(t,i,a){for(var c=-1,v=t.length;++c<v;){var S=t[c],T=i(S);if(T!=null&&($===r?T===T&&!Dr(T):a(T,$)))var $=T,k=S}return k}function u0(t,i,a,c){var v=t.length;for(a=Le(a),a<0&&(a=-a>v?0:v+a),c=c===r||c>v?v:Le(c),c<0&&(c+=v),c=a>c?0:Tl(c);a<c;)t[a++]=i;return t}function gh(t,i){var a=[];return Si(t,function(c,v,S){i(c,v,S)&&a.push(c)}),a}function Jt(t,i,a,c,v){var S=-1,T=t.length;for(a||(a=X0),v||(v=[]);++S<T;){var $=t[S];i>0&&a($)?i>1?Jt($,i-1,a,c,v):wi(v,$):c||(v[v.length]=$)}return v}var qa=zh(),yh=zh(!0);function Xr(t,i){return t&&qa(t,i,Wt)}function Ka(t,i){return t&&yh(t,i,Wt)}function oo(t,i){return mi(i,function(a){return pi(t[a])})}function Gi(t,i){i=Oi(i,t);for(var a=0,c=i.length;t!=null&&a<c;)t=t[Qr(i[a++])];return a&&a==c?t:r}function _h(t,i,a){var c=i(t);return Ne(t)?c:wi(c,a(t))}function sr(t){return t==null?t===r?Be:Ve:qi&&qi in ht(t)?V0(t):ny(t)}function Va(t,i){return t>i}function h0(t,i){return t!=null&&st.call(t,i)}function l0(t,i){return t!=null&&i in ht(t)}function f0(t,i,a){return t>=Qt(i,a)&&t<kt(i,a)}function ka(t,i,a){for(var c=a?Pa:zs,v=t[0].length,S=t.length,T=S,$=Z(S),k=1/0,se=[];T--;){var oe=t[T];T&&i&&(oe=bt(oe,wr(i))),k=Qt(oe.length,k),$[T]=!a&&(i||v>=120&&oe.length>=120)?new Vi(T&&oe):r}oe=t[0];var ue=-1,fe=$[0];e:for(;++ue<v&&se.length<k;){var ve=oe[ue],we=i?i(ve):ve;if(ve=a||ve!==0?ve:0,!(fe?Hn(fe,we):c(se,we,a))){for(T=S;--T;){var ze=$[T];if(!(ze?Hn(ze,we):c(t[T],we,a)))continue e}fe&&fe.push(we),se.push(ve)}}return se}function d0(t,i,a,c){return Xr(t,function(v,S,T){i(c,a(v),S,T)}),c}function Jn(t,i,a){i=Oi(i,t),t=nl(t,i);var c=t==null?t:t[Qr(Fr(i))];return c==null?r:Gt(c,t,a)}function vh(t){return At(t)&&sr(t)==le}function p0(t){return At(t)&&sr(t)==De}function g0(t){return At(t)&&sr(t)==H}function Xn(t,i,a,c,v){return t===i?!0:t==null||i==null||!At(t)&&!At(i)?t!==t&&i!==i:y0(t,i,a,c,Xn,v)}function y0(t,i,a,c,v,S){var T=Ne(t),$=Ne(i),k=T?Ce:er(t),se=$?Ce:er(i);k=k==le?Me:k,se=se==le?Me:se;var oe=k==Me,ue=se==Me,fe=k==se;if(fe&&Pi(t)){if(!Pi(i))return!1;T=!0,oe=!1}if(fe&&!oe)return S||(S=new qr),T||En(t)?Xh(t,i,a,c,v,S):q0(t,i,k,a,c,v,S);if(!(a&N)){var ve=oe&&st.call(t,"__wrapped__"),we=ue&&st.call(i,"__wrapped__");if(ve||we){var ze=ve?t.value():t,Ee=we?i.value():i;return S||(S=new qr),v(ze,Ee,a,c,S)}}return fe?(S||(S=new qr),K0(t,i,a,c,v,S)):!1}function _0(t){return At(t)&&er(t)==Se}function Ga(t,i,a,c){var v=a.length,S=v,T=!c;if(t==null)return!S;for(t=ht(t);v--;){var $=a[v];if(T&&$[2]?$[1]!==t[$[0]]:!($[0]in t))return!1}for(;++v<S;){$=a[v];var k=$[0],se=t[k],oe=$[1];if(T&&$[2]){if(se===r&&!(k in t))return!1}else{var ue=new qr;if(c)var fe=c(se,oe,k,t,i,ue);if(!(fe===r?Xn(oe,se,N|te,c,ue):fe))return!1}}return!0}function bh(t){if(!Et(t)||Q0(t))return!1;var i=pi(t)?_g:fa;return i.test(Yi(t))}function v0(t){return At(t)&&sr(t)==$e}function b0(t){return At(t)&&er(t)==Ie}function m0(t){return At(t)&&So(t.length)&&!!at[sr(t)]}function mh(t){return typeof t=="function"?t:t==null?yr:typeof t=="object"?Ne(t)?Dh(t[0],t[1]):Eh(t):Hl(t)}function Wa(t){if(!es(t))return Dg(t);var i=[];for(var a in ht(t))st.call(t,a)&&a!="constructor"&&i.push(a);return i}function w0(t){if(!Et(t))return iy(t);var i=es(t),a=[];for(var c in t)c=="constructor"&&(i||!st.call(t,c))||a.push(c);return a}function Ya(t,i){return t<i}function wh(t,i){var a=-1,c=pr(t)?Z(t.length):[];return Si(t,function(v,S,T){c[++a]=i(v,S,T)}),c}function Eh(t){var i=hc(t);return i.length==1&&i[0][2]?rl(i[0][0],i[0][1]):function(a){return a===t||Ga(a,t,i)}}function Dh(t,i){return fc(t)&&tl(i)?rl(Qr(t),i):function(a){var c=Ec(a,t);return c===r&&c===i?Dc(a,t):Xn(i,c,N|te)}}function ao(t,i,a,c,v){t!==i&&qa(i,function(S,T){if(v||(v=new qr),Et(S))E0(t,i,T,a,ao,c,v);else{var $=c?c(pc(t,T),S,T+"",t,i,v):r;$===r&&($=S),za(t,T,$)}},gr)}function E0(t,i,a,c,v,S,T){var $=pc(t,a),k=pc(i,a),se=T.get(k);if(se){za(t,a,se);return}var oe=S?S($,k,a+"",t,i,T):r,ue=oe===r;if(ue){var fe=Ne(k),ve=!fe&&Pi(k),we=!fe&&!ve&&En(k);oe=k,fe||ve||we?Ne($)?oe=$:Rt($)?oe=dr($):ve?(ue=!1,oe=jh(k,!0)):we?(ue=!1,oe=Uh(k,!0)):oe=[]:rs(k)||Ji(k)?(oe=$,Ji($)?oe=Nl($):(!Et($)||pi($))&&(oe=el(k))):ue=!1}ue&&(T.set(k,oe),v(oe,k,c,S,T),T.delete(k)),za(t,a,oe)}function Sh(t,i){var a=t.length;if(a)return i+=i<0?a:0,di(i,a)?t[i]:r}function Ih(t,i,a){i.length?i=bt(i,function(S){return Ne(S)?function(T){return Gi(T,S.length===1?S[0]:S)}:S}):i=[yr];var c=-1;i=bt(i,wr(me()));var v=wh(t,function(S,T,$){var k=bt(i,function(se){return se(S)});return{criteria:k,index:++c,value:S}});return Yp(v,function(S,T){return j0(S,T,a)})}function D0(t,i){return Oh(t,i,function(a,c){return Dc(t,c)})}function Oh(t,i,a){for(var c=-1,v=i.length,S={};++c<v;){var T=i[c],$=Gi(t,T);a($,T)&&Zn(S,Oi(T,t),$)}return S}function S0(t){return function(i){return Gi(i,t)}}function Ja(t,i,a,c){var v=c?Wp:ln,S=-1,T=i.length,$=t;for(t===i&&(i=dr(i)),a&&($=bt(t,wr(a)));++S<T;)for(var k=0,se=i[S],oe=a?a(se):se;(k=v($,oe,k,c))>-1;)$!==t&&Xs.call($,k,1),Xs.call(t,k,1);return t}function xh(t,i){for(var a=t?i.length:0,c=a-1;a--;){var v=i[a];if(a==c||v!==S){var S=v;di(v)?Xs.call(t,v,1):ec(t,v)}}return t}function Xa(t,i){return t+eo(ah()*(i-t+1))}function I0(t,i,a,c){for(var v=-1,S=kt(Qs((i-t)/(a||1)),0),T=Z(S);S--;)T[c?S:++v]=t,t+=a;return T}function Za(t,i){var a="";if(!t||i<1||i>q)return a;do i%2&&(a+=t),i=eo(i/2),i&&(t+=t);while(i);return a}function Ke(t,i){return gc(il(t,i,yr),t+"")}function O0(t){return hh(Dn(t))}function x0(t,i){var a=Dn(t);return vo(a,ki(i,0,a.length))}function Zn(t,i,a,c){if(!Et(t))return t;i=Oi(i,t);for(var v=-1,S=i.length,T=S-1,$=t;$!=null&&++v<S;){var k=Qr(i[v]),se=a;if(k==="__proto__"||k==="constructor"||k==="prototype")return t;if(v!=T){var oe=$[k];se=c?c(oe,k,$):r,se===r&&(se=Et(oe)?oe:di(i[v+1])?[]:{})}Wn($,k,se),$=$[k]}return t}var Ph=to?function(t,i){return to.set(t,i),t}:yr,P0=Zs?function(t,i){return Zs(t,"toString",{configurable:!0,enumerable:!1,value:Ic(i),writable:!0})}:yr;function A0(t){return vo(Dn(t))}function Rr(t,i,a){var c=-1,v=t.length;i<0&&(i=-i>v?0:v+i),a=a>v?v:a,a<0&&(a+=v),v=i>a?0:a-i>>>0,i>>>=0;for(var S=Z(v);++c<v;)S[c]=t[c+i];return S}function C0(t,i){var a;return Si(t,function(c,v,S){return a=i(c,v,S),!a}),!!a}function co(t,i,a){var c=0,v=t==null?c:t.length;if(typeof i=="number"&&i===i&&v<=ne){for(;c<v;){var S=c+v>>>1,T=t[S];T!==null&&!Dr(T)&&(a?T<=i:T<i)?c=S+1:v=S}return v}return Qa(t,i,yr,a)}function Qa(t,i,a,c){var v=0,S=t==null?0:t.length;if(S===0)return 0;i=a(i);for(var T=i!==i,$=i===null,k=Dr(i),se=i===r;v<S;){var oe=eo((v+S)/2),ue=a(t[oe]),fe=ue!==r,ve=ue===null,we=ue===ue,ze=Dr(ue);if(T)var Ee=c||we;else se?Ee=we&&(c||fe):$?Ee=we&&fe&&(c||!ve):k?Ee=we&&fe&&!ve&&(c||!ze):ve||ze?Ee=!1:Ee=c?ue<=i:ue<i;Ee?v=oe+1:S=oe}return Qt(S,ee)}function Ah(t,i){for(var a=-1,c=t.length,v=0,S=[];++a<c;){var T=t[a],$=i?i(T):T;if(!a||!Kr($,k)){var k=$;S[v++]=T===0?0:T}}return S}function Ch(t){return typeof t=="number"?t:Dr(t)?G:+t}function Er(t){if(typeof t=="string")return t;if(Ne(t))return bt(t,Er)+"";if(Dr(t))return ch?ch.call(t):"";var i=t+"";return i=="0"&&1/t==-j?"-0":i}function Ii(t,i,a){var c=-1,v=zs,S=t.length,T=!0,$=[],k=$;if(a)T=!1,v=Pa;else if(S>=o){var se=i?null:z0(t);if(se)return qs(se);T=!1,v=Hn,k=new Vi}else k=i?[]:$;e:for(;++c<S;){var oe=t[c],ue=i?i(oe):oe;if(oe=a||oe!==0?oe:0,T&&ue===ue){for(var fe=k.length;fe--;)if(k[fe]===ue)continue e;i&&k.push(ue),$.push(oe)}else v(k,ue,a)||(k!==$&&k.push(ue),$.push(oe))}return $}function ec(t,i){return i=Oi(i,t),t=nl(t,i),t==null||delete t[Qr(Fr(i))]}function Th(t,i,a,c){return Zn(t,i,a(Gi(t,i)),c)}function uo(t,i,a,c){for(var v=t.length,S=c?v:-1;(c?S--:++S<v)&&i(t[S],S,t););return a?Rr(t,c?0:S,c?S+1:v):Rr(t,c?S+1:0,c?v:S)}function Nh(t,i){var a=t;return a instanceof Ye&&(a=a.value()),Aa(i,function(c,v){return v.func.apply(v.thisArg,wi([c],v.args))},a)}function tc(t,i,a){var c=t.length;if(c<2)return c?Ii(t[0]):[];for(var v=-1,S=Z(c);++v<c;)for(var T=t[v],$=-1;++$<c;)$!=v&&(S[v]=Yn(S[v]||T,t[$],i,a));return Ii(Jt(S,1),i,a)}function Rh(t,i,a){for(var c=-1,v=t.length,S=i.length,T={};++c<v;){var $=c<S?i[c]:r;a(T,t[c],$)}return T}function rc(t){return Rt(t)?t:[]}function ic(t){return typeof t=="function"?t:yr}function Oi(t,i){return Ne(t)?t:fc(t,i)?[t]:cl(nt(t))}var T0=Ke;function xi(t,i,a){var c=t.length;return a=a===r?c:a,!i&&a>=c?t:Rr(t,i,a)}var Fh=vg||function(t){return Xe.clearTimeout(t)};function jh(t,i){if(i)return t.slice();var a=t.length,c=rh?rh(a):new t.constructor(a);return t.copy(c),c}function nc(t){var i=new t.constructor(t.byteLength);return new Ys(i).set(new Ys(t)),i}function N0(t,i){var a=i?nc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function R0(t){var i=new t.constructor(t.source,xr.exec(t));return i.lastIndex=t.lastIndex,i}function F0(t){return Gn?ht(Gn.call(t)):{}}function Uh(t,i){var a=i?nc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function Mh(t,i){if(t!==i){var a=t!==r,c=t===null,v=t===t,S=Dr(t),T=i!==r,$=i===null,k=i===i,se=Dr(i);if(!$&&!se&&!S&&t>i||S&&T&&k&&!$&&!se||c&&T&&k||!a&&k||!v)return 1;if(!c&&!S&&!se&&t<i||se&&a&&v&&!c&&!S||$&&a&&v||!T&&v||!k)return-1}return 0}function j0(t,i,a){for(var c=-1,v=t.criteria,S=i.criteria,T=v.length,$=a.length;++c<T;){var k=Mh(v[c],S[c]);if(k){if(c>=$)return k;var se=a[c];return k*(se=="desc"?-1:1)}}return t.index-i.index}function Lh(t,i,a,c){for(var v=-1,S=t.length,T=a.length,$=-1,k=i.length,se=kt(S-T,0),oe=Z(k+se),ue=!c;++$<k;)oe[$]=i[$];for(;++v<T;)(ue||v<S)&&(oe[a[v]]=t[v]);for(;se--;)oe[$++]=t[v++];return oe}function $h(t,i,a,c){for(var v=-1,S=t.length,T=-1,$=a.length,k=-1,se=i.length,oe=kt(S-$,0),ue=Z(oe+se),fe=!c;++v<oe;)ue[v]=t[v];for(var ve=v;++k<se;)ue[ve+k]=i[k];for(;++T<$;)(fe||v<S)&&(ue[ve+a[T]]=t[v++]);return ue}function dr(t,i){var a=-1,c=t.length;for(i||(i=Z(c));++a<c;)i[a]=t[a];return i}function Zr(t,i,a,c){var v=!a;a||(a={});for(var S=-1,T=i.length;++S<T;){var $=i[S],k=c?c(a[$],t[$],$,a,t):r;k===r&&(k=t[$]),v?hi(a,$,k):Wn(a,$,k)}return a}function U0(t,i){return Zr(t,lc(t),i)}function M0(t,i){return Zr(t,Zh(t),i)}function ho(t,i){return function(a,c){var v=Ne(a)?Hp:s0,S=i?i():{};return v(a,t,me(c,2),S)}}function bn(t){return Ke(function(i,a){var c=-1,v=a.length,S=v>1?a[v-1]:r,T=v>2?a[2]:r;for(S=t.length>3&&typeof S=="function"?(v--,S):r,T&&or(a[0],a[1],T)&&(S=v<3?r:S,v=1),i=ht(i);++c<v;){var $=a[c];$&&t(i,$,c,S)}return i})}function Bh(t,i){return function(a,c){if(a==null)return a;if(!pr(a))return t(a,c);for(var v=a.length,S=i?v:-1,T=ht(a);(i?S--:++S<v)&&c(T[S],S,T)!==!1;);return a}}function zh(t){return function(i,a,c){for(var v=-1,S=ht(i),T=c(i),$=T.length;$--;){var k=T[t?$:++v];if(a(S[k],k,S)===!1)break}return i}}function L0(t,i,a){var c=i&X,v=Qn(t);function S(){var T=this&&this!==Xe&&this instanceof S?v:t;return T.apply(c?a:this,arguments)}return S}function Hh(t){return function(i){i=nt(i);var a=fn(i)?Hr(i):r,c=a?a[0]:i.charAt(0),v=a?xi(a,1).join(""):i.slice(1);return c[t]()+v}}function mn(t){return function(i){return Aa(Bl($l(i).replace(Bn,"")),t,"")}}function Qn(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=vn(t.prototype),c=t.apply(a,i);return Et(c)?c:a}}function $0(t,i,a){var c=Qn(t);function v(){for(var S=arguments.length,T=Z(S),$=S,k=wn(v);$--;)T[$]=arguments[$];var se=S<3&&T[0]!==k&&T[S-1]!==k?[]:Ei(T,k);if(S-=se.length,S<a)return Gh(t,i,lo,v.placeholder,r,T,se,r,r,a-S);var oe=this&&this!==Xe&&this instanceof v?c:t;return Gt(oe,this,T)}return v}function qh(t){return function(i,a,c){var v=ht(i);if(!pr(i)){var S=me(a,3);i=Wt(i),a=function($){return S(v[$],$,v)}}var T=t(i,a,c);return T>-1?v[S?i[T]:T]:r}}function Kh(t){return fi(function(i){var a=i.length,c=a,v=Tr.prototype.thru;for(t&&i.reverse();c--;){var S=i[c];if(typeof S!="function")throw new Cr(b);if(v&&!T&&yo(S)=="wrapper")var T=new Tr([],!0)}for(c=T?c:a;++c<a;){S=i[c];var $=yo(S),k=$=="wrapper"?uc(S):r;k&&dc(k[0])&&k[1]==(h|z|R|m)&&!k[4].length&&k[9]==1?T=T[yo(k[0])].apply(T,k[3]):T=S.length==1&&dc(S)?T[$]():T.thru(S)}return function(){var se=arguments,oe=se[0];if(T&&se.length==1&&Ne(oe))return T.plant(oe).value();for(var ue=0,fe=a?i[ue].apply(this,se):oe;++ue<a;)fe=i[ue].call(this,fe);return fe}})}function lo(t,i,a,c,v,S,T,$,k,se){var oe=i&h,ue=i&X,fe=i&ae,ve=i&(z|C),we=i&re,ze=fe?r:Qn(t);function Ee(){for(var Ge=arguments.length,Ze=Z(Ge),Sr=Ge;Sr--;)Ze[Sr]=arguments[Sr];if(ve)var ar=wn(Ee),Ir=Xp(Ze,ar);if(c&&(Ze=Lh(Ze,c,v,ve)),S&&(Ze=$h(Ze,S,T,ve)),Ge-=Ir,ve&&Ge<se){var Ft=Ei(Ze,ar);return Gh(t,i,lo,Ee.placeholder,a,Ze,Ft,$,k,se-Ge)}var Vr=ue?a:this,yi=fe?Vr[t]:t;return Ge=Ze.length,$?Ze=sy(Ze,$):we&&Ge>1&&Ze.reverse(),oe&&k<Ge&&(Ze.length=k),this&&this!==Xe&&this instanceof Ee&&(yi=ze||Qn(yi)),yi.apply(Vr,Ze)}return Ee}function Vh(t,i){return function(a,c){return d0(a,t,i(c),{})}}function fo(t,i){return function(a,c){var v;if(a===r&&c===r)return i;if(a!==r&&(v=a),c!==r){if(v===r)return c;typeof a=="string"||typeof c=="string"?(a=Er(a),c=Er(c)):(a=Ch(a),c=Ch(c)),v=t(a,c)}return v}}function sc(t){return fi(function(i){return i=bt(i,wr(me())),Ke(function(a){var c=this;return t(i,function(v){return Gt(v,c,a)})})})}function po(t,i){i=i===r?" ":Er(i);var a=i.length;if(a<2)return a?Za(i,t):i;var c=Za(i,Qs(t/dn(i)));return fn(i)?xi(Hr(c),0,t).join(""):c.slice(0,t)}function B0(t,i,a,c){var v=i&X,S=Qn(t);function T(){for(var $=-1,k=arguments.length,se=-1,oe=c.length,ue=Z(oe+k),fe=this&&this!==Xe&&this instanceof T?S:t;++se<oe;)ue[se]=c[se];for(;k--;)ue[se++]=arguments[++$];return Gt(fe,v?a:this,ue)}return T}function kh(t){return function(i,a,c){return c&&typeof c!="number"&&or(i,a,c)&&(a=c=r),i=gi(i),a===r?(a=i,i=0):a=gi(a),c=c===r?i<a?1:-1:gi(c),I0(i,a,c,t)}}function go(t){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=jr(i),a=jr(a)),t(i,a)}}function Gh(t,i,a,c,v,S,T,$,k,se){var oe=i&z,ue=oe?T:r,fe=oe?r:T,ve=oe?S:r,we=oe?r:S;i|=oe?R:F,i&=~(oe?F:R),i&L||(i&=~(X|ae));var ze=[t,i,v,ve,ue,we,fe,$,k,se],Ee=a.apply(r,ze);return dc(t)&&sl(Ee,ze),Ee.placeholder=c,ol(Ee,t,i)}function oc(t){var i=Vt[t];return function(a,c){if(a=jr(a),c=c==null?0:Qt(Le(c),292),c&&oh(a)){var v=(nt(a)+"e").split("e"),S=i(v[0]+"e"+(+v[1]+c));return v=(nt(S)+"e").split("e"),+(v[0]+"e"+(+v[1]-c))}return i(a)}}var z0=yn&&1/qs(new yn([,-0]))[1]==j?function(t){return new yn(t)}:Pc;function Wh(t){return function(i){var a=er(i);return a==Se?Ua(i):a==Ie?ng(i):Jp(i,t(i))}}function li(t,i,a,c,v,S,T,$){var k=i&ae;if(!k&&typeof t!="function")throw new Cr(b);var se=c?c.length:0;if(se||(i&=~(R|F),c=v=r),T=T===r?T:kt(Le(T),0),$=$===r?$:Le($),se-=v?v.length:0,i&F){var oe=c,ue=v;c=v=r}var fe=k?r:uc(t),ve=[t,i,a,c,v,oe,ue,S,T,$];if(fe&&ry(ve,fe),t=ve[0],i=ve[1],a=ve[2],c=ve[3],v=ve[4],$=ve[9]=ve[9]===r?k?0:t.length:kt(ve[9]-se,0),!$&&i&(z|C)&&(i&=~(z|C)),!i||i==X)var we=L0(t,i,a);else i==z||i==C?we=$0(t,i,$):(i==R||i==(X|R))&&!v.length?we=B0(t,i,a,c):we=lo.apply(r,ve);var ze=fe?Ph:sl;return ol(ze(we,ve),t,i)}function Yh(t,i,a,c){return t===r||Kr(t,gn[a])&&!st.call(c,a)?i:t}function Jh(t,i,a,c,v,S){return Et(t)&&Et(i)&&(S.set(i,t),ao(t,i,r,Jh,S),S.delete(i)),t}function H0(t){return rs(t)?r:t}function Xh(t,i,a,c,v,S){var T=a&N,$=t.length,k=i.length;if($!=k&&!(T&&k>$))return!1;var se=S.get(t),oe=S.get(i);if(se&&oe)return se==i&&oe==t;var ue=-1,fe=!0,ve=a&te?new Vi:r;for(S.set(t,i),S.set(i,t);++ue<$;){var we=t[ue],ze=i[ue];if(c)var Ee=T?c(ze,we,ue,i,t,S):c(we,ze,ue,t,i,S);if(Ee!==r){if(Ee)continue;fe=!1;break}if(ve){if(!Ca(i,function(Ge,Ze){if(!Hn(ve,Ze)&&(we===Ge||v(we,Ge,a,c,S)))return ve.push(Ze)})){fe=!1;break}}else if(!(we===ze||v(we,ze,a,c,S))){fe=!1;break}}return S.delete(t),S.delete(i),fe}function q0(t,i,a,c,v,S,T){switch(a){case Pe:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case De:return!(t.byteLength!=i.byteLength||!S(new Ys(t),new Ys(i)));case Y:case H:case He:return Kr(+t,+i);case U:return t.name==i.name&&t.message==i.message;case $e:case Re:return t==i+"";case Se:var $=Ua;case Ie:var k=c&N;if($||($=qs),t.size!=i.size&&!k)return!1;var se=T.get(t);if(se)return se==i;c|=te,T.set(t,i);var oe=Xh($(t),$(i),c,v,S,T);return T.delete(t),oe;case Fe:if(Gn)return Gn.call(t)==Gn.call(i)}return!1}function K0(t,i,a,c,v,S){var T=a&N,$=ac(t),k=$.length,se=ac(i),oe=se.length;if(k!=oe&&!T)return!1;for(var ue=k;ue--;){var fe=$[ue];if(!(T?fe in i:st.call(i,fe)))return!1}var ve=S.get(t),we=S.get(i);if(ve&&we)return ve==i&&we==t;var ze=!0;S.set(t,i),S.set(i,t);for(var Ee=T;++ue<k;){fe=$[ue];var Ge=t[fe],Ze=i[fe];if(c)var Sr=T?c(Ze,Ge,fe,i,t,S):c(Ge,Ze,fe,t,i,S);if(!(Sr===r?Ge===Ze||v(Ge,Ze,a,c,S):Sr)){ze=!1;break}Ee||(Ee=fe=="constructor")}if(ze&&!Ee){var ar=t.constructor,Ir=i.constructor;ar!=Ir&&"constructor"in t&&"constructor"in i&&!(typeof ar=="function"&&ar instanceof ar&&typeof Ir=="function"&&Ir instanceof Ir)&&(ze=!1)}return S.delete(t),S.delete(i),ze}function fi(t){return gc(il(t,r,fl),t+"")}function ac(t){return _h(t,Wt,lc)}function cc(t){return _h(t,gr,Zh)}var uc=to?function(t){return to.get(t)}:Pc;function yo(t){for(var i=t.name+"",a=_n[i],c=st.call(_n,i)?a.length:0;c--;){var v=a[c],S=v.func;if(S==null||S==t)return v.name}return i}function wn(t){var i=st.call(D,"placeholder")?D:t;return i.placeholder}function me(){var t=D.iteratee||Oc;return t=t===Oc?mh:t,arguments.length?t(arguments[0],arguments[1]):t}function _o(t,i){var a=t.__data__;return Z0(i)?a[typeof i=="string"?"string":"hash"]:a.map}function hc(t){for(var i=Wt(t),a=i.length;a--;){var c=i[a],v=t[c];i[a]=[c,v,tl(v)]}return i}function Wi(t,i){var a=tg(t,i);return bh(a)?a:r}function V0(t){var i=st.call(t,qi),a=t[qi];try{t[qi]=r;var c=!0}catch{}var v=Gs.call(t);return c&&(i?t[qi]=a:delete t[qi]),v}var lc=La?function(t){return t==null?[]:(t=ht(t),mi(La(t),function(i){return nh.call(t,i)}))}:Ac,Zh=La?function(t){for(var i=[];t;)wi(i,lc(t)),t=Js(t);return i}:Ac,er=sr;($a&&er(new $a(new ArrayBuffer(1)))!=Pe||Kn&&er(new Kn)!=Se||Ba&&er(Ba.resolve())!=gt||yn&&er(new yn)!=Ie||Vn&&er(new Vn)!=xe)&&(er=function(t){var i=sr(t),a=i==Me?t.constructor:r,c=a?Yi(a):"";if(c)switch(c){case xg:return Pe;case Pg:return Se;case Ag:return gt;case Cg:return Ie;case Tg:return xe}return i});function k0(t,i,a){for(var c=-1,v=a.length;++c<v;){var S=a[c],T=S.size;switch(S.type){case"drop":t+=T;break;case"dropRight":i-=T;break;case"take":i=Qt(i,t+T);break;case"takeRight":t=kt(t,i-T);break}}return{start:t,end:i}}function G0(t){var i=t.match(lt);return i?i[1].split(Bt):[]}function Qh(t,i,a){i=Oi(i,t);for(var c=-1,v=i.length,S=!1;++c<v;){var T=Qr(i[c]);if(!(S=t!=null&&a(t,T)))break;t=t[T]}return S||++c!=v?S:(v=t==null?0:t.length,!!v&&So(v)&&di(T,v)&&(Ne(t)||Ji(t)))}function W0(t){var i=t.length,a=new t.constructor(i);return i&&typeof t[0]=="string"&&st.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function el(t){return typeof t.constructor=="function"&&!es(t)?vn(Js(t)):{}}function Y0(t,i,a){var c=t.constructor;switch(i){case De:return nc(t);case Y:case H:return new c(+t);case Pe:return N0(t,a);case qe:case Oe:case ke:case We:case et:case tt:case Je:case rr:case lr:return Uh(t,a);case Se:return new c;case He:case Re:return new c(t);case $e:return R0(t);case Ie:return new c;case Fe:return F0(t)}}function J0(t,i){var a=i.length;if(!a)return t;var c=a-1;return i[c]=(a>1?"& ":"")+i[c],i=i.join(a>2?", ":" "),t.replace(Pt,`{
/* [wrapped with `+i+`] */
`)}function X0(t){return Ne(t)||Ji(t)||!!(sh&&t&&t[sh])}function di(t,i){var a=typeof t;return i=i!=null?i:q,!!i&&(a=="number"||a!="symbol"&&pa.test(t))&&t>-1&&t%1==0&&t<i}function or(t,i,a){if(!Et(a))return!1;var c=typeof i;return(c=="number"?pr(a)&&di(i,a.length):c=="string"&&i in a)?Kr(a[i],t):!1}function fc(t,i){if(Ne(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||Dr(t)?!0:Mt.test(t)||!vt.test(t)||i!=null&&t in ht(i)}function Z0(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function dc(t){var i=yo(t),a=D[i];if(typeof a!="function"||!(i in Ye.prototype))return!1;if(t===a)return!0;var c=uc(a);return!!c&&t===c[0]}function Q0(t){return!!th&&th in t}var ey=Vs?pi:Cc;function es(t){var i=t&&t.constructor,a=typeof i=="function"&&i.prototype||gn;return t===a}function tl(t){return t===t&&!Et(t)}function rl(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==r||t in ht(a))}}function ty(t){var i=Eo(t,function(c){return a.size===x&&a.clear(),c}),a=i.cache;return i}function ry(t,i){var a=t[1],c=i[1],v=a|c,S=v<(X|ae|h),T=c==h&&a==z||c==h&&a==m&&t[7].length<=i[8]||c==(h|m)&&i[7].length<=i[8]&&a==z;if(!(S||T))return t;c&X&&(t[2]=i[2],v|=a&X?0:L);var $=i[3];if($){var k=t[3];t[3]=k?Lh(k,$,i[4]):$,t[4]=k?Ei(t[3],A):i[4]}return $=i[5],$&&(k=t[5],t[5]=k?$h(k,$,i[6]):$,t[6]=k?Ei(t[5],A):i[6]),$=i[7],$&&(t[7]=$),c&h&&(t[8]=t[8]==null?i[8]:Qt(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=v,t}function iy(t){var i=[];if(t!=null)for(var a in ht(t))i.push(a);return i}function ny(t){return Gs.call(t)}function il(t,i,a){return i=kt(i===r?t.length-1:i,0),function(){for(var c=arguments,v=-1,S=kt(c.length-i,0),T=Z(S);++v<S;)T[v]=c[i+v];v=-1;for(var $=Z(i+1);++v<i;)$[v]=c[v];return $[i]=a(T),Gt(t,this,$)}}function nl(t,i){return i.length<2?t:Gi(t,Rr(i,0,-1))}function sy(t,i){for(var a=t.length,c=Qt(i.length,a),v=dr(t);c--;){var S=i[c];t[c]=di(S,a)?v[S]:r}return t}function pc(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var sl=al(Ph),ts=mg||function(t,i){return Xe.setTimeout(t,i)},gc=al(P0);function ol(t,i,a){var c=i+"";return gc(t,J0(c,oy(G0(c),a)))}function al(t){var i=0,a=0;return function(){var c=Sg(),v=E-(c-a);if(a=c,v>0){if(++i>=y)return arguments[0]}else i=0;return t.apply(r,arguments)}}function vo(t,i){var a=-1,c=t.length,v=c-1;for(i=i===r?c:i;++a<i;){var S=Xa(a,v),T=t[S];t[S]=t[a],t[a]=T}return t.length=i,t}var cl=ty(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(Lt,function(a,c,v,S){i.push(v?S.replace(ca,"$1"):c||a)}),i});function Qr(t){if(typeof t=="string"||Dr(t))return t;var i=t+"";return i=="0"&&1/t==-j?"-0":i}function Yi(t){if(t!=null){try{return ks.call(t)}catch{}try{return t+""}catch{}}return""}function oy(t,i){return Ar(ye,function(a){var c="_."+a[0];i&a[1]&&!zs(t,c)&&t.push(c)}),t.sort()}function ul(t){if(t instanceof Ye)return t.clone();var i=new Tr(t.__wrapped__,t.__chain__);return i.__actions__=dr(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function ay(t,i,a){(a?or(t,i,a):i===r)?i=1:i=kt(Le(i),0);var c=t==null?0:t.length;if(!c||i<1)return[];for(var v=0,S=0,T=Z(Qs(c/i));v<c;)T[S++]=Rr(t,v,v+=i);return T}function cy(t){for(var i=-1,a=t==null?0:t.length,c=0,v=[];++i<a;){var S=t[i];S&&(v[c++]=S)}return v}function uy(){var t=arguments.length;if(!t)return[];for(var i=Z(t-1),a=arguments[0],c=t;c--;)i[c-1]=arguments[c];return wi(Ne(a)?dr(a):[a],Jt(i,1))}var hy=Ke(function(t,i){return Rt(t)?Yn(t,Jt(i,1,Rt,!0)):[]}),ly=Ke(function(t,i){var a=Fr(i);return Rt(a)&&(a=r),Rt(t)?Yn(t,Jt(i,1,Rt,!0),me(a,2)):[]}),fy=Ke(function(t,i){var a=Fr(i);return Rt(a)&&(a=r),Rt(t)?Yn(t,Jt(i,1,Rt,!0),r,a):[]});function dy(t,i,a){var c=t==null?0:t.length;return c?(i=a||i===r?1:Le(i),Rr(t,i<0?0:i,c)):[]}function py(t,i,a){var c=t==null?0:t.length;return c?(i=a||i===r?1:Le(i),i=c-i,Rr(t,0,i<0?0:i)):[]}function gy(t,i){return t&&t.length?uo(t,me(i,3),!0,!0):[]}function yy(t,i){return t&&t.length?uo(t,me(i,3),!0):[]}function _y(t,i,a,c){var v=t==null?0:t.length;return v?(a&&typeof a!="number"&&or(t,i,a)&&(a=0,c=v),u0(t,i,a,c)):[]}function hl(t,i,a){var c=t==null?0:t.length;if(!c)return-1;var v=a==null?0:Le(a);return v<0&&(v=kt(c+v,0)),Hs(t,me(i,3),v)}function ll(t,i,a){var c=t==null?0:t.length;if(!c)return-1;var v=c-1;return a!==r&&(v=Le(a),v=a<0?kt(c+v,0):Qt(v,c-1)),Hs(t,me(i,3),v,!0)}function fl(t){var i=t==null?0:t.length;return i?Jt(t,1):[]}function vy(t){var i=t==null?0:t.length;return i?Jt(t,j):[]}function by(t,i){var a=t==null?0:t.length;return a?(i=i===r?1:Le(i),Jt(t,i)):[]}function my(t){for(var i=-1,a=t==null?0:t.length,c={};++i<a;){var v=t[i];c[v[0]]=v[1]}return c}function dl(t){return t&&t.length?t[0]:r}function wy(t,i,a){var c=t==null?0:t.length;if(!c)return-1;var v=a==null?0:Le(a);return v<0&&(v=kt(c+v,0)),ln(t,i,v)}function Ey(t){var i=t==null?0:t.length;return i?Rr(t,0,-1):[]}var Dy=Ke(function(t){var i=bt(t,rc);return i.length&&i[0]===t[0]?ka(i):[]}),Sy=Ke(function(t){var i=Fr(t),a=bt(t,rc);return i===Fr(a)?i=r:a.pop(),a.length&&a[0]===t[0]?ka(a,me(i,2)):[]}),Iy=Ke(function(t){var i=Fr(t),a=bt(t,rc);return i=typeof i=="function"?i:r,i&&a.pop(),a.length&&a[0]===t[0]?ka(a,r,i):[]});function Oy(t,i){return t==null?"":Eg.call(t,i)}function Fr(t){var i=t==null?0:t.length;return i?t[i-1]:r}function xy(t,i,a){var c=t==null?0:t.length;if(!c)return-1;var v=c;return a!==r&&(v=Le(a),v=v<0?kt(c+v,0):Qt(v,c-1)),i===i?og(t,i,v):Hs(t,Gu,v,!0)}function Py(t,i){return t&&t.length?Sh(t,Le(i)):r}var Ay=Ke(pl);function pl(t,i){return t&&t.length&&i&&i.length?Ja(t,i):t}function Cy(t,i,a){return t&&t.length&&i&&i.length?Ja(t,i,me(a,2)):t}function Ty(t,i,a){return t&&t.length&&i&&i.length?Ja(t,i,r,a):t}var Ny=fi(function(t,i){var a=t==null?0:t.length,c=Ha(t,i);return xh(t,bt(i,function(v){return di(v,a)?+v:v}).sort(Mh)),c});function Ry(t,i){var a=[];if(!(t&&t.length))return a;var c=-1,v=[],S=t.length;for(i=me(i,3);++c<S;){var T=t[c];i(T,c,t)&&(a.push(T),v.push(c))}return xh(t,v),a}function yc(t){return t==null?t:Og.call(t)}function Fy(t,i,a){var c=t==null?0:t.length;return c?(a&&typeof a!="number"&&or(t,i,a)?(i=0,a=c):(i=i==null?0:Le(i),a=a===r?c:Le(a)),Rr(t,i,a)):[]}function jy(t,i){return co(t,i)}function Uy(t,i,a){return Qa(t,i,me(a,2))}function My(t,i){var a=t==null?0:t.length;if(a){var c=co(t,i);if(c<a&&Kr(t[c],i))return c}return-1}function Ly(t,i){return co(t,i,!0)}function $y(t,i,a){return Qa(t,i,me(a,2),!0)}function By(t,i){var a=t==null?0:t.length;if(a){var c=co(t,i,!0)-1;if(Kr(t[c],i))return c}return-1}function zy(t){return t&&t.length?Ah(t):[]}function Hy(t,i){return t&&t.length?Ah(t,me(i,2)):[]}function qy(t){var i=t==null?0:t.length;return i?Rr(t,1,i):[]}function Ky(t,i,a){return t&&t.length?(i=a||i===r?1:Le(i),Rr(t,0,i<0?0:i)):[]}function Vy(t,i,a){var c=t==null?0:t.length;return c?(i=a||i===r?1:Le(i),i=c-i,Rr(t,i<0?0:i,c)):[]}function ky(t,i){return t&&t.length?uo(t,me(i,3),!1,!0):[]}function Gy(t,i){return t&&t.length?uo(t,me(i,3)):[]}var Wy=Ke(function(t){return Ii(Jt(t,1,Rt,!0))}),Yy=Ke(function(t){var i=Fr(t);return Rt(i)&&(i=r),Ii(Jt(t,1,Rt,!0),me(i,2))}),Jy=Ke(function(t){var i=Fr(t);return i=typeof i=="function"?i:r,Ii(Jt(t,1,Rt,!0),r,i)});function Xy(t){return t&&t.length?Ii(t):[]}function Zy(t,i){return t&&t.length?Ii(t,me(i,2)):[]}function Qy(t,i){return i=typeof i=="function"?i:r,t&&t.length?Ii(t,r,i):[]}function _c(t){if(!(t&&t.length))return[];var i=0;return t=mi(t,function(a){if(Rt(a))return i=kt(a.length,i),!0}),Fa(i,function(a){return bt(t,Ta(a))})}function gl(t,i){if(!(t&&t.length))return[];var a=_c(t);return i==null?a:bt(a,function(c){return Gt(i,r,c)})}var e_=Ke(function(t,i){return Rt(t)?Yn(t,i):[]}),t_=Ke(function(t){return tc(mi(t,Rt))}),r_=Ke(function(t){var i=Fr(t);return Rt(i)&&(i=r),tc(mi(t,Rt),me(i,2))}),i_=Ke(function(t){var i=Fr(t);return i=typeof i=="function"?i:r,tc(mi(t,Rt),r,i)}),n_=Ke(_c);function s_(t,i){return Rh(t||[],i||[],Wn)}function o_(t,i){return Rh(t||[],i||[],Zn)}var a_=Ke(function(t){var i=t.length,a=i>1?t[i-1]:r;return a=typeof a=="function"?(t.pop(),a):r,gl(t,a)});function yl(t){var i=D(t);return i.__chain__=!0,i}function c_(t,i){return i(t),t}function bo(t,i){return i(t)}var u_=fi(function(t){var i=t.length,a=i?t[0]:0,c=this.__wrapped__,v=function(S){return Ha(S,t)};return i>1||this.__actions__.length||!(c instanceof Ye)||!di(a)?this.thru(v):(c=c.slice(a,+a+(i?1:0)),c.__actions__.push({func:bo,args:[v],thisArg:r}),new Tr(c,this.__chain__).thru(function(S){return i&&!S.length&&S.push(r),S}))});function h_(){return yl(this)}function l_(){return new Tr(this.value(),this.__chain__)}function f_(){this.__values__===r&&(this.__values__=Cl(this.value()));var t=this.__index__>=this.__values__.length,i=t?r:this.__values__[this.__index__++];return{done:t,value:i}}function d_(){return this}function p_(t){for(var i,a=this;a instanceof io;){var c=ul(a);c.__index__=0,c.__values__=r,i?v.__wrapped__=c:i=c;var v=c;a=a.__wrapped__}return v.__wrapped__=t,i}function g_(){var t=this.__wrapped__;if(t instanceof Ye){var i=t;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:bo,args:[yc],thisArg:r}),new Tr(i,this.__chain__)}return this.thru(yc)}function y_(){return Nh(this.__wrapped__,this.__actions__)}var __=ho(function(t,i,a){st.call(t,a)?++t[a]:hi(t,a,1)});function v_(t,i,a){var c=Ne(t)?Vu:c0;return a&&or(t,i,a)&&(i=r),c(t,me(i,3))}function b_(t,i){var a=Ne(t)?mi:gh;return a(t,me(i,3))}var m_=qh(hl),w_=qh(ll);function E_(t,i){return Jt(mo(t,i),1)}function D_(t,i){return Jt(mo(t,i),j)}function S_(t,i,a){return a=a===r?1:Le(a),Jt(mo(t,i),a)}function _l(t,i){var a=Ne(t)?Ar:Si;return a(t,me(i,3))}function vl(t,i){var a=Ne(t)?qp:ph;return a(t,me(i,3))}var I_=ho(function(t,i,a){st.call(t,a)?t[a].push(i):hi(t,a,[i])});function O_(t,i,a,c){t=pr(t)?t:Dn(t),a=a&&!c?Le(a):0;var v=t.length;return a<0&&(a=kt(v+a,0)),Io(t)?a<=v&&t.indexOf(i,a)>-1:!!v&&ln(t,i,a)>-1}var x_=Ke(function(t,i,a){var c=-1,v=typeof i=="function",S=pr(t)?Z(t.length):[];return Si(t,function(T){S[++c]=v?Gt(i,T,a):Jn(T,i,a)}),S}),P_=ho(function(t,i,a){hi(t,a,i)});function mo(t,i){var a=Ne(t)?bt:wh;return a(t,me(i,3))}function A_(t,i,a,c){return t==null?[]:(Ne(i)||(i=i==null?[]:[i]),a=c?r:a,Ne(a)||(a=a==null?[]:[a]),Ih(t,i,a))}var C_=ho(function(t,i,a){t[a?0:1].push(i)},function(){return[[],[]]});function T_(t,i,a){var c=Ne(t)?Aa:Yu,v=arguments.length<3;return c(t,me(i,4),a,v,Si)}function N_(t,i,a){var c=Ne(t)?Kp:Yu,v=arguments.length<3;return c(t,me(i,4),a,v,ph)}function R_(t,i){var a=Ne(t)?mi:gh;return a(t,Do(me(i,3)))}function F_(t){var i=Ne(t)?hh:O0;return i(t)}function j_(t,i,a){(a?or(t,i,a):i===r)?i=1:i=Le(i);var c=Ne(t)?i0:x0;return c(t,i)}function U_(t){var i=Ne(t)?n0:A0;return i(t)}function M_(t){if(t==null)return 0;if(pr(t))return Io(t)?dn(t):t.length;var i=er(t);return i==Se||i==Ie?t.size:Wa(t).length}function L_(t,i,a){var c=Ne(t)?Ca:C0;return a&&or(t,i,a)&&(i=r),c(t,me(i,3))}var $_=Ke(function(t,i){if(t==null)return[];var a=i.length;return a>1&&or(t,i[0],i[1])?i=[]:a>2&&or(i[0],i[1],i[2])&&(i=[i[0]]),Ih(t,Jt(i,1),[])}),wo=bg||function(){return Xe.Date.now()};function B_(t,i){if(typeof i!="function")throw new Cr(b);return t=Le(t),function(){if(--t<1)return i.apply(this,arguments)}}function bl(t,i,a){return i=a?r:i,i=t&&i==null?t.length:i,li(t,h,r,r,r,r,i)}function ml(t,i){var a;if(typeof i!="function")throw new Cr(b);return t=Le(t),function(){return--t>0&&(a=i.apply(this,arguments)),t<=1&&(i=r),a}}var vc=Ke(function(t,i,a){var c=X;if(a.length){var v=Ei(a,wn(vc));c|=R}return li(t,c,i,a,v)}),wl=Ke(function(t,i,a){var c=X|ae;if(a.length){var v=Ei(a,wn(wl));c|=R}return li(i,c,t,a,v)});function El(t,i,a){i=a?r:i;var c=li(t,z,r,r,r,r,r,i);return c.placeholder=El.placeholder,c}function Dl(t,i,a){i=a?r:i;var c=li(t,C,r,r,r,r,r,i);return c.placeholder=Dl.placeholder,c}function Sl(t,i,a){var c,v,S,T,$,k,se=0,oe=!1,ue=!1,fe=!0;if(typeof t!="function")throw new Cr(b);i=jr(i)||0,Et(a)&&(oe=!!a.leading,ue="maxWait"in a,S=ue?kt(jr(a.maxWait)||0,i):S,fe="trailing"in a?!!a.trailing:fe);function ve(Ft){var Vr=c,yi=v;return c=v=r,se=Ft,T=t.apply(yi,Vr),T}function we(Ft){return se=Ft,$=ts(Ge,i),oe?ve(Ft):T}function ze(Ft){var Vr=Ft-k,yi=Ft-se,ql=i-Vr;return ue?Qt(ql,S-yi):ql}function Ee(Ft){var Vr=Ft-k,yi=Ft-se;return k===r||Vr>=i||Vr<0||ue&&yi>=S}function Ge(){var Ft=wo();if(Ee(Ft))return Ze(Ft);$=ts(Ge,ze(Ft))}function Ze(Ft){return $=r,fe&&c?ve(Ft):(c=v=r,T)}function Sr(){$!==r&&Fh($),se=0,c=k=v=$=r}function ar(){return $===r?T:Ze(wo())}function Ir(){var Ft=wo(),Vr=Ee(Ft);if(c=arguments,v=this,k=Ft,Vr){if($===r)return we(k);if(ue)return Fh($),$=ts(Ge,i),ve(k)}return $===r&&($=ts(Ge,i)),T}return Ir.cancel=Sr,Ir.flush=ar,Ir}var z_=Ke(function(t,i){return dh(t,1,i)}),H_=Ke(function(t,i,a){return dh(t,jr(i)||0,a)});function q_(t){return li(t,re)}function Eo(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new Cr(b);var a=function(){var c=arguments,v=i?i.apply(this,c):c[0],S=a.cache;if(S.has(v))return S.get(v);var T=t.apply(this,c);return a.cache=S.set(v,T)||S,T};return a.cache=new(Eo.Cache||ui),a}Eo.Cache=ui;function Do(t){if(typeof t!="function")throw new Cr(b);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function K_(t){return ml(2,t)}var V_=T0(function(t,i){i=i.length==1&&Ne(i[0])?bt(i[0],wr(me())):bt(Jt(i,1),wr(me()));var a=i.length;return Ke(function(c){for(var v=-1,S=Qt(c.length,a);++v<S;)c[v]=i[v].call(this,c[v]);return Gt(t,this,c)})}),bc=Ke(function(t,i){var a=Ei(i,wn(bc));return li(t,R,r,i,a)}),Il=Ke(function(t,i){var a=Ei(i,wn(Il));return li(t,F,r,i,a)}),k_=fi(function(t,i){return li(t,m,r,r,r,i)});function G_(t,i){if(typeof t!="function")throw new Cr(b);return i=i===r?i:Le(i),Ke(t,i)}function W_(t,i){if(typeof t!="function")throw new Cr(b);return i=i==null?0:kt(Le(i),0),Ke(function(a){var c=a[i],v=xi(a,0,i);return c&&wi(v,c),Gt(t,this,v)})}function Y_(t,i,a){var c=!0,v=!0;if(typeof t!="function")throw new Cr(b);return Et(a)&&(c="leading"in a?!!a.leading:c,v="trailing"in a?!!a.trailing:v),Sl(t,i,{leading:c,maxWait:i,trailing:v})}function J_(t){return bl(t,1)}function X_(t,i){return bc(ic(i),t)}function Z_(){if(!arguments.length)return[];var t=arguments[0];return Ne(t)?t:[t]}function Q_(t){return Nr(t,B)}function ev(t,i){return i=typeof i=="function"?i:r,Nr(t,B,i)}function tv(t){return Nr(t,M|B)}function rv(t,i){return i=typeof i=="function"?i:r,Nr(t,M|B,i)}function iv(t,i){return i==null||fh(t,i,Wt(i))}function Kr(t,i){return t===i||t!==t&&i!==i}var nv=go(Va),sv=go(function(t,i){return t>=i}),Ji=vh(function(){return arguments}())?vh:function(t){return At(t)&&st.call(t,"callee")&&!nh.call(t,"callee")},Ne=Z.isArray,ov=nr?wr(nr):p0;function pr(t){return t!=null&&So(t.length)&&!pi(t)}function Rt(t){return At(t)&&pr(t)}function av(t){return t===!0||t===!1||At(t)&&sr(t)==Y}var Pi=wg||Cc,cv=zr?wr(zr):g0;function uv(t){return At(t)&&t.nodeType===1&&!rs(t)}function hv(t){if(t==null)return!0;if(pr(t)&&(Ne(t)||typeof t=="string"||typeof t.splice=="function"||Pi(t)||En(t)||Ji(t)))return!t.length;var i=er(t);if(i==Se||i==Ie)return!t.size;if(es(t))return!Wa(t).length;for(var a in t)if(st.call(t,a))return!1;return!0}function lv(t,i){return Xn(t,i)}function fv(t,i,a){a=typeof a=="function"?a:r;var c=a?a(t,i):r;return c===r?Xn(t,i,r,a):!!c}function mc(t){if(!At(t))return!1;var i=sr(t);return i==U||i==p||typeof t.message=="string"&&typeof t.name=="string"&&!rs(t)}function dv(t){return typeof t=="number"&&oh(t)}function pi(t){if(!Et(t))return!1;var i=sr(t);return i==he||i==pe||i==J||i==yt}function Ol(t){return typeof t=="number"&&t==Le(t)}function So(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=q}function Et(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function At(t){return t!=null&&typeof t=="object"}var xl=Pr?wr(Pr):_0;function pv(t,i){return t===i||Ga(t,i,hc(i))}function gv(t,i,a){return a=typeof a=="function"?a:r,Ga(t,i,hc(i),a)}function yv(t){return Pl(t)&&t!=+t}function _v(t){if(ey(t))throw new Ae(l);return bh(t)}function vv(t){return t===null}function bv(t){return t==null}function Pl(t){return typeof t=="number"||At(t)&&sr(t)==He}function rs(t){if(!At(t)||sr(t)!=Me)return!1;var i=Js(t);if(i===null)return!0;var a=st.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&ks.call(a)==gg}var wc=Jr?wr(Jr):v0;function mv(t){return Ol(t)&&t>=-q&&t<=q}var Al=zn?wr(zn):b0;function Io(t){return typeof t=="string"||!Ne(t)&&At(t)&&sr(t)==Re}function Dr(t){return typeof t=="symbol"||At(t)&&sr(t)==Fe}var En=Hi?wr(Hi):m0;function wv(t){return t===r}function Ev(t){return At(t)&&er(t)==xe}function Dv(t){return At(t)&&sr(t)==je}var Sv=go(Ya),Iv=go(function(t,i){return t<=i});function Cl(t){if(!t)return[];if(pr(t))return Io(t)?Hr(t):dr(t);if(qn&&t[qn])return ig(t[qn]());var i=er(t),a=i==Se?Ua:i==Ie?qs:Dn;return a(t)}function gi(t){if(!t)return t===0?t:0;if(t=jr(t),t===j||t===-j){var i=t<0?-1:1;return i*I}return t===t?t:0}function Le(t){var i=gi(t),a=i%1;return i===i?a?i-a:i:0}function Tl(t){return t?ki(Le(t),0,Q):0}function jr(t){if(typeof t=="number")return t;if(Dr(t))return G;if(Et(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=Et(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=Ju(t);var a=la.test(t);return a||da.test(t)?Te(t.slice(2),a?2:8):ha.test(t)?G:+t}function Nl(t){return Zr(t,gr(t))}function Ov(t){return t?ki(Le(t),-q,q):t===0?t:0}function nt(t){return t==null?"":Er(t)}var xv=bn(function(t,i){if(es(i)||pr(i)){Zr(i,Wt(i),t);return}for(var a in i)st.call(i,a)&&Wn(t,a,i[a])}),Rl=bn(function(t,i){Zr(i,gr(i),t)}),Oo=bn(function(t,i,a,c){Zr(i,gr(i),t,c)}),Pv=bn(function(t,i,a,c){Zr(i,Wt(i),t,c)}),Av=fi(Ha);function Cv(t,i){var a=vn(t);return i==null?a:lh(a,i)}var Tv=Ke(function(t,i){t=ht(t);var a=-1,c=i.length,v=c>2?i[2]:r;for(v&&or(i[0],i[1],v)&&(c=1);++a<c;)for(var S=i[a],T=gr(S),$=-1,k=T.length;++$<k;){var se=T[$],oe=t[se];(oe===r||Kr(oe,gn[se])&&!st.call(t,se))&&(t[se]=S[se])}return t}),Nv=Ke(function(t){return t.push(r,Jh),Gt(Fl,r,t)});function Rv(t,i){return ku(t,me(i,3),Xr)}function Fv(t,i){return ku(t,me(i,3),Ka)}function jv(t,i){return t==null?t:qa(t,me(i,3),gr)}function Uv(t,i){return t==null?t:yh(t,me(i,3),gr)}function Mv(t,i){return t&&Xr(t,me(i,3))}function Lv(t,i){return t&&Ka(t,me(i,3))}function $v(t){return t==null?[]:oo(t,Wt(t))}function Bv(t){return t==null?[]:oo(t,gr(t))}function Ec(t,i,a){var c=t==null?r:Gi(t,i);return c===r?a:c}function zv(t,i){return t!=null&&Qh(t,i,h0)}function Dc(t,i){return t!=null&&Qh(t,i,l0)}var Hv=Vh(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=Gs.call(i)),t[i]=a},Ic(yr)),qv=Vh(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=Gs.call(i)),st.call(t,i)?t[i].push(a):t[i]=[a]},me),Kv=Ke(Jn);function Wt(t){return pr(t)?uh(t):Wa(t)}function gr(t){return pr(t)?uh(t,!0):w0(t)}function Vv(t,i){var a={};return i=me(i,3),Xr(t,function(c,v,S){hi(a,i(c,v,S),c)}),a}function kv(t,i){var a={};return i=me(i,3),Xr(t,function(c,v,S){hi(a,v,i(c,v,S))}),a}var Gv=bn(function(t,i,a){ao(t,i,a)}),Fl=bn(function(t,i,a,c){ao(t,i,a,c)}),Wv=fi(function(t,i){var a={};if(t==null)return a;var c=!1;i=bt(i,function(S){return S=Oi(S,t),c||(c=S.length>1),S}),Zr(t,cc(t),a),c&&(a=Nr(a,M|W|B,H0));for(var v=i.length;v--;)ec(a,i[v]);return a});function Yv(t,i){return jl(t,Do(me(i)))}var Jv=fi(function(t,i){return t==null?{}:D0(t,i)});function jl(t,i){if(t==null)return{};var a=bt(cc(t),function(c){return[c]});return i=me(i),Oh(t,a,function(c,v){return i(c,v[0])})}function Xv(t,i,a){i=Oi(i,t);var c=-1,v=i.length;for(v||(v=1,t=r);++c<v;){var S=t==null?r:t[Qr(i[c])];S===r&&(c=v,S=a),t=pi(S)?S.call(t):S}return t}function Zv(t,i,a){return t==null?t:Zn(t,i,a)}function Qv(t,i,a,c){return c=typeof c=="function"?c:r,t==null?t:Zn(t,i,a,c)}var Ul=Wh(Wt),Ml=Wh(gr);function e1(t,i,a){var c=Ne(t),v=c||Pi(t)||En(t);if(i=me(i,4),a==null){var S=t&&t.constructor;v?a=c?new S:[]:Et(t)?a=pi(S)?vn(Js(t)):{}:a={}}return(v?Ar:Xr)(t,function(T,$,k){return i(a,T,$,k)}),a}function t1(t,i){return t==null?!0:ec(t,i)}function r1(t,i,a){return t==null?t:Th(t,i,ic(a))}function i1(t,i,a,c){return c=typeof c=="function"?c:r,t==null?t:Th(t,i,ic(a),c)}function Dn(t){return t==null?[]:ja(t,Wt(t))}function n1(t){return t==null?[]:ja(t,gr(t))}function s1(t,i,a){return a===r&&(a=i,i=r),a!==r&&(a=jr(a),a=a===a?a:0),i!==r&&(i=jr(i),i=i===i?i:0),ki(jr(t),i,a)}function o1(t,i,a){return i=gi(i),a===r?(a=i,i=0):a=gi(a),t=jr(t),f0(t,i,a)}function a1(t,i,a){if(a&&typeof a!="boolean"&&or(t,i,a)&&(i=a=r),a===r&&(typeof i=="boolean"?(a=i,i=r):typeof t=="boolean"&&(a=t,t=r)),t===r&&i===r?(t=0,i=1):(t=gi(t),i===r?(i=t,t=0):i=gi(i)),t>i){var c=t;t=i,i=c}if(a||t%1||i%1){var v=ah();return Qt(t+v*(i-t+ct("1e-"+((v+"").length-1))),i)}return Xa(t,i)}var c1=mn(function(t,i,a){return i=i.toLowerCase(),t+(a?Ll(i):i)});function Ll(t){return Sc(nt(t).toLowerCase())}function $l(t){return t=nt(t),t&&t.replace(oi,Zp).replace(Oa,"")}function u1(t,i,a){t=nt(t),i=Er(i);var c=t.length;a=a===r?c:ki(Le(a),0,c);var v=a;return a-=i.length,a>=0&&t.slice(a,v)==i}function h1(t){return t=nt(t),t&&_t.test(t)?t.replace(Mi,Qp):t}function l1(t){return t=nt(t),t&&$t.test(t)?t.replace(Ot,"\\$&"):t}var f1=mn(function(t,i,a){return t+(a?"-":"")+i.toLowerCase()}),d1=mn(function(t,i,a){return t+(a?" ":"")+i.toLowerCase()}),p1=Hh("toLowerCase");function g1(t,i,a){t=nt(t),i=Le(i);var c=i?dn(t):0;if(!i||c>=i)return t;var v=(i-c)/2;return po(eo(v),a)+t+po(Qs(v),a)}function y1(t,i,a){t=nt(t),i=Le(i);var c=i?dn(t):0;return i&&c<i?t+po(i-c,a):t}function _1(t,i,a){t=nt(t),i=Le(i);var c=i?dn(t):0;return i&&c<i?po(i-c,a)+t:t}function v1(t,i,a){return a||i==null?i=0:i&&(i=+i),Ig(nt(t).replace(xt,""),i||0)}function b1(t,i,a){return(a?or(t,i,a):i===r)?i=1:i=Le(i),Za(nt(t),i)}function m1(){var t=arguments,i=nt(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var w1=mn(function(t,i,a){return t+(a?"_":"")+i.toLowerCase()});function E1(t,i,a){return a&&typeof a!="number"&&or(t,i,a)&&(i=a=r),a=a===r?Q:a>>>0,a?(t=nt(t),t&&(typeof i=="string"||i!=null&&!wc(i))&&(i=Er(i),!i&&fn(t))?xi(Hr(t),0,a):t.split(i,a)):[]}var D1=mn(function(t,i,a){return t+(a?" ":"")+Sc(i)});function S1(t,i,a){return t=nt(t),a=a==null?0:ki(Le(a),0,t.length),i=Er(i),t.slice(a,a+i.length)==i}function I1(t,i,a){var c=D.templateSettings;a&&or(t,i,a)&&(i=r),t=nt(t),i=Oo({},i,c,Yh);var v=Oo({},i.imports,c.imports,Yh),S=Wt(v),T=ja(v,S),$,k,se=0,oe=i.interpolate||nn,ue="__p += '",fe=Ma((i.escape||nn).source+"|"+oe.source+"|"+(oe===wt?ua:nn).source+"|"+(i.evaluate||nn).source+"|$","g"),ve="//# sourceURL="+(st.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xa+"]")+`
`;t.replace(fe,function(Ee,Ge,Ze,Sr,ar,Ir){return Ze||(Ze=Sr),ue+=t.slice(se,Ir).replace(ga,eg),Ge&&($=!0,ue+=`' +
__e(`+Ge+`) +
'`),ar&&(k=!0,ue+=`';
`+ar+`;
__p += '`),Ze&&(ue+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),se=Ir+Ee.length,Ee}),ue+=`';
`;var we=st.call(i,"variable")&&i.variable;if(!we)ue=`with (obj) {
`+ue+`
}
`;else if(aa.test(we))throw new Ae(_);ue=(k?ue.replace(Wr,""):ue).replace(ir,"$1").replace(si,"$1;"),ue="function("+(we||"obj")+`) {
`+(we?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($?", __e = _.escape":"")+(k?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ue+`return __p
}`;var ze=zl(function(){return rt(S,ve+"return "+ue).apply(r,T)});if(ze.source=ue,mc(ze))throw ze;return ze}function O1(t){return nt(t).toLowerCase()}function x1(t){return nt(t).toUpperCase()}function P1(t,i,a){if(t=nt(t),t&&(a||i===r))return Ju(t);if(!t||!(i=Er(i)))return t;var c=Hr(t),v=Hr(i),S=Xu(c,v),T=Zu(c,v)+1;return xi(c,S,T).join("")}function A1(t,i,a){if(t=nt(t),t&&(a||i===r))return t.slice(0,eh(t)+1);if(!t||!(i=Er(i)))return t;var c=Hr(t),v=Zu(c,Hr(i))+1;return xi(c,0,v).join("")}function C1(t,i,a){if(t=nt(t),t&&(a||i===r))return t.replace(xt,"");if(!t||!(i=Er(i)))return t;var c=Hr(t),v=Xu(c,Hr(i));return xi(c,v).join("")}function T1(t,i){var a=u,c=g;if(Et(i)){var v="separator"in i?i.separator:v;a="length"in i?Le(i.length):a,c="omission"in i?Er(i.omission):c}t=nt(t);var S=t.length;if(fn(t)){var T=Hr(t);S=T.length}if(a>=S)return t;var $=a-dn(c);if($<1)return c;var k=T?xi(T,0,$).join(""):t.slice(0,$);if(v===r)return k+c;if(T&&($+=k.length-$),wc(v)){if(t.slice($).search(v)){var se,oe=k;for(v.global||(v=Ma(v.source,nt(xr.exec(v))+"g")),v.lastIndex=0;se=v.exec(oe);)var ue=se.index;k=k.slice(0,ue===r?$:ue)}}else if(t.indexOf(Er(v),$)!=$){var fe=k.lastIndexOf(v);fe>-1&&(k=k.slice(0,fe))}return k+c}function N1(t){return t=nt(t),t&&Dt.test(t)?t.replace(vi,ag):t}var R1=mn(function(t,i,a){return t+(a?" ":"")+i.toUpperCase()}),Sc=Hh("toUpperCase");function Bl(t,i,a){return t=nt(t),i=a?r:i,i===r?rg(t)?hg(t):Gp(t):t.match(i)||[]}var zl=Ke(function(t,i){try{return Gt(t,r,i)}catch(a){return mc(a)?a:new Ae(a)}}),F1=fi(function(t,i){return Ar(i,function(a){a=Qr(a),hi(t,a,vc(t[a],t))}),t});function j1(t){var i=t==null?0:t.length,a=me();return t=i?bt(t,function(c){if(typeof c[1]!="function")throw new Cr(b);return[a(c[0]),c[1]]}):[],Ke(function(c){for(var v=-1;++v<i;){var S=t[v];if(Gt(S[0],this,c))return Gt(S[1],this,c)}})}function U1(t){return a0(Nr(t,M))}function Ic(t){return function(){return t}}function M1(t,i){return t==null||t!==t?i:t}var L1=Kh(),$1=Kh(!0);function yr(t){return t}function Oc(t){return mh(typeof t=="function"?t:Nr(t,M))}function B1(t){return Eh(Nr(t,M))}function z1(t,i){return Dh(t,Nr(i,M))}var H1=Ke(function(t,i){return function(a){return Jn(a,t,i)}}),q1=Ke(function(t,i){return function(a){return Jn(t,a,i)}});function xc(t,i,a){var c=Wt(i),v=oo(i,c);a==null&&!(Et(i)&&(v.length||!c.length))&&(a=i,i=t,t=this,v=oo(i,Wt(i)));var S=!(Et(a)&&"chain"in a)||!!a.chain,T=pi(t);return Ar(v,function($){var k=i[$];t[$]=k,T&&(t.prototype[$]=function(){var se=this.__chain__;if(S||se){var oe=t(this.__wrapped__),ue=oe.__actions__=dr(this.__actions__);return ue.push({func:k,args:arguments,thisArg:t}),oe.__chain__=se,oe}return k.apply(t,wi([this.value()],arguments))})}),t}function K1(){return Xe._===this&&(Xe._=yg),this}function Pc(){}function V1(t){return t=Le(t),Ke(function(i){return Sh(i,t)})}var k1=sc(bt),G1=sc(Vu),W1=sc(Ca);function Hl(t){return fc(t)?Ta(Qr(t)):S0(t)}function Y1(t){return function(i){return t==null?r:Gi(t,i)}}var J1=kh(),X1=kh(!0);function Ac(){return[]}function Cc(){return!1}function Z1(){return{}}function Q1(){return""}function eb(){return!0}function tb(t,i){if(t=Le(t),t<1||t>q)return[];var a=Q,c=Qt(t,Q);i=me(i),t-=Q;for(var v=Fa(c,i);++a<t;)i(a);return v}function rb(t){return Ne(t)?bt(t,Qr):Dr(t)?[t]:dr(cl(nt(t)))}function ib(t){var i=++pg;return nt(t)+i}var nb=fo(function(t,i){return t+i},0),sb=oc("ceil"),ob=fo(function(t,i){return t/i},1),ab=oc("floor");function cb(t){return t&&t.length?so(t,yr,Va):r}function ub(t,i){return t&&t.length?so(t,me(i,2),Va):r}function hb(t){return Wu(t,yr)}function lb(t,i){return Wu(t,me(i,2))}function fb(t){return t&&t.length?so(t,yr,Ya):r}function db(t,i){return t&&t.length?so(t,me(i,2),Ya):r}var pb=fo(function(t,i){return t*i},1),gb=oc("round"),yb=fo(function(t,i){return t-i},0);function _b(t){return t&&t.length?Ra(t,yr):0}function vb(t,i){return t&&t.length?Ra(t,me(i,2)):0}return D.after=B_,D.ary=bl,D.assign=xv,D.assignIn=Rl,D.assignInWith=Oo,D.assignWith=Pv,D.at=Av,D.before=ml,D.bind=vc,D.bindAll=F1,D.bindKey=wl,D.castArray=Z_,D.chain=yl,D.chunk=ay,D.compact=cy,D.concat=uy,D.cond=j1,D.conforms=U1,D.constant=Ic,D.countBy=__,D.create=Cv,D.curry=El,D.curryRight=Dl,D.debounce=Sl,D.defaults=Tv,D.defaultsDeep=Nv,D.defer=z_,D.delay=H_,D.difference=hy,D.differenceBy=ly,D.differenceWith=fy,D.drop=dy,D.dropRight=py,D.dropRightWhile=gy,D.dropWhile=yy,D.fill=_y,D.filter=b_,D.flatMap=E_,D.flatMapDeep=D_,D.flatMapDepth=S_,D.flatten=fl,D.flattenDeep=vy,D.flattenDepth=by,D.flip=q_,D.flow=L1,D.flowRight=$1,D.fromPairs=my,D.functions=$v,D.functionsIn=Bv,D.groupBy=I_,D.initial=Ey,D.intersection=Dy,D.intersectionBy=Sy,D.intersectionWith=Iy,D.invert=Hv,D.invertBy=qv,D.invokeMap=x_,D.iteratee=Oc,D.keyBy=P_,D.keys=Wt,D.keysIn=gr,D.map=mo,D.mapKeys=Vv,D.mapValues=kv,D.matches=B1,D.matchesProperty=z1,D.memoize=Eo,D.merge=Gv,D.mergeWith=Fl,D.method=H1,D.methodOf=q1,D.mixin=xc,D.negate=Do,D.nthArg=V1,D.omit=Wv,D.omitBy=Yv,D.once=K_,D.orderBy=A_,D.over=k1,D.overArgs=V_,D.overEvery=G1,D.overSome=W1,D.partial=bc,D.partialRight=Il,D.partition=C_,D.pick=Jv,D.pickBy=jl,D.property=Hl,D.propertyOf=Y1,D.pull=Ay,D.pullAll=pl,D.pullAllBy=Cy,D.pullAllWith=Ty,D.pullAt=Ny,D.range=J1,D.rangeRight=X1,D.rearg=k_,D.reject=R_,D.remove=Ry,D.rest=G_,D.reverse=yc,D.sampleSize=j_,D.set=Zv,D.setWith=Qv,D.shuffle=U_,D.slice=Fy,D.sortBy=$_,D.sortedUniq=zy,D.sortedUniqBy=Hy,D.split=E1,D.spread=W_,D.tail=qy,D.take=Ky,D.takeRight=Vy,D.takeRightWhile=ky,D.takeWhile=Gy,D.tap=c_,D.throttle=Y_,D.thru=bo,D.toArray=Cl,D.toPairs=Ul,D.toPairsIn=Ml,D.toPath=rb,D.toPlainObject=Nl,D.transform=e1,D.unary=J_,D.union=Wy,D.unionBy=Yy,D.unionWith=Jy,D.uniq=Xy,D.uniqBy=Zy,D.uniqWith=Qy,D.unset=t1,D.unzip=_c,D.unzipWith=gl,D.update=r1,D.updateWith=i1,D.values=Dn,D.valuesIn=n1,D.without=e_,D.words=Bl,D.wrap=X_,D.xor=t_,D.xorBy=r_,D.xorWith=i_,D.zip=n_,D.zipObject=s_,D.zipObjectDeep=o_,D.zipWith=a_,D.entries=Ul,D.entriesIn=Ml,D.extend=Rl,D.extendWith=Oo,xc(D,D),D.add=nb,D.attempt=zl,D.camelCase=c1,D.capitalize=Ll,D.ceil=sb,D.clamp=s1,D.clone=Q_,D.cloneDeep=tv,D.cloneDeepWith=rv,D.cloneWith=ev,D.conformsTo=iv,D.deburr=$l,D.defaultTo=M1,D.divide=ob,D.endsWith=u1,D.eq=Kr,D.escape=h1,D.escapeRegExp=l1,D.every=v_,D.find=m_,D.findIndex=hl,D.findKey=Rv,D.findLast=w_,D.findLastIndex=ll,D.findLastKey=Fv,D.floor=ab,D.forEach=_l,D.forEachRight=vl,D.forIn=jv,D.forInRight=Uv,D.forOwn=Mv,D.forOwnRight=Lv,D.get=Ec,D.gt=nv,D.gte=sv,D.has=zv,D.hasIn=Dc,D.head=dl,D.identity=yr,D.includes=O_,D.indexOf=wy,D.inRange=o1,D.invoke=Kv,D.isArguments=Ji,D.isArray=Ne,D.isArrayBuffer=ov,D.isArrayLike=pr,D.isArrayLikeObject=Rt,D.isBoolean=av,D.isBuffer=Pi,D.isDate=cv,D.isElement=uv,D.isEmpty=hv,D.isEqual=lv,D.isEqualWith=fv,D.isError=mc,D.isFinite=dv,D.isFunction=pi,D.isInteger=Ol,D.isLength=So,D.isMap=xl,D.isMatch=pv,D.isMatchWith=gv,D.isNaN=yv,D.isNative=_v,D.isNil=bv,D.isNull=vv,D.isNumber=Pl,D.isObject=Et,D.isObjectLike=At,D.isPlainObject=rs,D.isRegExp=wc,D.isSafeInteger=mv,D.isSet=Al,D.isString=Io,D.isSymbol=Dr,D.isTypedArray=En,D.isUndefined=wv,D.isWeakMap=Ev,D.isWeakSet=Dv,D.join=Oy,D.kebabCase=f1,D.last=Fr,D.lastIndexOf=xy,D.lowerCase=d1,D.lowerFirst=p1,D.lt=Sv,D.lte=Iv,D.max=cb,D.maxBy=ub,D.mean=hb,D.meanBy=lb,D.min=fb,D.minBy=db,D.stubArray=Ac,D.stubFalse=Cc,D.stubObject=Z1,D.stubString=Q1,D.stubTrue=eb,D.multiply=pb,D.nth=Py,D.noConflict=K1,D.noop=Pc,D.now=wo,D.pad=g1,D.padEnd=y1,D.padStart=_1,D.parseInt=v1,D.random=a1,D.reduce=T_,D.reduceRight=N_,D.repeat=b1,D.replace=m1,D.result=Xv,D.round=gb,D.runInContext=V,D.sample=F_,D.size=M_,D.snakeCase=w1,D.some=L_,D.sortedIndex=jy,D.sortedIndexBy=Uy,D.sortedIndexOf=My,D.sortedLastIndex=Ly,D.sortedLastIndexBy=$y,D.sortedLastIndexOf=By,D.startCase=D1,D.startsWith=S1,D.subtract=yb,D.sum=_b,D.sumBy=vb,D.template=I1,D.times=tb,D.toFinite=gi,D.toInteger=Le,D.toLength=Tl,D.toLower=O1,D.toNumber=jr,D.toSafeInteger=Ov,D.toString=nt,D.toUpper=x1,D.trim=P1,D.trimEnd=A1,D.trimStart=C1,D.truncate=T1,D.unescape=N1,D.uniqueId=ib,D.upperCase=R1,D.upperFirst=Sc,D.each=_l,D.eachRight=vl,D.first=dl,xc(D,function(){var t={};return Xr(D,function(i,a){st.call(D.prototype,a)||(t[a]=i)}),t}(),{chain:!1}),D.VERSION=s,Ar(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){D[t].placeholder=D}),Ar(["drop","take"],function(t,i){Ye.prototype[t]=function(a){a=a===r?1:kt(Le(a),0);var c=this.__filtered__&&!i?new Ye(this):this.clone();return c.__filtered__?c.__takeCount__=Qt(a,c.__takeCount__):c.__views__.push({size:Qt(a,Q),type:t+(c.__dir__<0?"Right":"")}),c},Ye.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),Ar(["filter","map","takeWhile"],function(t,i){var a=i+1,c=a==d||a==O;Ye.prototype[t]=function(v){var S=this.clone();return S.__iteratees__.push({iteratee:me(v,3),type:a}),S.__filtered__=S.__filtered__||c,S}}),Ar(["head","last"],function(t,i){var a="take"+(i?"Right":"");Ye.prototype[t]=function(){return this[a](1).value()[0]}}),Ar(["initial","tail"],function(t,i){var a="drop"+(i?"":"Right");Ye.prototype[t]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(yr)},Ye.prototype.find=function(t){return this.filter(t).head()},Ye.prototype.findLast=function(t){return this.reverse().find(t)},Ye.prototype.invokeMap=Ke(function(t,i){return typeof t=="function"?new Ye(this):this.map(function(a){return Jn(a,t,i)})}),Ye.prototype.reject=function(t){return this.filter(Do(me(t)))},Ye.prototype.slice=function(t,i){t=Le(t);var a=this;return a.__filtered__&&(t>0||i<0)?new Ye(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),i!==r&&(i=Le(i),a=i<0?a.dropRight(-i):a.take(i-t)),a)},Ye.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ye.prototype.toArray=function(){return this.take(Q)},Xr(Ye.prototype,function(t,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),c=/^(?:head|last)$/.test(i),v=D[c?"take"+(i=="last"?"Right":""):i],S=c||/^find/.test(i);v&&(D.prototype[i]=function(){var T=this.__wrapped__,$=c?[1]:arguments,k=T instanceof Ye,se=$[0],oe=k||Ne(T),ue=function(Ge){var Ze=v.apply(D,wi([Ge],$));return c&&fe?Ze[0]:Ze};oe&&a&&typeof se=="function"&&se.length!=1&&(k=oe=!1);var fe=this.__chain__,ve=!!this.__actions__.length,we=S&&!fe,ze=k&&!ve;if(!S&&oe){T=ze?T:new Ye(this);var Ee=t.apply(T,$);return Ee.__actions__.push({func:bo,args:[ue],thisArg:r}),new Tr(Ee,fe)}return we&&ze?t.apply(this,$):(Ee=this.thru(ue),we?c?Ee.value()[0]:Ee.value():Ee)})}),Ar(["pop","push","shift","sort","splice","unshift"],function(t){var i=Ks[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",c=/^(?:pop|shift)$/.test(t);D.prototype[t]=function(){var v=arguments;if(c&&!this.__chain__){var S=this.value();return i.apply(Ne(S)?S:[],v)}return this[a](function(T){return i.apply(Ne(T)?T:[],v)})}}),Xr(Ye.prototype,function(t,i){var a=D[i];if(a){var c=a.name+"";st.call(_n,c)||(_n[c]=[]),_n[c].push({name:i,func:a})}}),_n[lo(r,ae).name]=[{name:"wrapper",func:r}],Ye.prototype.clone=Ng,Ye.prototype.reverse=Rg,Ye.prototype.value=Fg,D.prototype.at=u_,D.prototype.chain=h_,D.prototype.commit=l_,D.prototype.next=f_,D.prototype.plant=p_,D.prototype.reverse=g_,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=y_,D.prototype.first=D.prototype.head,qn&&(D.prototype[qn]=d_),D},pn=lg();Nt?((Nt.exports=pn)._=pn,ut._=pn):Xe._=pn}).call(ms)})(Uu,Uu.exports);var HS=Object.defineProperty,qS=Object.defineProperties,KS=Object.getOwnPropertyDescriptors,Np=Object.getOwnPropertySymbols,VS=Object.prototype.hasOwnProperty,kS=Object.prototype.propertyIsEnumerable,Rp=(n,e,r)=>e in n?HS(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,na=(n,e)=>{for(var r in e||(e={}))VS.call(e,r)&&Rp(n,r,e[r]);if(Np)for(var r of Np(e))kS.call(e,r)&&Rp(n,r,e[r]);return n},GS=(n,e)=>qS(n,KS(e));function $r(n,e,r){let s;const o=Mu(n);return e.rpcMap&&(s=e.rpcMap[o]),s||(s=`${zS}?chainId=eip155:${o}&projectId=${r}`),s}function Mu(n){return n.includes("eip155")?Number(n.split(":")[1]):Number(n)}function Fp(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function WS(n,e){const r=Object.keys(e.namespaces).filter(o=>o.includes(n));if(!r.length)return[];const s=[];return r.forEach(o=>{const l=e.namespaces[o].accounts;s.push(...l)}),s}function YS(n={},e={}){const r=jp(n),s=jp(e);return Uu.exports.merge(r,s)}function jp(n){var e,r,s,o;const l={};if(!Tn(n))return l;for(const[b,_]of Object.entries(n)){const w=su(b)?[b]:_.chains,x=_.methods||[],A=_.events||[],M=_.rpcMap||{},W=Bo(b);l[W]=GS(na(na({},l[W]),_),{chains:iu(w,(e=l[W])==null?void 0:e.chains),methods:iu(x,(r=l[W])==null?void 0:r.methods),events:iu(A,(s=l[W])==null?void 0:s.events),rpcMap:na(na({},M),(o=l[W])==null?void 0:o.rpcMap)})}return l}function JS(n){return n.includes(":")?n.split(":")[2]:n}function XS(n){const e={};for(const[r,s]of Object.entries(n)){const o=s.methods||[],l=s.events||[],b=s.accounts||[],_=su(r)?[r]:s.chains?s.chains:Fp(s.accounts);e[r]={chains:_,methods:o,events:l,accounts:b}}return e}const Up={},Ut=n=>Up[n],Lu=(n,e)=>{Up[n]=e};class ZS{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace);return typeof s>"u"?void 0:new Fi(new rn(s,Ut("disableProviderPing")))}}class QS{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){const s=Mu(e);if(!this.httpProviders[s]){const o=r||$r(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,o)}this.chainId=s,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new rn(s,Ut("disableProviderPing")))}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;const o=Mu(r);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,s;let o=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const l=parseInt(o,16);if(this.isChainApproved(l))this.setDefaultChain(`${l}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${l}`);else throw new Error(`Failed to switch to chain 'eip155:${l}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class e5{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new rn(s,Ut("disableProviderPing")))}}class t5{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new rn(s,Ut("disableProviderPing")))}}class r5{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const s=r||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);e[r]=this.createHttpProvider(r,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||this.getCardanoRPCUrl(e);return typeof s>"u"?void 0:new Fi(new rn(s,Ut("disableProviderPing")))}}class i5{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new rn(s,Ut("disableProviderPing")))}}class n5{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Ut("events"),this.client=Ut("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const s=r||$r(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var s;e[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const s=this.createHttpProvider(e,r);s&&(this.httpProviders[e]=s)}createHttpProvider(e,r){const s=r||$r(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new Fi(new rn(s,Ut("disableProviderPing")))}}var s5=Object.defineProperty,o5=Object.defineProperties,a5=Object.getOwnPropertyDescriptors,Mp=Object.getOwnPropertySymbols,c5=Object.prototype.hasOwnProperty,u5=Object.prototype.propertyIsEnumerable,Lp=(n,e,r)=>e in n?s5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,sa=(n,e)=>{for(var r in e||(e={}))c5.call(e,r)&&Lp(n,r,e[r]);if(Mp)for(var r of Mp(e))u5.call(e,r)&&Lp(n,r,e[r]);return n},$u=(n,e)=>o5(n,a5(e));class Bu{constructor(e){this.events=new Tc,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Qe.pino(Qe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Cp})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new Bu(e);return await r.initialize(),r}async request(e,r){const[s,o]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:sa({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,r,s){this.request(e,s).then(o=>r(null,o)).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:jt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(l=>{this.session=l,this.namespaces||(this.namespaces=XS(l.namespaces),this.persist("namespaces",this.namespaces))}).catch(l=>{if(l.message!==Sp)throw l;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(ti(r)){for(const s of r)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Fu.init({logger:this.providerOpts.logger||Cp,relayUrl:this.providerOpts.relayUrl||LS,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Bo(r)))];Lu("client",this.client),Lu("events",this.events),Lu("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const s=WS(r,this.session),o=Fp(s),l=YS(this.namespaces,this.optionalNamespaces),b=$u(sa({},l[r]),{accounts:s,chains:o});switch(r){case"eip155":this.rpcProviders[r]=new QS({namespace:b});break;case"solana":this.rpcProviders[r]=new e5({namespace:b});break;case"cosmos":this.rpcProviders[r]=new t5({namespace:b});break;case"polkadot":this.rpcProviders[r]=new ZS({namespace:b});break;case"cip34":this.rpcProviders[r]=new r5({namespace:b});break;case"elrond":this.rpcProviders[r]=new i5({namespace:b});break;case"multiversx":this.rpcProviders[r]=new n5({namespace:b});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:s}=r;if(s.name==="accountsChanged"){const o=s.data;o&&ti(o)&&this.events.emit("accountsChanged",o.map(JS))}else s.name==="chainChanged"?this.onChainChanged(r.chainId):this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var s;const{namespaces:o}=r,l=(s=this.client)==null?void 0:s.session.get(e);this.session=$u(sa({},l),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",$u(sa({},jt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Ui.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:s,sessionProperties:o}=e;r&&Object.keys(r).length&&(this.namespaces=r),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(e){const[r,s]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,s];if(r&&!Object.keys(this.namespaces||{}).map(b=>Bo(b)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const o=Bo(Object.keys(this.namespaces)[0]),l=this.rpcProviders[o].getDefaultChain();return[o,l]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){var s;if(!this.namespaces)return;const[o,l]=this.validateChain(e);r||this.getProvider(o).setDefaultChain(l),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${l}`]).defaultChain=l,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",l)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${Tp}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${Tp}/${e}`)}}const h5=Bu,l5="wc",f5="ethereum_provider",d5=`${l5}@2:${f5}:`,p5="https://rpc.walletconnect.com/v1/",zu=["eth_sendTransaction","personal_sign"],g5=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Hu=["chainChanged","accountsChanged"],y5=["message","disconnect","connect"];var _5=Object.defineProperty,v5=Object.defineProperties,b5=Object.getOwnPropertyDescriptors,$p=Object.getOwnPropertySymbols,m5=Object.prototype.hasOwnProperty,w5=Object.prototype.propertyIsEnumerable,Bp=(n,e,r)=>e in n?_5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,ws=(n,e)=>{for(var r in e||(e={}))m5.call(e,r)&&Bp(n,r,e[r]);if($p)for(var r of $p(e))w5.call(e,r)&&Bp(n,r,e[r]);return n},zp=(n,e)=>v5(n,b5(e));function oa(n){return Number(n[0].split(":")[1])}function qu(n){return`0x${n.toString(16)}`}function E5(n){const{chains:e,optionalChains:r,methods:s,optionalMethods:o,events:l,optionalEvents:b,rpcMap:_}=n;if(!ti(e))throw new Error("Invalid chains");const w={chains:e,methods:s||zu,events:l||Hu,rpcMap:ws({},e.length?{[oa(e)]:_[oa(e)]}:{})},x=l==null?void 0:l.filter(B=>!Hu.includes(B)),A=s==null?void 0:s.filter(B=>!zu.includes(B));if(!r&&!b&&!o&&!(x!=null&&x.length)&&!(A!=null&&A.length))return{required:e.length?w:void 0};const M=(x==null?void 0:x.length)&&(A==null?void 0:A.length)||!r,W={chains:[...new Set(M?w.chains.concat(r||[]):r)],methods:[...new Set(w.methods.concat(o!=null&&o.length?o:g5))],events:[...new Set(w.events.concat(b||y5))],rpcMap:_};return{required:e.length?w:void 0,optional:r.length?W:void 0}}class Ku{constructor(){this.events=new Ur.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=d5,this.on=(e,r)=>(this.events.on(e,r),this),this.once=(e,r)=>(this.events.once(e,r),this),this.removeListener=(e,r)=>(this.events.removeListener(e,r),this),this.off=(e,r)=>(this.events.off(e,r),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const r=new Ku;return await r.initialize(e),r}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,r){this.signer.sendAsync(e,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:s}=E5(this.rpc);try{const o=await new Promise(async(b,_)=>{var w;this.rpc.showQrModal&&((w=this.modal)==null||w.subscribeModal(x=>{!x.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),_(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(zp(ws({namespaces:ws({},r&&{[this.namespace]:r})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(x=>{b(x)}).catch(x=>{_(new Error(x.message))})});if(!o)return;this.setChainIds(this.rpc.chains);const l=pE(o.namespaces,[this.namespace]);this.setAccounts(l),this.events.emit("connect",{chainId:qu(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",qu(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",zp(ws({},jt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",qu(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(e){const[r,s,o]=e.split(":");return{chainId:`${r}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,s;const o=(r=e==null?void 0:e.chains)!=null?r:[],l=(s=e==null?void 0:e.optionalChains)!=null?s:[],b=o.concat(l);if(!b.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const _=o.length?(e==null?void 0:e.methods)||zu:[],w=o.length?(e==null?void 0:e.events)||Hu:[],x=(e==null?void 0:e.optionalMethods)||[],A=(e==null?void 0:e.optionalEvents)||[],M=(e==null?void 0:e.rpcMap)||this.buildRpcMap(b,e.projectId),W=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(B=>this.formatChainId(B)),optionalChains:l.map(B=>this.formatChainId(B)),methods:_,events:w,optionalMethods:x,optionalEvents:A,rpcMap:M,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:W,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,r)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?oa(this.rpc.chains):oa(this.rpc.optionalChains),this.signer=await h5.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:s}=await import("./index.d09e9f77.js").then(function(o){return o.a});r=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(ws({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:s,rpcMap:o}=e;r&&ti(r)&&(this.rpc.chains=r.map(l=>this.formatChainId(l)),r.forEach(l=>{this.rpc.rpcMap[l]=(o==null?void 0:o[l])||this.getRpcUrl(l)})),s&&ti(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(l=>this.formatChainId(l)),s.forEach(l=>{this.rpc.rpcMap[l]=(o==null?void 0:o[l])||this.getRpcUrl(l)}))}getRpcUrl(e,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${p5}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:r==null?void 0:r.accounts),this.setAccounts(r==null?void 0:r.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const O5=Ku;export{O5 as EthereumProvider,y5 as OPTIONAL_EVENTS,g5 as OPTIONAL_METHODS,Hu as REQUIRED_EVENTS,zu as REQUIRED_METHODS,Ku as default};
